<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.0" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://www.fanliu.top/spring/SpringCloud/SpringCloud_01.html"><meta property="og:site_name" content="FanFanの学习笔记"><meta property="og:title" content="SpringCloud_01"><meta property="og:description" content="学习目标： 了解架构演进过程 理解微服务拆分流程及远程调用过程 掌握注册中心Eureka(nacos)的使用 掌握负载均衡Ribbon的使用(配置) 能够基于Feign实现服务远程调用（使用）"><meta property="og:type" content="article"><meta property="og:image" content="https://www.fanliu.top/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-08-22T07:54:51.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="SpringCloud_01"><meta property="article:author" content="fanfan"><meta property="article:tag" content="微服务"><meta property="article:tag" content="SpringCloud"><meta property="article:tag" content="Eureka"><meta property="article:tag" content="Ribbom"><meta property="article:tag" content="Feign"><meta property="article:published_time" content="2024-08-18T19:51:15.000Z"><meta property="article:modified_time" content="2024-08-22T07:54:51.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SpringCloud_01","image":["https://www.fanliu.top/"],"datePublished":"2024-08-18T19:51:15.000Z","dateModified":"2024-08-22T07:54:51.000Z","author":[{"@type":"Person","name":"fanfan","url":"https://www.fanliu.top"}]}</script><link rel="alternate" type="application/atom+xml" href="https://www.fanliu.top/atom.xml" title="FanFanの学习笔记 Atom Feed"><link rel="alternate" type="application/json" href="https://www.fanliu.top/feed.json" title="FanFanの学习笔记 JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://www.fanliu.top/rss.xml" title="FanFanの学习笔记 RSS Feed"><title>SpringCloud_01 | FanFanの学习笔记</title><meta name="description" content="学习目标： 了解架构演进过程 理解微服务拆分流程及远程调用过程 掌握注册中心Eureka(nacos)的使用 掌握负载均衡Ribbon的使用(配置) 能够基于Feign实现服务远程调用（使用）">
    <link rel="preload" href="/assets/style-w0MxZ28Y.css" as="style"><link rel="stylesheet" href="/assets/style-w0MxZ28Y.css">
    <link rel="modulepreload" href="/assets/app-PkLUv2Vk.js"><link rel="modulepreload" href="/assets/SpringCloud_01.html-fck1EvJi.js"><link rel="modulepreload" href="/assets/SpringCloud_01.html-r7o-khQQ.js">
    <link rel="prefetch" href="/assets/index.html-xRBZqaP1.js" as="script"><link rel="prefetch" href="/assets/ES_use01.html-bQdozKBj.js" as="script"><link rel="prefetch" href="/assets/JavaScript_01_基础.html-m8f0zSyl.js" as="script"><link rel="prefetch" href="/assets/JavaScript_02_流程控制.html-sj-wivWy.js" as="script"><link rel="prefetch" href="/assets/index.html-BYrs08dB.js" as="script"><link rel="prefetch" href="/assets/chinese-copywriting-guidelines.html-YCNyu0KL.js" as="script"><link rel="prefetch" href="/assets/friends.html-HSL0EQu0.js" as="script"><link rel="prefetch" href="/assets/guestbook.html-FMRlrfTD.js" as="script"><link rel="prefetch" href="/assets/intro.html-7la286_P.js" as="script"><link rel="prefetch" href="/assets/me.html-YYPThnhA.js" as="script"><link rel="prefetch" href="/assets/AJAX_01_入门.html-Yk00p8XK.js" as="script"><link rel="prefetch" href="/assets/AJAX_02_综合案例.html-qVxaZ-eD.js" as="script"><link rel="prefetch" href="/assets/AJAX_03_原理.html-wVH4kgVD.js" as="script"><link rel="prefetch" href="/assets/APP一键登录-服务端集成.html--Fbha5Lv.js" as="script"><link rel="prefetch" href="/assets/ImageIo.read() 读取图片时返回Null的解决方法.html-pMstlKlQ.js" as="script"><link rel="prefetch" href="/assets/三步教你删除七牛云bucket所有文件.html-vstLnXiy.js" as="script"><link rel="prefetch" href="/assets/为什么POST请求在重定向后会变成GET请求？.html-FEUJpKHf.js" as="script"><link rel="prefetch" href="/assets/在 Spring Boot 项目中使用自定义注解添加 Cache-Control 响应头.html-kg1Vkfe8.js" as="script"><link rel="prefetch" href="/assets/宝塔nginx缓存清理.html-Pf57yBSR.js" as="script"><link rel="prefetch" href="/assets/服务器如何处理挖矿病毒.html-14V-wMKk.js" as="script"><link rel="prefetch" href="/assets/破解Aspose系列jar包方法.html-AI0TvaUt.js" as="script"><link rel="prefetch" href="/assets/index.html-EP-CfnzN.js" as="script"><link rel="prefetch" href="/assets/docker安装MySQL.html-zKausdvg.js" as="script"><link rel="prefetch" href="/assets/带你深入了解docker日志.html-WeIPrvcC.js" as="script"><link rel="prefetch" href="/assets/管理docker必备容器-Portainer基础教程.html-zBWSCjyo.js" as="script"><link rel="prefetch" href="/assets/01-面向对象高级.html-_6Yp7MEF.js" as="script"><link rel="prefetch" href="/assets/day02-面向对象高级.html-q5vc6JIk.js" as="script"><link rel="prefetch" href="/assets/day04-常用API.html-QBBYzSt_.js" as="script"><link rel="prefetch" href="/assets/day05-jdk8新特性、算法、正则表达式.html-pJIKPwON.js" as="script"><link rel="prefetch" href="/assets/day07-集合进阶-Set、Collections、Map集合.html-xHNa3khs.js" as="script"><link rel="prefetch" href="/assets/day08-Map集合、Stream流、File、递归.html-g-SxUrh8.js" as="script"><link rel="prefetch" href="/assets/day09-字符集、IO流（一）.html-eOCK1Nn8.js" as="script"><link rel="prefetch" href="/assets/day10-IO流（二）.html-oXtiVnmt.js" as="script"><link rel="prefetch" href="/assets/day11-特殊文件、日志技术、多线程.html-iRzt0On0.js" as="script"><link rel="prefetch" href="/assets/day12-多线程.html-ncKA4AnH.js" as="script"><link rel="prefetch" href="/assets/day13-网络编程.html-OaU2Z1QD.js" as="script"><link rel="prefetch" href="/assets/day14-单元测试-反射-注解-动态代理.html-vbMZv-v0.js" as="script"><link rel="prefetch" href="/assets/Linux增加虚拟内存：提升服务器性能.html-Ls0pSBir.js" as="script"><link rel="prefetch" href="/assets/Linux常见问题笔记.html-pXnBW_u8.js" as="script"><link rel="prefetch" href="/assets/Linux系统字体缺失的修复方法.html-P_VRXt0l.js" as="script"><link rel="prefetch" href="/assets/如何更改Linux登录信息.html-PCcqiDgh.js" as="script"><link rel="prefetch" href="/assets/01_SpringBoot项目集成Prometheus.html-lLOcgfJG.js" as="script"><link rel="prefetch" href="/assets/nginx_01.html-0_Kijfq-.js" as="script"><link rel="prefetch" href="/assets/nginx_02.html-9avbPy_u.js" as="script"><link rel="prefetch" href="/assets/nodejs版本切换工具.html-pJq-0Fqo.js" as="script"><link rel="prefetch" href="/assets/jeecg-boot 防止重复提交.html-es1PRuHz.js" as="script"><link rel="prefetch" href="/assets/若依源码解读：图片验证码.html-43O-Vmaj.js" as="script"><link rel="prefetch" href="/assets/若依源码解读：防止表单重复提交.html-mBqguXwg.js" as="script"><link rel="prefetch" href="/assets/MySQL学习笔记_01.html-x5FEg1S5.js" as="script"><link rel="prefetch" href="/assets/MySQL学习笔记_02.html-pHmJtDiO.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ_01.html-OtJv2MZE.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ_02.html--Ve8K5yR.js" as="script"><link rel="prefetch" href="/assets/我的世界MCSM面板搭建.html-IFe90oj8.js" as="script"><link rel="prefetch" href="/assets/将军与士兵.html-xPSZ2375.js" as="script"><link rel="prefetch" href="/assets/真心换不了真心.html-gQG8IiUS.js" as="script"><link rel="prefetch" href="/assets/git.html-tVYjoza5.js" as="script"><link rel="prefetch" href="/assets/厦门.html-0VEBvD7e.js" as="script"><link rel="prefetch" href="/assets/Spring核心之控制反转(IOC).html-MT3J-cCo.js" as="script"><link rel="prefetch" href="/assets/SpringBoot-api-01-生成接口文档之Swagger技术栈.html-aJ_u9ey2.js" as="script"><link rel="prefetch" href="/assets/SpringBoot原理篇.html-RVJlP71J.js" as="script"><link rel="prefetch" href="/assets/SpringSecurity.html-iv6Ogo_7.js" as="script"><link rel="prefetch" href="/assets/SpringCloud_02.html-l9vxScQB.js" as="script"><link rel="prefetch" href="/assets/404.html-bAKJ-LzF.js" as="script"><link rel="prefetch" href="/assets/index.html-nQvlh0Sq.js" as="script"><link rel="prefetch" href="/assets/index.html-DvOa7M2W.js" as="script"><link rel="prefetch" href="/assets/index.html-cErLf93n.js" as="script"><link rel="prefetch" href="/assets/index.html-1E68Ihha.js" as="script"><link rel="prefetch" href="/assets/index.html-6Jj5Vkss.js" as="script"><link rel="prefetch" href="/assets/index.html-wQPWxgB4.js" as="script"><link rel="prefetch" href="/assets/index.html-SrTsqHpN.js" as="script"><link rel="prefetch" href="/assets/index.html-P-DacSs5.js" as="script"><link rel="prefetch" href="/assets/index.html-A8tptYNy.js" as="script"><link rel="prefetch" href="/assets/index.html-ndpFGVSr.js" as="script"><link rel="prefetch" href="/assets/index.html-52jtI5k-.js" as="script"><link rel="prefetch" href="/assets/index.html-jw8JcRcq.js" as="script"><link rel="prefetch" href="/assets/index.html-p7SQtRHt.js" as="script"><link rel="prefetch" href="/assets/index.html-qvD8yAJf.js" as="script"><link rel="prefetch" href="/assets/index.html-9b3HTNxw.js" as="script"><link rel="prefetch" href="/assets/index.html-ZOD0Fv58.js" as="script"><link rel="prefetch" href="/assets/index.html-uAW3VnKa.js" as="script"><link rel="prefetch" href="/assets/index.html-18w_tZXQ.js" as="script"><link rel="prefetch" href="/assets/index.html-J5dhJa__.js" as="script"><link rel="prefetch" href="/assets/index.html-1fKVCZdA.js" as="script"><link rel="prefetch" href="/assets/index.html-LoBy0MCS.js" as="script"><link rel="prefetch" href="/assets/index.html-DGcDW9FN.js" as="script"><link rel="prefetch" href="/assets/index.html-v_5-e8Aq.js" as="script"><link rel="prefetch" href="/assets/index.html-lPzWtvLp.js" as="script"><link rel="prefetch" href="/assets/index.html-huSfzMe8.js" as="script"><link rel="prefetch" href="/assets/index.html--xbPRatP.js" as="script"><link rel="prefetch" href="/assets/index.html-zSiFnTmR.js" as="script"><link rel="prefetch" href="/assets/index.html-T2lkp-Lh.js" as="script"><link rel="prefetch" href="/assets/index.html-w6SX1OmN.js" as="script"><link rel="prefetch" href="/assets/index.html-8WZP1eil.js" as="script"><link rel="prefetch" href="/assets/index.html-tOvz_STL.js" as="script"><link rel="prefetch" href="/assets/index.html-jv2_u4HK.js" as="script"><link rel="prefetch" href="/assets/index.html-bZZGkGvS.js" as="script"><link rel="prefetch" href="/assets/index.html-ongp0oT9.js" as="script"><link rel="prefetch" href="/assets/index.html-oX1h0Vc2.js" as="script"><link rel="prefetch" href="/assets/index.html-jDUJl_fD.js" as="script"><link rel="prefetch" href="/assets/index.html-NYyjykkc.js" as="script"><link rel="prefetch" href="/assets/index.html-74BHC_HX.js" as="script"><link rel="prefetch" href="/assets/index.html-ziJKl4Sj.js" as="script"><link rel="prefetch" href="/assets/index.html-gbXz9iaA.js" as="script"><link rel="prefetch" href="/assets/index.html-PGQDQ_dA.js" as="script"><link rel="prefetch" href="/assets/index.html-a4CqkFqg.js" as="script"><link rel="prefetch" href="/assets/index.html-ELchW13c.js" as="script"><link rel="prefetch" href="/assets/index.html-EvDQrB9S.js" as="script"><link rel="prefetch" href="/assets/index.html-L0TZ6Ew9.js" as="script"><link rel="prefetch" href="/assets/index.html-2CBMwrVe.js" as="script"><link rel="prefetch" href="/assets/index.html-7pOI1wHV.js" as="script"><link rel="prefetch" href="/assets/index.html-mG2HXO_b.js" as="script"><link rel="prefetch" href="/assets/index.html--Dqi8dce.js" as="script"><link rel="prefetch" href="/assets/index.html-lszS-1n8.js" as="script"><link rel="prefetch" href="/assets/index.html-bkRo475z.js" as="script"><link rel="prefetch" href="/assets/index.html-b8CVhDdp.js" as="script"><link rel="prefetch" href="/assets/index.html-s8TFYmEu.js" as="script"><link rel="prefetch" href="/assets/index.html-Mtz5h0v1.js" as="script"><link rel="prefetch" href="/assets/index.html-dFWU2DdG.js" as="script"><link rel="prefetch" href="/assets/index.html-vjqnB-Ty.js" as="script"><link rel="prefetch" href="/assets/index.html-noAj_5kW.js" as="script"><link rel="prefetch" href="/assets/index.html-bxBC7KiK.js" as="script"><link rel="prefetch" href="/assets/index.html-nN1zs5SL.js" as="script"><link rel="prefetch" href="/assets/index.html-NacsEalA.js" as="script"><link rel="prefetch" href="/assets/index.html-gYptCbpO.js" as="script"><link rel="prefetch" href="/assets/index.html-ulp7t4xA.js" as="script"><link rel="prefetch" href="/assets/index.html-0DUHSKWR.js" as="script"><link rel="prefetch" href="/assets/index.html-k_uzFHMS.js" as="script"><link rel="prefetch" href="/assets/index.html-vDkMqh08.js" as="script"><link rel="prefetch" href="/assets/index.html-njnnioLw.js" as="script"><link rel="prefetch" href="/assets/index.html-4eN35Cts.js" as="script"><link rel="prefetch" href="/assets/index.html-1rSSV8oo.js" as="script"><link rel="prefetch" href="/assets/index.html-6_jHONyc.js" as="script"><link rel="prefetch" href="/assets/index.html-hjSBc9NH.js" as="script"><link rel="prefetch" href="/assets/index.html-3hjOzIzo.js" as="script"><link rel="prefetch" href="/assets/index.html-nkCJoTlN.js" as="script"><link rel="prefetch" href="/assets/index.html-8loakx5J.js" as="script"><link rel="prefetch" href="/assets/index.html-s-LpOvR3.js" as="script"><link rel="prefetch" href="/assets/index.html-NSyXMPJC.js" as="script"><link rel="prefetch" href="/assets/index.html-5xP3tcof.js" as="script"><link rel="prefetch" href="/assets/index.html-pyOiXjvB.js" as="script"><link rel="prefetch" href="/assets/index.html-GZZH6VBa.js" as="script"><link rel="prefetch" href="/assets/index.html-xUn1FgyV.js" as="script"><link rel="prefetch" href="/assets/index.html--g3jE8JJ.js" as="script"><link rel="prefetch" href="/assets/index.html-EHxzwRUn.js" as="script"><link rel="prefetch" href="/assets/index.html-eS0RKcaP.js" as="script"><link rel="prefetch" href="/assets/index.html-uxS7L0ld.js" as="script"><link rel="prefetch" href="/assets/index.html-BiCfBqf3.js" as="script"><link rel="prefetch" href="/assets/index.html-YivXhXia.js" as="script"><link rel="prefetch" href="/assets/index.html-xypGl378.js" as="script"><link rel="prefetch" href="/assets/index.html-A9ZayZf4.js" as="script"><link rel="prefetch" href="/assets/index.html-k8WH2j3a.js" as="script"><link rel="prefetch" href="/assets/index.html-bJ8yJPuU.js" as="script"><link rel="prefetch" href="/assets/index.html-Oy4kkEWn.js" as="script"><link rel="prefetch" href="/assets/index.html-WhTVcspw.js" as="script"><link rel="prefetch" href="/assets/index.html-SFsmOny2.js" as="script"><link rel="prefetch" href="/assets/index.html-fGgjWDVa.js" as="script"><link rel="prefetch" href="/assets/index.html-aPk-Asck.js" as="script"><link rel="prefetch" href="/assets/ES_use01.html-SdfRgH8l.js" as="script"><link rel="prefetch" href="/assets/JavaScript_01_基础.html-Fj-93A8h.js" as="script"><link rel="prefetch" href="/assets/JavaScript_02_流程控制.html-M3a4fp_X.js" as="script"><link rel="prefetch" href="/assets/index.html-r5wDH5kl.js" as="script"><link rel="prefetch" href="/assets/chinese-copywriting-guidelines.html-DhVQA78p.js" as="script"><link rel="prefetch" href="/assets/friends.html-nS-QcpEQ.js" as="script"><link rel="prefetch" href="/assets/guestbook.html-yKeWKLg8.js" as="script"><link rel="prefetch" href="/assets/intro.html-0Rzwbb97.js" as="script"><link rel="prefetch" href="/assets/me.html-BdUIMRc_.js" as="script"><link rel="prefetch" href="/assets/AJAX_01_入门.html-7xm7u-4m.js" as="script"><link rel="prefetch" href="/assets/AJAX_02_综合案例.html-nHbBuAUR.js" as="script"><link rel="prefetch" href="/assets/AJAX_03_原理.html-4UkJrseH.js" as="script"><link rel="prefetch" href="/assets/APP一键登录-服务端集成.html-58w6uO7a.js" as="script"><link rel="prefetch" href="/assets/ImageIo.read() 读取图片时返回Null的解决方法.html-SpHBttBt.js" as="script"><link rel="prefetch" href="/assets/三步教你删除七牛云bucket所有文件.html-hriUyMtJ.js" as="script"><link rel="prefetch" href="/assets/为什么POST请求在重定向后会变成GET请求？.html-B_Ab1wBZ.js" as="script"><link rel="prefetch" href="/assets/在 Spring Boot 项目中使用自定义注解添加 Cache-Control 响应头.html-AEPSsaLH.js" as="script"><link rel="prefetch" href="/assets/宝塔nginx缓存清理.html-INLyDkON.js" as="script"><link rel="prefetch" href="/assets/服务器如何处理挖矿病毒.html-o2jFKwA-.js" as="script"><link rel="prefetch" href="/assets/破解Aspose系列jar包方法.html-OG9cxmKb.js" as="script"><link rel="prefetch" href="/assets/index.html-U4i4CP39.js" as="script"><link rel="prefetch" href="/assets/docker安装MySQL.html-0CHjHEj6.js" as="script"><link rel="prefetch" href="/assets/带你深入了解docker日志.html-j2nZWaZ1.js" as="script"><link rel="prefetch" href="/assets/管理docker必备容器-Portainer基础教程.html-_S0W84O-.js" as="script"><link rel="prefetch" href="/assets/01-面向对象高级.html-NW_gFvut.js" as="script"><link rel="prefetch" href="/assets/day02-面向对象高级.html-pJN_EZJA.js" as="script"><link rel="prefetch" href="/assets/day04-常用API.html-1839pFKc.js" as="script"><link rel="prefetch" href="/assets/day05-jdk8新特性、算法、正则表达式.html-o4HMsqW9.js" as="script"><link rel="prefetch" href="/assets/day07-集合进阶-Set、Collections、Map集合.html-6fnvDNpA.js" as="script"><link rel="prefetch" href="/assets/day08-Map集合、Stream流、File、递归.html-YWwewufb.js" as="script"><link rel="prefetch" href="/assets/day09-字符集、IO流（一）.html-hirYRK9y.js" as="script"><link rel="prefetch" href="/assets/day10-IO流（二）.html-FI9UZM_Z.js" as="script"><link rel="prefetch" href="/assets/day11-特殊文件、日志技术、多线程.html-3-ZHPEdu.js" as="script"><link rel="prefetch" href="/assets/day12-多线程.html-UwQ7iqS1.js" as="script"><link rel="prefetch" href="/assets/day13-网络编程.html-EnChUyIe.js" as="script"><link rel="prefetch" href="/assets/day14-单元测试-反射-注解-动态代理.html-YGdNgUog.js" as="script"><link rel="prefetch" href="/assets/Linux增加虚拟内存：提升服务器性能.html-qRPd8Rib.js" as="script"><link rel="prefetch" href="/assets/Linux常见问题笔记.html-1d1C8UTp.js" as="script"><link rel="prefetch" href="/assets/Linux系统字体缺失的修复方法.html-7P7dnXIH.js" as="script"><link rel="prefetch" href="/assets/如何更改Linux登录信息.html-t6gfUxHM.js" as="script"><link rel="prefetch" href="/assets/01_SpringBoot项目集成Prometheus.html-jersXMrE.js" as="script"><link rel="prefetch" href="/assets/nginx_01.html-uo8gpMrO.js" as="script"><link rel="prefetch" href="/assets/nginx_02.html-nd3fpI1j.js" as="script"><link rel="prefetch" href="/assets/nodejs版本切换工具.html-BYfh_CJQ.js" as="script"><link rel="prefetch" href="/assets/jeecg-boot 防止重复提交.html-WfziNbcx.js" as="script"><link rel="prefetch" href="/assets/若依源码解读：图片验证码.html-d7-YW0vX.js" as="script"><link rel="prefetch" href="/assets/若依源码解读：防止表单重复提交.html-j6wCHS4D.js" as="script"><link rel="prefetch" href="/assets/MySQL学习笔记_01.html-Y1_V-U07.js" as="script"><link rel="prefetch" href="/assets/MySQL学习笔记_02.html-I_niZ06Z.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ_01.html-HFnXZL2R.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ_02.html-lIAp6ese.js" as="script"><link rel="prefetch" href="/assets/我的世界MCSM面板搭建.html-_1fE-WMS.js" as="script"><link rel="prefetch" href="/assets/将军与士兵.html-TKWMgex1.js" as="script"><link rel="prefetch" href="/assets/真心换不了真心.html--4eu0CGX.js" as="script"><link rel="prefetch" href="/assets/git.html--dfFOp36.js" as="script"><link rel="prefetch" href="/assets/厦门.html-gvumKsOX.js" as="script"><link rel="prefetch" href="/assets/Spring核心之控制反转(IOC).html---AErD9Y.js" as="script"><link rel="prefetch" href="/assets/SpringBoot-api-01-生成接口文档之Swagger技术栈.html-wL2iyLjc.js" as="script"><link rel="prefetch" href="/assets/SpringBoot原理篇.html-1eVyebQK.js" as="script"><link rel="prefetch" href="/assets/SpringSecurity.html-jHA8nxCi.js" as="script"><link rel="prefetch" href="/assets/SpringCloud_02.html-faEnFWVJ.js" as="script"><link rel="prefetch" href="/assets/404.html-Zlc4oRTO.js" as="script"><link rel="prefetch" href="/assets/index.html-pGUWkF2l.js" as="script"><link rel="prefetch" href="/assets/index.html-QO76RoLw.js" as="script"><link rel="prefetch" href="/assets/index.html-MSiYovoT.js" as="script"><link rel="prefetch" href="/assets/index.html-Ra-z5QFn.js" as="script"><link rel="prefetch" href="/assets/index.html-L1J0ZKEN.js" as="script"><link rel="prefetch" href="/assets/index.html-L9n5ylLX.js" as="script"><link rel="prefetch" href="/assets/index.html-zB4K6qPF.js" as="script"><link rel="prefetch" href="/assets/index.html-NOolhxsg.js" as="script"><link rel="prefetch" href="/assets/index.html-KuZMPxcz.js" as="script"><link rel="prefetch" href="/assets/index.html-szxYtKh9.js" as="script"><link rel="prefetch" href="/assets/index.html-jQNVvMaf.js" as="script"><link rel="prefetch" href="/assets/index.html-ToSgguVB.js" as="script"><link rel="prefetch" href="/assets/index.html-VyzzRWcM.js" as="script"><link rel="prefetch" href="/assets/index.html-f3jkIlra.js" as="script"><link rel="prefetch" href="/assets/index.html-_p0DRN8x.js" as="script"><link rel="prefetch" href="/assets/index.html-eOGhgtH-.js" as="script"><link rel="prefetch" href="/assets/index.html-tlbOYxAw.js" as="script"><link rel="prefetch" href="/assets/index.html-zlSnTS8p.js" as="script"><link rel="prefetch" href="/assets/index.html-J3U_eqs7.js" as="script"><link rel="prefetch" href="/assets/index.html-S0t4bN9y.js" as="script"><link rel="prefetch" href="/assets/index.html-SFEmGknd.js" as="script"><link rel="prefetch" href="/assets/index.html-JW4YyyoG.js" as="script"><link rel="prefetch" href="/assets/index.html-GkPkIa6d.js" as="script"><link rel="prefetch" href="/assets/index.html-DvbrOoSK.js" as="script"><link rel="prefetch" href="/assets/index.html-77stxcTi.js" as="script"><link rel="prefetch" href="/assets/index.html-uiXZscUM.js" as="script"><link rel="prefetch" href="/assets/index.html-OZmn0y4t.js" as="script"><link rel="prefetch" href="/assets/index.html-kJfTd1zx.js" as="script"><link rel="prefetch" href="/assets/index.html-wy6npXA6.js" as="script"><link rel="prefetch" href="/assets/index.html-VZ3iR9ye.js" as="script"><link rel="prefetch" href="/assets/index.html-cTmya_4F.js" as="script"><link rel="prefetch" href="/assets/index.html-qirhfgZl.js" as="script"><link rel="prefetch" href="/assets/index.html-PNp-vyZB.js" as="script"><link rel="prefetch" href="/assets/index.html-FmRG7JnB.js" as="script"><link rel="prefetch" href="/assets/index.html-M7aT020M.js" as="script"><link rel="prefetch" href="/assets/index.html-db8yAK4G.js" as="script"><link rel="prefetch" href="/assets/index.html-zKpSBxIb.js" as="script"><link rel="prefetch" href="/assets/index.html-2Ksf9-VX.js" as="script"><link rel="prefetch" href="/assets/index.html-qSPNQjgj.js" as="script"><link rel="prefetch" href="/assets/index.html-WVfxgxaG.js" as="script"><link rel="prefetch" href="/assets/index.html-Msb5C3Un.js" as="script"><link rel="prefetch" href="/assets/index.html-aCdI92cB.js" as="script"><link rel="prefetch" href="/assets/index.html-m4nG9ruI.js" as="script"><link rel="prefetch" href="/assets/index.html-o4EmP6pK.js" as="script"><link rel="prefetch" href="/assets/index.html-0ly0gNNw.js" as="script"><link rel="prefetch" href="/assets/index.html-he9EfRTM.js" as="script"><link rel="prefetch" href="/assets/index.html-ANrlsHZj.js" as="script"><link rel="prefetch" href="/assets/index.html-cTn2HqXX.js" as="script"><link rel="prefetch" href="/assets/index.html-v-vG1MBe.js" as="script"><link rel="prefetch" href="/assets/index.html-IWznWgCG.js" as="script"><link rel="prefetch" href="/assets/index.html--Qqe7jQb.js" as="script"><link rel="prefetch" href="/assets/index.html-naFE3Agj.js" as="script"><link rel="prefetch" href="/assets/index.html-WWRMoL_U.js" as="script"><link rel="prefetch" href="/assets/index.html-LVNxvcbX.js" as="script"><link rel="prefetch" href="/assets/index.html-4i9p4uGB.js" as="script"><link rel="prefetch" href="/assets/index.html-n07qbVcY.js" as="script"><link rel="prefetch" href="/assets/index.html-GshIRF8T.js" as="script"><link rel="prefetch" href="/assets/index.html-zz5X5OOW.js" as="script"><link rel="prefetch" href="/assets/index.html-24qntGTf.js" as="script"><link rel="prefetch" href="/assets/index.html-LO0-7zCg.js" as="script"><link rel="prefetch" href="/assets/index.html-S7eZXAoY.js" as="script"><link rel="prefetch" href="/assets/index.html-K28JskDm.js" as="script"><link rel="prefetch" href="/assets/index.html-QiZVar3_.js" as="script"><link rel="prefetch" href="/assets/index.html-Frs_k58n.js" as="script"><link rel="prefetch" href="/assets/index.html-987Akghg.js" as="script"><link rel="prefetch" href="/assets/index.html-KpHxJ-hE.js" as="script"><link rel="prefetch" href="/assets/index.html-FJTBYRQg.js" as="script"><link rel="prefetch" href="/assets/index.html-iXTdkFoh.js" as="script"><link rel="prefetch" href="/assets/index.html-Z4d6AzBZ.js" as="script"><link rel="prefetch" href="/assets/index.html-Qq_S71tw.js" as="script"><link rel="prefetch" href="/assets/index.html-RUWF2lzU.js" as="script"><link rel="prefetch" href="/assets/index.html-qoAyDY6g.js" as="script"><link rel="prefetch" href="/assets/index.html-aFbhJpa8.js" as="script"><link rel="prefetch" href="/assets/index.html-o5ejHHR6.js" as="script"><link rel="prefetch" href="/assets/index.html-_71PcczU.js" as="script"><link rel="prefetch" href="/assets/index.html-sxSoO4A6.js" as="script"><link rel="prefetch" href="/assets/index.html-KbGvXB1W.js" as="script"><link rel="prefetch" href="/assets/index.html-yoWK2b27.js" as="script"><link rel="prefetch" href="/assets/index.html-6Mc5ASoT.js" as="script"><link rel="prefetch" href="/assets/index.html-uewmwlsj.js" as="script"><link rel="prefetch" href="/assets/index.html-2JocfB-7.js" as="script"><link rel="prefetch" href="/assets/index.html-L7PYw4R9.js" as="script"><link rel="prefetch" href="/assets/index.html-WlSSPWIk.js" as="script"><link rel="prefetch" href="/assets/index.html-iK6Y6Ijx.js" as="script"><link rel="prefetch" href="/assets/index.html-fmRcaVgm.js" as="script"><link rel="prefetch" href="/assets/index.html-pjOxXKEL.js" as="script"><link rel="prefetch" href="/assets/index.html-bTB3WK7z.js" as="script"><link rel="prefetch" href="/assets/index.html-UFUO-uxd.js" as="script"><link rel="prefetch" href="/assets/index.html-W8jKsdeg.js" as="script"><link rel="prefetch" href="/assets/index.html-NJnCiSQz.js" as="script"><link rel="prefetch" href="/assets/index.html-G8gT8EL2.js" as="script"><link rel="prefetch" href="/assets/index.html-BVGFLKZz.js" as="script"><link rel="prefetch" href="/assets/index.html-8NvHrUgn.js" as="script"><link rel="prefetch" href="/assets/waline-meta-w40geAFS.js" as="script"><link rel="prefetch" href="/assets/component-knXMeNAR.js" as="script"><link rel="prefetch" href="/assets/auto-HRhNfH8L.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-VPkcmA5b.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-ldiezHYe.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-mC0Qcr12.js" as="script"><link rel="prefetch" href="/assets/pageview-48QB4zRV.js" as="script"><link rel="prefetch" href="/assets/SearchResult-cz-UOjGg.js" as="script"><link rel="prefetch" href="/assets/NavMusic-0AJtDghJ.js" as="script"><link rel="prefetch" href="/assets/HeroHitokoto-hGMpfAoO.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar auto-hide"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt="FanFanの学习笔记"><!----><span class="vp-site-name hide-in-pad">FanFanの学习笔记</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="博客" class="vp-link nav-link nav-link" href="/blog/"><img class="icon" src="/assets/icon/blog.svg" no-view style="">博客<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="索引"><span class="title"><img class="icon" src="/img/suoyin.svg" no-view style="">索引</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="所有文章" class="vp-link nav-link nav-link" href="/article/"><img class="icon" src="/img/any.svg" no-view style="">所有文章<!----></a></li><li class="dropdown-item"><a aria-label="分类" class="vp-link nav-link nav-link" href="/category/"><img class="icon" src="/img/suoyin.svg" no-view style="">分类<!----></a></li><li class="dropdown-item"><a aria-label="标签" class="vp-link nav-link nav-link" href="/tag/"><span class="font-icon icon iconfont icon-tag" style=""></span>标签<!----></a></li><li class="dropdown-item"><a aria-label="时间轴" class="vp-link nav-link nav-link" href="/timeline/"><img class="icon" src="/img/time.svg" no-view style="">时间轴<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="知识库"><span class="title"><img class="icon" src="/img/book.svg" no-view style="">知识库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="源码解读" class="vp-link nav-link nav-link" href="/CodeInterpretation/"><img class="icon" src="/img/code.svg" no-view style="">源码解读<!----></a></li><li class="dropdown-item"><a aria-label="JavaScript" class="vp-link nav-link nav-link" href="/JavaScript/"><span class="font-icon icon iconfont icon-JavaScript" style=""></span>JavaScript<!----></a></li><li class="dropdown-item"><a aria-label="AJAX" class="vp-link nav-link nav-link" href="/ajax/"><span class="font-icon icon iconfont icon-ajax" style=""></span>AJAX<!----></a></li><li class="dropdown-item"><a aria-label="JavaSE" class="vp-link nav-link nav-link" href="/javaSE/"><span class="font-icon icon iconfont icon-java" style=""></span>JavaSE<!----></a></li><li class="dropdown-item"><a aria-label="Linux" class="vp-link nav-link nav-link" href="/linux/"><img class="icon" src="/img/linux.svg" no-view style="">Linux<!----></a></li><li class="dropdown-item"><a aria-label="Docker" class="vp-link nav-link nav-link" href="/docker/"><img class="icon" src="/img/docker.svg" no-view style="">Docker<!----></a></li><li class="dropdown-item"><a aria-label="Nginx" class="vp-link nav-link nav-link" href="/nginx/"><span class="font-icon icon iconfont icon-nginx" style=""></span>Nginx<!----></a></li><li class="dropdown-item"><a aria-label="nodeJS" class="vp-link nav-link nav-link" href="/nodeJS/"><img class="icon" src="/img/node.svg" no-view style="">nodeJS<!----></a></li><li class="dropdown-item"><a aria-label="ES" class="vp-link nav-link nav-link" href="/Elasticsearch/"><img class="icon" src="/img/es.svg" no-view style="">ES<!----></a></li><li class="dropdown-item"><a aria-label="RabbitMQ" class="vp-link nav-link nav-link" href="/mq/rabbitMQ/"><img class="icon" src="/img/rabbitmq.svg" no-view style="">RabbitMQ<!----></a></li><li class="dropdown-item"><a aria-label="Spring" class="vp-link nav-link active nav-link active" href="/spring/"><img class="icon" src="/img/spring.svg" no-view style="">Spring<!----></a></li><li class="dropdown-item"><a aria-label="数据库" class="vp-link nav-link nav-link" href="/db/"><img class="icon" src="/img/mysql.svg" no-view style="">数据库<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="生活"><span class="title"><img class="icon" src="/img/holiday.svg" no-view style="">生活</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="杂记" class="vp-link nav-link nav-link" href="/other/node/"><img class="icon" src="/img/book.svg" no-view style="">杂记<!----></a></li><li class="dropdown-item"><a aria-label="足迹" class="vp-link nav-link nav-link" href="/other/world/"><img class="icon" src="/img/lvXing.svg" no-view style="">足迹<!----></a></li><li class="dropdown-item"><a aria-label="游戏" class="vp-link nav-link nav-link" href="/other/game/"><img class="icon" src="/img/game.svg" no-view style="">游戏<!----></a></li><li class="dropdown-item"><a aria-label="工具" class="vp-link nav-link nav-link" href="/other/tool/"><img class="icon" src="/img/lvXing.svg" no-view style="">工具<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="关于" class="vp-link nav-link nav-link" href="/about/"><img class="icon" src="/assets/icon/about-me.svg" no-view style="">关于<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://foreverblog.cn/go.html" title="穿梭虫洞-随机访问十年之约友链博客" target="_blank" rel="noopener noreferrer" aria-label="wormhole"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor" style="width:1.25rem;height:1.25rem;vertical-align:middle"><path d="M644.608 665.6c192.512-171.008 342.016-395.776 254.464-494.592-27.648-31.232-66.56-45.568-108.032-41.472-34.816 3.584-70.656 20.992-107.008 50.176-116.224-59.904-254.464-55.296-366.592 11.776-86.016 51.2-148.48 134.656-172.544 231.936-18.944 74.24-14.336 152.064 12.8 223.744-44.544 50.688-86.528 154.624-34.816 212.992 21.504 24.576 52.736 35.328 90.112 35.328 114.176-0.512 286.72-100.864 431.616-229.888z m155.648-452.608c14.848-1.536 26.624 2.56 36.352 13.824 9.728 10.752 7.168 39.936-10.752 80.896-18.944-28.672-41.984-55.296-68.096-77.824 17.92-10.752 32.256-15.872 42.496-16.896z m-598.528 517.12c18.944 27.136 40.96 51.712 66.048 73.216-43.008 12.8-72.192 11.776-81.92 1.024-8.704-10.752 0.512-45.056 15.872-74.24z m685.568-246.784c-51.2 75.264-122.368 154.112-200.704 224.256-81.408 72.192-171.008 134.656-254.464 176.64 26.112 5.632 52.224 8.704 78.848 8.704 68.096 0 135.168-18.944 194.048-53.76 124.416-73.216 195.072-211.968 182.272-355.84z m0 0" p-id="4157"></path></svg></a></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://www.travellings.cn/go.html" title="开往" target="_blank" rel="noopener noreferrer" aria-label="travelling"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor" style="width:1.25rem;height:1.25rem;vertical-align:middle"><path d="M658.836 519.32c-22.121 0-40.145 18.431-40.145 40.957 0 22.528 18.023 40.962 40.145 40.962 22.117 0 40.141-18.434 40.141-40.962 0-22.526-18.024-40.957-40.141-40.957zM364.742 519.32c-22.121 0-40.141 18.431-40.141 40.957 0.41 22.528 18.02 40.962 40.141 40.962 22.117 0 40.141-18.434 40.141-40.962 0-22.526-18.024-40.957-40.141-40.957z" p-id="8700"></path><path d="M512 0C229.23 0 0 229.23 0 512s229.23 512 512 512 512-229.23 512-512S794.77 0 512 0z m133.727 804.81c0 7.375-6.145 13.52-13.516 13.52H391.773c-7.371 0-13.515-6.145-13.515-13.52v-13.516c0-7.371 6.144-13.517 13.515-13.517h240.438c7.371 0 13.516 6.146 13.516 13.517v13.516z m120.832 37.273c-12.289 6.965-27.441 2.867-34.406-9.418l-54.887-96.668c-4.504 0.82-9.422 1.23-13.926 1.23H361.054c-4.914 0-9.421-0.41-13.925-1.23l-54.887 96.668c-6.965 12.285-22.527 16.383-34.406 9.418-12.289-6.961-16.383-22.938-9.422-35.223l51.199-90.113c-27.031-19.66-43.418-52.43-40.957-88.883l19.25-293.273c3.277-49.152 34.406-88.066 87.246-88.066h80.281c0-37.684 29.899-67.993 66.762-67.993 36.868 0 66.766 30.309 66.766 67.993h93.391c53.246 0 70.449 38.914 73.727 88.066l19.25 293.273c2.461 36.453-13.926 69.223-40.957 88.883l51.199 90.113c6.964 12.696 2.867 28.262-9.012 35.223z" p-id="8701"></path><path d="M672.352 314.931H351.633c-14.747 0-26.622 12.285-26.622 27.441v108.953c0 15.157 11.875 27.446 26.622 27.446h320.719c14.746 0 26.625-12.289 26.625-27.446V342.372c0-15.156-11.879-27.441-26.625-27.441z" p-id="8702"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Framework</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Spring Boot</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">Spring Cloud</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="SpringCloud_01" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/spring/SpringCloud/SpringCloud_01.html"><img class="icon" src="/img/spring.svg" no-view style="">SpringCloud_01<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1 服务架构演进" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_1-服务架构演进"><!---->1 服务架构演进<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.1 单体架构" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_1-1-单体架构"><!---->1.1 单体架构<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.2 分布式架构" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_1-2-分布式架构"><!---->1.2 分布式架构<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.3 微服务" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_1-3-微服务"><!---->1.3 微服务<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.4 SpringCloud" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_1-4-springcloud"><!---->1.4 SpringCloud<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="1.5 总结" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_1-5-总结"><!---->1.5 总结<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2 服务拆分及远程调用" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_2-服务拆分及远程调用"><!---->2 服务拆分及远程调用<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="2.1 分布式架构要考虑的问题" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_2-1-分布式架构要考虑的问题"><!---->2.1 分布式架构要考虑的问题<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.2 工程导入" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_2-2-工程导入"><!---->2.2 工程导入<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.3 远程调用" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_2-3-远程调用"><!---->2.3 远程调用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.3 服务提供者、服务消费者" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_2-3-服务提供者、服务消费者"><!---->2.3 服务提供者、服务消费者<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3. Eureka注册中心" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_3-eureka注册中心"><!---->3. Eureka注册中心<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="3.1 Eureka的作用" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_3-1-eureka的作用"><!---->3.1 Eureka的作用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.2 Eureka的工作原理" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_3-2-eureka的工作原理"><!---->3.2 Eureka的工作原理<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.3 Eureka注册中心实战" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_3-3-eureka注册中心实战"><!---->3.3 Eureka注册中心实战<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4 负载均衡Ribbon" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_4-负载均衡ribbon"><!---->4 负载均衡Ribbon<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="4.1 负载均衡原理" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_4-1-负载均衡原理"><!---->4.1 负载均衡原理<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.2 负载均衡策略" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_4-2-负载均衡策略"><!---->4.2 负载均衡策略<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.3 饥饿加载" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_4-3-饥饿加载"><!---->4.3 饥饿加载<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.4. 总结" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_4-4-总结"><!---->4.4. 总结<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5 http客户端Feign" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_5-http客户端feign"><!---->5 http客户端Feign<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="5.1 Feign介绍" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_5-1-feign介绍"><!---->5.1 Feign介绍<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.2 Feign入门案例" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_5-2-feign入门案例"><!---->5.2 Feign入门案例<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.3 Feign其他功能" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#_5-3-feign其他功能"><!---->5.3 Feign其他功能<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="问题" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/spring/SpringCloud/SpringCloud_01.html#问题"><!---->问题<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-label="SpringCloud（二）" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/spring/SpringCloud/SpringCloud_02.html"><img class="icon" src="/img/spring.svg" no-view style="">SpringCloud（二）<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><img class="icon" src="/img/spring.svg" no-view style="">SpringCloud_01</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://www.fanliu.top" target="_blank" rel="noopener noreferrer">fanfan</a></span><span property="author" content="fanfan"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-08-18T19:51:15.000Z"></span><span class="page-pageview-info" aria-label="访问量🔢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/spring/SpringCloud/SpringCloud_01.html">...</span></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 29 分钟</span><meta property="timeRequired" content="PT29M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category7 clickable" role="navigation">SpringCloud</span><!--]--><meta property="articleSection" content="SpringCloud"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag1 clickable" role="navigation">微服务</span><span class="page-tag-item tag7 clickable" role="navigation">SpringCloud</span><span class="page-tag-item tag3 clickable" role="navigation">Eureka</span><span class="page-tag-item tag3 clickable" role="navigation">Ribbom</span><span class="page-tag-item tag0 clickable" role="navigation">Feign</span><!--]--><meta property="keywords" content="微服务,SpringCloud,Eureka,Ribbom,Feign"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_1-服务架构演进">1 服务架构演进</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-1-单体架构">1.1 单体架构</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-2-分布式架构">1.2 分布式架构</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-3-微服务">1.3 微服务</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-4-springcloud">1.4 SpringCloud</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_1-5-总结">1.5 总结</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_2-服务拆分及远程调用">2 服务拆分及远程调用</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-1-分布式架构要考虑的问题">2.1 分布式架构要考虑的问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-2-工程导入">2.2 工程导入</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-3-远程调用">2.3 远程调用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-3-服务提供者、服务消费者">2.3 服务提供者、服务消费者</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_3-eureka注册中心">3. Eureka注册中心</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-1-eureka的作用">3.1 Eureka的作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-2-eureka的工作原理">3.2 Eureka的工作原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-3-eureka注册中心实战">3.3 Eureka注册中心实战</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_4-负载均衡ribbon">4 负载均衡Ribbon</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-1-负载均衡原理">4.1 负载均衡原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-2-负载均衡策略">4.2 负载均衡策略</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-3-饥饿加载">4.3 饥饿加载</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-4-总结">4.4. 总结</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_5-http客户端feign">5 http客户端Feign</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-1-feign介绍">5.1 Feign介绍</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-2-feign入门案例">5.2 Feign入门案例</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-3-feign其他功能">5.3 Feign其他功能</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#问题">问题</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><p>学习目标：</p><ul><li>了解架构演进过程</li><li>理解微服务拆分流程及远程调用过程</li><li>掌握注册中心Eureka(nacos)的使用</li><li>掌握负载均衡Ribbon的使用(配置)</li><li>能够基于Feign实现服务远程调用（使用）</li></ul><!-- more --><h2 id="_1-服务架构演进" tabindex="-1"><a class="header-anchor" href="#_1-服务架构演进" aria-hidden="true">#</a> 1 服务架构演进</h2><p>章节知识点</p><ul><li>单体架构</li><li>分布式架构</li><li>微服务架构</li><li>SpringCloud</li></ul><p>过去的互联网：</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">1</span><span class="token punctuation">:</span><span class="token value attr-value">用户量不多</span>
<span class="token key attr-name">2</span><span class="token punctuation">:</span><span class="token value attr-value">并发低</span>
<span class="token key attr-name">3</span><span class="token punctuation">:</span><span class="token value attr-value">数据少</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在的互联网:</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">1</span><span class="token punctuation">:</span><span class="token value attr-value">用户多</span>
<span class="token key attr-name">2</span><span class="token punctuation">:</span><span class="token value attr-value">并发高</span>
<span class="token key attr-name">3</span><span class="token punctuation">:</span><span class="token value attr-value">数据庞大</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>互联网架构从简到繁的演进经历了单体架构、分布式架构、SOA架构、微服务架构以及最新的service mesh的演进过程。</p><h3 id="_1-1-单体架构" tabindex="-1"><a class="header-anchor" href="#_1-1-单体架构" aria-hidden="true">#</a> 1.1 单体架构</h3><p>1)概念</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>早期互联网产品用户量少，并发量低，数据量小，单个应用服务器可以满足需要，这就是最早互联网架构。我们用一句话总结什么是单体架构：将业务的所有功能集中在一个项目中开发，部署为一个节点。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2)架构图</p><img src="/assets/image-20211024160108574-1dymvfUg.png" align="left"><p>3)优缺点</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">#优点：</span>
	1)架构简单
	2)部署成本低
	
<span class="token comment">#缺点：</span>
	1)耦合度高
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-分布式架构" tabindex="-1"><a class="header-anchor" href="#_1-2-分布式架构" aria-hidden="true">#</a> 1.2 分布式架构</h3><p>1)概念</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>根据业务功能对系统进行拆分，每个业务模块称为一个服务。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2)架构图</p><img src="/assets/1628562524452-vgIBU_pb.png" align="left" style="zoom:67%;"><p>3)优缺点</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">#优点</span>
	1)降低服务耦合度
	2)有利于服务升级拓展
	
<span class="token comment">#缺点</span>
	1)维护成本增加
	2)服务间调用复杂度增加
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4)需要解决的问题</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>1)服务拆分粒度如何？
2)服务之间如何实现调用？
3)服务关系如何管理？
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-微服务" tabindex="-1"><a class="header-anchor" href="#_1-3-微服务" aria-hidden="true">#</a> 1.3 微服务</h3><p>1)概念</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">微服务是系统架构的一种设计风格,将一个原本独立的服务拆分成多个小型服务,每个服务独立运行在在各自的进程中,服务之间通过</span> <span class="token value attr-value">HTTP RESTful API 进行通信.每个小型的服务都围绕着系统中的某个耦合度较高的业务进行构建。</span>

<span class="token comment">#微服务是一种经过良好设计的分布式架构方案，而全球的互联网公司都在积极尝试自己的微服务落地方案。其中在java领域最引人注目的是SpringCloud提供的方案。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2)架构图</p><img src="/assets/1628563735767-BslBAyY9.png" align="left" style="zoom:67%;"><p>3)微服务架构特征</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">单一职责</span><span class="token punctuation">:</span><span class="token value attr-value">微服务拆分粒度更小，每个服务都应对唯一的业务能力，做到单一职责</span>
<span class="token key attr-name">自治</span><span class="token punctuation">:</span><span class="token value attr-value">团队独立、技术独立、数据独立，独立部署和交付</span>
<span class="token key attr-name">面向服务</span><span class="token punctuation">:</span><span class="token value attr-value">服务提供统一标准的接口，与语言无关、与技术无关</span>
<span class="token key attr-name">隔离性强</span><span class="token punctuation">:</span><span class="token value attr-value">服务调用做好隔离、容错、降级，避免出现级联问题</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-springcloud" tabindex="-1"><a class="header-anchor" href="#_1-4-springcloud" aria-hidden="true">#</a> 1.4 SpringCloud</h3><ul><li><p>SpringCloud是目前国内使用最广泛的微服务技术栈。官网地址：https://spring.io/projects/spring-cloud。</p></li><li><p>SpringCloud集成了各种微服务功能组件，并<strong>基于SpringBoot</strong>实现了这些组件的自动装配，从而提供了良好的开箱即用体验:</p></li></ul><img src="/assets/1628564232976-UmRkbhfg.png" align="left"><ul><li>SpringCloud与SpringBoot的版本兼容关系如下：</li></ul><img src="/assets/1628564696941-zSB0xFK8.png" algin="left"><ul><li>我们课堂学习的版本是 Hoxton.SR10，因此对应的SpringBoot版本是2.3.x（2.3.8）版本。</li></ul><h4 id="_1-springcloud是什么" tabindex="-1"><a class="header-anchor" href="#_1-springcloud是什么" aria-hidden="true">#</a> 1. SpringCloud是什么?</h4><p>SpringCloud是微服务架构的一站式解决方案，集成了各种优秀微服务功能组件，并基于SpringBoot实现了这些组件的自动装配，从而提供了良好的开箱即用体验。</p><h4 id="_2-springcloud用hoxton版本-springboot可以用2-1-x" tabindex="-1"><a class="header-anchor" href="#_2-springcloud用hoxton版本-springboot可以用2-1-x" aria-hidden="true">#</a> 2. SpringCloud用Hoxton版本，SpringBoot可以用2.1.x？</h4><p>不可以，版本有对应关系。需使用SpringBoot 2.2.x 2.3.x</p><h3 id="_1-5-总结" tabindex="-1"><a class="header-anchor" href="#_1-5-总结" aria-hidden="true">#</a> 1.5 总结</h3><ul><li><p>单体架构:简单方便，高度耦合，扩展性差，适合小型项目。例如：学生管理系统，后台管理系统，ERP,OA 中小级企业级应用</p></li><li><p>分布式架构:松耦合，扩展性好，但架构复杂，难度大。适合大型互联网项目，例如：京东、淘宝</p></li><li><p>微服务:一种良好的分布式架构方案</p></li><li><p>优点:拆分粒度更小、服务更独立、耦合度更低</p></li><li><p>缺点:架构非常复杂，运维、监控、部署难度提高</p></li><li><p>SpringCloud:SpringCloud是微服务架构的一站式解决方案，集成了各种优秀微服务功能组件</p></li></ul><h2 id="_2-服务拆分及远程调用" tabindex="-1"><a class="header-anchor" href="#_2-服务拆分及远程调用" aria-hidden="true">#</a> 2 服务拆分及远程调用</h2><h3 id="_2-1-分布式架构要考虑的问题" tabindex="-1"><a class="header-anchor" href="#_2-1-分布式架构要考虑的问题" aria-hidden="true">#</a> 2.1 分布式架构要考虑的问题</h3><ul><li>服务的拆分粒度如何？</li></ul><blockquote><p>1.不同微服务，不要重复开发相同业务</p></blockquote><ul><li>服务之间如何调用？</li></ul><blockquote><p>2.微服务数据独立，不要访问其它微服务的数据库</p><p>3.微服务可以将自己的业务暴露为接口，供其它微服务调用</p></blockquote><ul><li>服务关系如何处理？</li></ul><blockquote><ol><li>服务发现：服务发现是指服务之间的自动化发现和注册。通过服务发现机制，每个服务可以注册自己并查询其他服务。这种方式可以确保服务之间的通信是动态的和透明的，而且可以更容易地添加或删除服务。</li><li>API 网关：API 网关是一种代理服务器，用于在微服务之间进行请求路由和协议转换。API 网关可以提供安全性、负载均衡、缓存、协议转换等功能。此外，API 网关还可以对请求进行验证和授权，并可以对流量进行监控和日志记录。</li><li>异步消息传递：异步消息传递是一种通过消息队列实现的解耦方式，它可以将消息发送到一个队列中，然后由另一个服务从队列中取出并处理消息。这种方式可以确保服务之间的通信是松散耦合的，并且可以处理高并发和高负载的情况。</li><li>数据库共享：在某些情况下，多个服务需要访问同一个数据库。这种情况下，可以使用数据库共享来确保数据的一致性和完整性。但是，应该注意的是，这种方式可能会引起数据访问的竞争和冲突。</li></ol></blockquote><h3 id="_2-2-工程导入" tabindex="-1"><a class="header-anchor" href="#_2-2-工程导入" aria-hidden="true">#</a> 2.2 工程导入</h3><p>① SQL导入</p><p>将<code>资料\工程代码\springcloud-parent\sql脚本</code>中的<code>cloud-order.sql</code>和<code>cloud-user.sql</code>分别导入到两个数据库中。</p><p>② 工程导入</p><p>将<code>资料\工程\springcloud-parent</code>导入到IDEA中</p><figure><img src="/assets/image-20211027154853135-GjtlAd_8.png" alt="image-20211027154853135" tabindex="0" loading="lazy"><figcaption>image-20211027154853135</figcaption></figure><p>③ 修改数据库配置，并测试</p><p>查询某用户详情信息：<code>http://localhost:18081/user/1</code></p><p>查询某订单详情信息：<code>http://localhost:18082/order/101</code></p><h3 id="_2-3-远程调用" tabindex="-1"><a class="header-anchor" href="#_2-3-远程调用" aria-hidden="true">#</a> 2.3 远程调用</h3><p><strong>远程调用的概念：</strong></p><blockquote><p>远程调用是指在分布式系统中，一个节点通过网络调用另一个节点的服务方法。在分布式系统中，不同的节点可能运行不同的应用程序或服务，这些节点之间需要进行通信和协作。通过远程调用，节点之间可以共享资源、交换数据、协调工作等。</p></blockquote><p>① RestTemplate介绍</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">RestTemplate</span> <span class="token value attr-value">是spring家族中一款基于http协议的组件(HttpURLConnection)，他的作用就是：用来实现基于http的协议方式的服务之间的通信（也就是远程服务调用）。</span>

<span class="token key attr-name">RestTemplate</span> <span class="token value attr-value">采用同步方式执行 HTTP 请求，底层使用 JDK 原生 HttpURLConnection API 。</span>

<span class="token comment">#概念总结:RestTemplate是spring提供的一个用来模拟浏览器发送请求和接收响应的一个类,它能基于Http协议实现远程调用。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 注册RestTemplate</p><p>在<code>itheima-order</code>的<code>OrderApp中注册</code>RestTemplate`:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderApp</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//注册RestTemplate  发送http请求</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>③ 远程调用</p><p>修改<code>itheima-order</code>中的<code>OrderServiceImpl</code>的<code>findById</code>方法</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 根据ID查询订单信息
 */</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">OrderInfo</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.查询订单</span>
    <span class="token class-name">OrderInfo</span> orderInfo <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.根据订单查询用户信息-&gt;需要调用  【item-user】  服务</span>
    <span class="token comment">//参数1：用户微服务的请求地址</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;http://localhost:18081/user/&quot;</span><span class="token operator">+</span>orderInfo<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3.封装user到订单中</span>
    orderInfo<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4.返回订单信息</span>
    <span class="token keyword">return</span> orderInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>&lt;img src=&quot;SpringCloud笔记/image-20211027154731989.png&quot; alt=&quot;image-20211027154731989&quot; style=&quot;zoom:67%;&quot; /</p><p>④ 测试</p><img src="/assets/1635929466603-tm0DDdZ8.png" alt="63592946660" style="zoom:67%;"><h3 id="_2-3-服务提供者、服务消费者" tabindex="-1"><a class="header-anchor" href="#_2-3-服务提供者、服务消费者" aria-hidden="true">#</a> 2.3 服务提供者、服务消费者</h3><ul><li><strong>服务提供者</strong></li></ul><p>（提供接口给其他微服务）一次业务中被其他微服务调用的服务</p><ul><li><strong>服务消费者</strong></li></ul><p>（调用其他微服务的接口）一次业务中，调用其他微服务的服务</p><ul><li><strong>服务提供者和服务消费者是相对的：</strong></li></ul><p>服务的提供者可以成为服务的消费者，服务的消费者也可以成为服务的提供者</p><img src="/assets/1628577910849-uqHrxSuf.png" algin="left" style="zoom:67%;"><p>在上面案例中<code>itheima-order</code>调用了<code>itheima-user</code>提供的接口，所以<code>itheima-order</code>是服务消费者，<code>itheima-user</code>是服务提供者。</p><h2 id="_3-eureka注册中心" tabindex="-1"><a class="header-anchor" href="#_3-eureka注册中心" aria-hidden="true">#</a> 3. Eureka注册中心</h2><p><strong>微服务调用出现的问题</strong></p><ul><li>服务的消费者该如何获取服务提供者的信息？</li><li>如果有多个服务提供者，消费者该如何选择？</li><li>消费者如何得知服务提供者的健康状态？</li></ul><h3 id="_3-1-eureka的作用" tabindex="-1"><a class="header-anchor" href="#_3-1-eureka的作用" aria-hidden="true">#</a> 3.1 Eureka的作用</h3><p><strong>上述微服务调用出现的问题都能被Eureka解决，其作用有：</strong></p><blockquote><ol><li>服务注册：服务提供者启动后，将自己注册到Eureka注册中心，并指定自己提供的服务接口和地址等信息。</li><li>服务发现：服务消费者向Eureka注册中心查询所需的服务，Eureka注册中心返回可用的服务列表，消费者可以根据负载均衡策略选择其中的一个服务进行调用。</li><li>健康检查：Eureka会周期性地向服务提供者发送健康检查请求，检查服务是否正常运行，如果服务异常，则将其从可用服务列表中移除。</li><li>负载均衡：Eureka通过维护服务提供者的可用列表，可以提供基于客户端的负载均衡机制，通过选择性地调用可用服务，实现负载均衡。</li><li>高可用性：Eureka支持多节点部署，通过集群方式提供高可用性，确保即使某些节点出现故障，也不会影响服务注册和发现的正常运行。</li></ol></blockquote><img src="/assets/image-20230311180319358-XFlvk_SL.png" alt="image-20230311180319358" style="zoom:50%;"><h3 id="_3-2-eureka的工作原理" tabindex="-1"><a class="header-anchor" href="#_3-2-eureka的工作原理" aria-hidden="true">#</a> 3.2 Eureka的工作原理</h3><p><strong>1：消费者该如何获取服务提供者具体信息？</strong> 服务提供者启动时向eureka注册自己的信息 eureka保存这些信息 消费者根据服务名称向eureka拉取提供者信息</p><p><strong>2：如果有多个服务提供者，消费者该如何选择？</strong> 服务消费者利用负载均衡算法，从服务列表中挑选一个</p><p><strong>3：消费者如何感知服务提供者健康状态？</strong> 服务提供者会每隔30秒向EurekaServer发送心跳请求，报告健康状态 EurekaServer在90秒内没有接收到某个微服务节点的心跳,EurekaServer将会注销该微服务的节点 消费者就可以拉取到最新的信息</p><h3 id="_3-3-eureka注册中心实战" tabindex="-1"><a class="header-anchor" href="#_3-3-eureka注册中心实战" aria-hidden="true">#</a> 3.3 Eureka注册中心实战</h3><img src="/assets/image-20230311181203280-71tbcznE.png" alt="image-20230311181203280" style="zoom:67%;"><h4 id="_3-3-1-搭建eureka注册中心" tabindex="-1"><a class="header-anchor" href="#_3-3-1-搭建eureka注册中心" aria-hidden="true">#</a> 3.3.1 搭建Eureka注册中心</h4><p>搭建EurekaServer服务步骤如下：</p><p>① pom.xml引入依赖</p><p>创建项目<code>itheima-eurekaserver</code>，引入<code>spring-cloud-starter-netflix-eureka-server</code>的依赖:</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--EurekaServer包--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 启动类</p><p>创建启动类com.itheima.EurekaServerApp，代码如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaServer</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaServerApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EurekaServerApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>③ application.yml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>    <span class="token comment">#端口号</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> eureka<span class="token punctuation">-</span>server <span class="token comment"># 应用名称，会在Eureka中作为服务的id标识（serviceId）</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>   <span class="token comment">#是否将自己注册到Eureka中</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>   <span class="token comment">#是否从eureka中获取服务信息</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/eureka
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时我们访问EurekaServer地址<code>http://localhost:8001/</code>，效果如下：</p><img src="/assets/1628582303367-0YTH0EVo.png" align="left"><h4 id="_3-3-2-服务提供者注册" tabindex="-1"><a class="header-anchor" href="#_3-3-2-服务提供者注册" aria-hidden="true">#</a> 3.3.2 服务提供者注册</h4><p>将itheima-user服务注册到EurekaServer步骤如下：</p><p>① pom.xml</p><p>在<code>itheima-user</code>添加如下依赖：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--EurekaClient包--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 修改application.yml</p><p>修改<code>itheima-user</code>的<code>application.yml</code>，添加如下配置：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token punctuation">...</span>
【注意缩进】【注意缩进】【注意缩进】
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment"># EurekaServer的地址</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
  	<span class="token comment">#以IP地址注册到服务中心</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">#服务向eureka注册时，注册名默认：“IP名:应用名:应用端口名”</span>
    <span class="token comment">#现在配置：注册名：应用名:端口:项目版本号</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span><span class="token punctuation">:</span>@project.version@
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>prefer-ip-address:true 效果图</p><figure><img src="/assets/1636690773904-4Bf6t5VZ.png" alt="63669077390" tabindex="0" loading="lazy"><figcaption>63669077390</figcaption></figure><p>prefer-ip-address:flase 效果图</p><figure><img src="/assets/1636690910445-zo-D5pSE.png" alt="63669091044" tabindex="0" loading="lazy"><figcaption>63669091044</figcaption></figure><p>③ 多实例启动</p><figure><img src="/assets/1635929398644-PuZNe-WK.png" alt="63592939864" tabindex="0" loading="lazy"><figcaption>63592939864</figcaption></figure><img src="/assets/11111-wrOCjans.png" align="left"><p>分别启动3个服务配置后，Eureka(http://localhost:8001/)信息如下：</p><figure><img src="/assets/1628586175690-vWoiHqBf.png" alt="1628586175690" tabindex="0" loading="lazy"><figcaption>1628586175690</figcaption></figure><h4 id="_3-3-3-服务消费者注册" tabindex="-1"><a class="header-anchor" href="#_3-3-3-服务消费者注册" aria-hidden="true">#</a> 3.3.3 服务消费者注册</h4><p><code>itheima-order</code>虽然是消费者，但与<code>itheima-user</code>一样都是<code>eureka</code>的<code>client</code>端，同样可以实现服务注册： 在<code>itheima-order</code>项目引入<code>spring-cloud-starter-netflix-eureka-client</code>的依赖</p><p>① pom.xml</p><p>在<code>itheima-order</code>的<code>pom.xml</code>中引入如下依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--EurekaClient包--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 修改application.yml</p><p>修改<code>itheima-order</code>的<code>application.yml</code>，添加如下配置：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token punctuation">...</span>
【注意缩进】【注意缩进】【注意缩进】
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment"># EurekaServer的地址</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span><span class="token punctuation">:</span>@project.version@
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-4-远程调用" tabindex="-1"><a class="header-anchor" href="#_3-3-4-远程调用" aria-hidden="true">#</a> 3.3.4 远程调用</h4><p>在<code>itheima-order</code>完成服务拉取实现远程调用，服务拉取是基于服务名称获取服务列表，然后在对服务列表做负载均衡。</p><p>修改<code>itheima-order</code>的OrderServiceImpl的代码，修改访问的url路径，用服务名代替ip、端口，代码如下：</p><p>在itheima-order项目的启动类OrderApplication中的RestTemplate添加负载均衡注解：</p><img src="/assets/image-20211027154103215-GjxAwRaA.png" alt="image-20211027154103215" style="zoom:67%;"><p>在itheima-order工程启动类OrderApp中，开启负载均衡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/***
 * 注册RestTemplate
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@LoadBalanced</span><span class="token comment">//开启负载均衡</span>
<span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们访问<code>http://localhost:18082/order/101</code>测试效果如下：</p><img src="/assets/image-20211027153816471-ke0TtmIq.png" align="left" alt="image-20211027153816471" style="zoom:70%;"><h4 id="_3-3-5-eureka配置说明" tabindex="-1"><a class="header-anchor" href="#_3-3-5-eureka配置说明" aria-hidden="true">#</a> 3.3.5 Eureka配置说明</h4><p>服务注册时默认使用的是主机名，如果我们想用ip进行注册，可以在客户端(提供者与消费者)中的application.yml添加配置：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment"># EurekaServer的地址</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8001/eureka
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>server.port<span class="token punctuation">}</span><span class="token punctuation">:</span>@project.version@
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">30</span> <span class="token comment">#心跳周期，默认是30秒</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">90</span> <span class="token comment">#心跳失败最长超时间，默认90秒</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>itheima-eurekaserver 服务端，可以关闭保护机制</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token punctuation">...</span>
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable-self-preservation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># false关闭保护机制。 15分钟内，如果心跳成功率&lt;85%，则启动保护（服务提供者列表不再变化）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-6-总结" tabindex="-1"><a class="header-anchor" href="#_3-3-6-总结" aria-hidden="true">#</a> 3.3.6 总结</h4><ul><li><p>搭建EurekaServer</p><ul><li>引入eureka-server依赖</li><li>启动类上添加@EnableEurekaServer注解</li><li>在application.yml中配置eureka地址</li></ul></li><li><p>服务注册</p><ul><li>引入eureka-client依赖</li><li>在application.yml中配置eureka地址</li></ul></li><li><p>服务发现</p><ul><li>引入eureka-client依赖</li><li>在application.yml中配置eureka地址</li><li>给RestTemplate添加@LoadBalanced注解</li><li>用服务提供者的服务名称远程调用(由原来的ip:port改服务名(spring.application.name))</li></ul></li></ul><h2 id="_4-负载均衡ribbon" tabindex="-1"><a class="header-anchor" href="#_4-负载均衡ribbon" aria-hidden="true">#</a> 4 负载均衡Ribbon</h2><p>章节知识点</p><ul><li>Ribbon是什么</li><li>负载均衡流程讲解</li><li>负载均衡算法学习</li><li>Ribbon负载均衡使用</li></ul><p>Ribbon是什么？</p><p>Ribbon是Netflix发布的负载均衡器，有助于控制HTTP客户端行为。为Ribbon配置服务提供者地址列表后，Ribbon就可基于负载均衡算法，自动帮助服务消费者请求。</p><p>概念：Ribbon是基于Http协议请求的客户端负载均衡器，能实现很丰富的负载均衡算法。</p><h3 id="_4-1-负载均衡原理" tabindex="-1"><a class="header-anchor" href="#_4-1-负载均衡原理" aria-hidden="true">#</a> 4.1 负载均衡原理</h3><ol><li>用户发起请求，会先到达itheima-order服务</li><li>itheima-order服务通过Ribbon负载均衡器从eurekaserver中获取服务列表</li><li>获取了服务列表后，轮询（负载均衡算法）调用</li></ol><h3 id="_4-2-负载均衡策略" tabindex="-1"><a class="header-anchor" href="#_4-2-负载均衡策略" aria-hidden="true">#</a> 4.2 负载均衡策略</h3><figure><img src="/assets/1628599691173-r6KCg7Zd.png" alt="1628599691173" tabindex="0" loading="lazy"><figcaption>1628599691173</figcaption></figure><p>轮询调用会涉及到很多负载均衡算法，负载均衡算法比较多，关系图如下：</p><figure><img src="/assets/1628599720713-Zn72qeAO.png" alt="1628599720713" tabindex="0" loading="lazy"><figcaption>1628599720713</figcaption></figure><p>Ribbon的负载均衡算法策略如下表：</p><table><thead><tr><th><strong>内置负载均衡规则类</strong></th><th><strong>规则描述</strong></th></tr></thead><tbody><tr><td>RoundRobinRule</td><td><strong>简单轮询</strong>服务列表来选择服务器。</td></tr><tr><td>AvailabilityFilteringRule</td><td>对以下两种服务器进行忽略： <br>（1）在默认情况下，这台服务器如果3次连接失败，这台服务器就会被设置为“短路”状态。短路状态将持续30秒，如果再次连接失败，短路的持续时间就会几何级地增加。<br>（2）并发数过高的服务器。如果一个服务器的并发连接数过高，配置了AvailabilityFilteringRule规则的客户端也会将其忽略。并发连接数的上限，可以由客户端的<code>&lt;clientName&gt;.&lt;clientConfigNameSpace&gt;.ActiveConnectionsLimit</code>属性进行配置。</td></tr><tr><td>WeightedResponseTimeRule</td><td>为每一个服务器赋予一个权重值。服务器响应时间越长，这个服务器的权重就越小。这个规则会随机选择服务器，这个权重值会影响服务器的选择。</td></tr><tr><td>ZoneAvoidanceRule【默认】</td><td>以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，这个Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。它是Ribbon默认的负载均衡规则。</td></tr><tr><td>BestAvailableRule</td><td>忽略哪些短路的服务器，并选择并发数较低的服务器。</td></tr><tr><td>RandomRule</td><td>随机选择一个可用的服务器。</td></tr><tr><td>RetryRule</td><td>重试机制的选择逻辑</td></tr></tbody></table><h3 id="_4-3-饥饿加载" tabindex="-1"><a class="header-anchor" href="#_4-3-饥饿加载" aria-hidden="true">#</a> 4.3 饥饿加载</h3><p>从懒加载 变为 饥饿加载</p><p>Ribbon默认是采用懒加载，即第一次访问时才会去创建LoadBalanceClient，请求时间会很长。 而饥饿加载则会在项目启动时创建，降低第一次访问的耗时，在<code>itheima-order</code>的核心配置文件中，添加如下配置开启饥饿加载：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment">#注意配置到根节点</span>

<span class="token comment">#饥饿加载</span>
<span class="token key atrule">ribbon</span><span class="token punctuation">:</span>
  <span class="token key atrule">eager-load</span><span class="token punctuation">:</span>
    <span class="token key atrule">clients</span><span class="token punctuation">:</span> itheima<span class="token punctuation">-</span>user <span class="token comment">#开启饥饿加载 </span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#指定对user这个服务饥饿加载</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-总结" tabindex="-1"><a class="header-anchor" href="#_4-4-总结" aria-hidden="true">#</a> 4.4. 总结</h3><ul><li><p>Ribbon负载均衡规则</p><ul><li>规则接口是IRule</li><li>默认实现是ZoneAvoidanceRule，根据zone选择服务列表，然后轮询</li></ul></li><li><p>负载均衡自定义方式</p><ul><li>代码方式：配置灵活，但修改时需要重新打包发布，全局配置</li><li>配置文件方式：直观，方便，无需重新打包发布，但是无法做全局配置，指定某个提供者的负载均衡策略【推荐】</li></ul></li><li><p>饥饿加载, 拉取服务提供者的方式</p><ul><li>开启饥饿加载</li><li>指定饥饿加载的微服务名称</li></ul></li></ul><h2 id="_5-http客户端feign" tabindex="-1"><a class="header-anchor" href="#_5-http客户端feign" aria-hidden="true">#</a> 5 http客户端Feign</h2><p>章节知识点</p><ul><li>Feign介绍</li><li>Feign入门案例学习</li><li>Feign日志功能、性能优化、最佳实践讲解</li></ul><h3 id="_5-1-feign介绍" tabindex="-1"><a class="header-anchor" href="#_5-1-feign介绍" aria-hidden="true">#</a> 5.1 Feign介绍</h3><p>先来看我们以前利用RestTemplate发起远程调用的代码：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">User</span> user <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://itheima-user/user/&quot;</span><span class="token operator">+</span>orderInfo<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>存在下面的问题：</p><ul><li>代码可读性差，编程体验不统一</li><li>参数复杂URL难以维护</li></ul><p>上面RestTemplate存在的问题可以使用Feign解决，那么什么是Feign？</p><p>Feign是一个声明式的http客户端，官方地址：https://github.com/OpenFeign/feign 其作用就是帮助我们优雅的实现http请求的发送，解决上面提到的问题。</p><figure><img src="/assets/1628603540688-OkDcn6w3.png" alt="1628603540688" tabindex="0" loading="lazy"><figcaption>1628603540688</figcaption></figure><h3 id="_5-2-feign入门案例" tabindex="-1"><a class="header-anchor" href="#_5-2-feign入门案例" aria-hidden="true">#</a> 5.2 Feign入门案例</h3><p>定义和使用Feign客户端的步骤如下：</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">1</span><span class="token punctuation">:</span><span class="token value attr-value">引入依赖包 spring-cloud-starter-openfeign</span>
<span class="token key attr-name">2</span><span class="token punctuation">:</span><span class="token value attr-value">添加注解@EnableFeignClients开启Feign功能</span>
<span class="token key attr-name">3</span><span class="token punctuation">:</span><span class="token value attr-value">消费者端定义远程调用接口，在接口中远程调用的【服务名字】、【方法签名】</span>
<span class="token key attr-name">4</span><span class="token punctuation">:</span><span class="token value attr-value">消费者端注入接口，执行远程调用(接口)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>① 引入依赖</p><p>在<code>itheima-order</code>中引入如下依赖：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--openfeign--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 开启Feign功能</p><p>在<code>itheima-order</code>的启动类<code>OrderApplication</code>添加<code>@EnableFeignClients</code>注解开启Feign功能，代码如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//...其他略</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>③ 定义远程调用接口</p><p>在<code>itheima-order</code>中创建接口<code>UserClient</code>，代码如下：</p><figure><img src="/assets/1636707016650-nDq6WzVx.png" alt="63670701665" tabindex="0" loading="lazy"><figcaption>63670701665</figcaption></figure><p>上图代码如下：在itheima-order工程中添加</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>client</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>user<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * order调用user服务(代替了 String url = &quot;http://itheima-user/user/&quot; + orderInfo.getUserId();)
 * 1.接口上使用@FeignClient(value=&quot;被调用服务名&quot;)
 * 2.定义被调用接口中的方法（基于被调用的controller编写）
 *  2.1 requestMapping中的路径必须是全路径(controller类上的+方法上的)
 *  2.2 使用PathVariable注解，必须取别名
 */</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;itheima-user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserClient</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 调用用户微服中controller的方法
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>主要是基于SpringMVC的注解来声明远程调用的信息，比如：</p><ul><li>服务名称：user</li><li>请求方式：GET</li><li username="">请求路径：/user/</li><li>请求参数：String username</li><li>返回值类型：User</li></ul><p>④ 远程调用</p><p>修改<code>itheima-order</code>的<code>OrderServiceImpl.one()</code>方法，执行远程调用，代码如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">UserClient</span> userClient<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 根据ID查询订单信息
 */</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">OrderInfo</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//1.查询订单</span>
    <span class="token class-name">OrderInfo</span> orderInfo <span class="token operator">=</span> orderDao<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.根据订单查询用户信息-&gt;需要调用  【item-user】  服务</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userClient<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span>orderInfo<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3.封装user</span>
    orderInfo<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4.返回订单信息</span>
    <span class="token keyword">return</span> orderInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-feign其他功能" tabindex="-1"><a class="header-anchor" href="#_5-3-feign其他功能" aria-hidden="true">#</a> 5.3 Feign其他功能</h3><p>Feign运行自定义配置来覆盖默认配置，可以修改的配置如下：</p><table><thead><tr><th>类型</th><th>作用</th><th>说明</th></tr></thead><tbody><tr><td><strong>feign.Logger.Level</strong></td><td>修改日志级别</td><td>包含四种不同的级别：NONE、BASIC、HEADERS、FULL</td></tr><tr><td>feign.codec.Decoder</td><td>响应结果的解析器</td><td>http远程调用的结果做解析，例如解析json字符串为java对象</td></tr><tr><td>feign.codec.Encoder</td><td>请求参数编码</td><td>将请求参数编码，便于通过http请求发送</td></tr><tr><td>feign. Contract</td><td>支持的注解格式</td><td>默认是SpringMVC的注解</td></tr><tr><td>feign. Retryer</td><td>失败重试机制</td><td>请求失败的重试机制，默认是没有，不过会使用Ribbon的重试</td></tr></tbody></table><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">NONE</span><span class="token punctuation">:</span><span class="token value attr-value">默认的，不显示任何日志</span>
<span class="token key attr-name">BASIC</span><span class="token punctuation">:</span><span class="token value attr-value">仅记录请求方法、URL、响应状态码以及执行时间</span>
<span class="token key attr-name">HEADERS</span><span class="token punctuation">:</span><span class="token value attr-value">除了BASIC中定义的信息以外，还有请求和响应的头信息</span>
<span class="token key attr-name">FULL</span><span class="token punctuation">:</span><span class="token value attr-value">除了HEADERS中定义的信息之外，还有请求和响应的正文及元数据</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot日志配置;</p><h4 id="_5-3-1-feign日志配置" tabindex="-1"><a class="header-anchor" href="#_5-3-1-feign日志配置" aria-hidden="true">#</a> 5.3.1 Feign日志配置</h4><p>要想让Feign日志生效，得结合着SpringBoot的日志配置一起使用</p><p>SpringBoot日志配置</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span>
    <span class="token comment"># 输出到控制台</span>
    <span class="token key atrule">console</span><span class="token punctuation">:</span> &#39;%d<span class="token punctuation">{</span>HH<span class="token punctuation">:</span>mm<span class="token punctuation">:</span>ss<span class="token punctuation">}</span> %<span class="token punctuation">-</span>5level %msg <span class="token punctuation">[</span>%thread<span class="token punctuation">]</span> <span class="token punctuation">-</span> %logger<span class="token punctuation">{</span><span class="token number">15</span><span class="token punctuation">}</span>%n\&#39;
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">root</span><span class="token punctuation">:</span> info <span class="token comment"># 全局用info</span>
    <span class="token comment"># 只有在com.itheima包下才输出debug信息</span>
    <span class="token key atrule">com</span><span class="token punctuation">:</span>
      <span class="token key atrule">itheima</span><span class="token punctuation">:</span> debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置Feign日志有两种方式：</p><ul><li><p>配置文件方式</p><ul><li><p>全局生效</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token comment">#这里用default就是全局配置，如果是写服务名称，则是针对某个微服务的配置</span>
        <span class="token key atrule">loggerLevel</span><span class="token punctuation">:</span> HEADERS <span class="token comment">#日志级别</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>局部生效</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">itheima-user</span><span class="token punctuation">:</span> <span class="token comment">#指定服务</span>
        <span class="token key atrule">loggerLevel</span><span class="token punctuation">:</span> HEADERS <span class="token comment">#日志级别</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>代码方式</p><ul><li><p>注册日志级别</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 注册日志级别
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Logger<span class="token punctuation">.</span>Level</span> <span class="token function">feignLogLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Logger<span class="token punctuation">.</span>Level</span><span class="token punctuation">.</span><span class="token constant">FULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>全局生效</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">#如果是全局配置，则把它放到@EnableFeignClients这个注解中</span>
<span class="token key attr-name">@EnableFeignClients(defaultConfiguration</span> <span class="token punctuation">=</span> <span class="token value attr-value">FeignClientConfiguration.class)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>局部生效</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">#如果是局部配置，则把它放到@FeignClient这个注解中</span>
<span class="token key attr-name">@FeignClient(value</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;itheima-user&quot;,configuration = FeignClientConfiguration.class)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h4 id="_5-3-2-feign性能优化" tabindex="-1"><a class="header-anchor" href="#_5-3-2-feign性能优化" aria-hidden="true">#</a> 5.3.2 Feign性能优化</h4><p>Feign底层的客户端实现：</p><ul><li>URLConnection：默认实现，不支持连接池</li><li>Apache HttpClient ：支持连接池</li><li>OKHttp：支持连接池</li></ul><p>因此优化Feign的性能主要包括：</p><ul><li>使用连接池代替默认的URLConnection</li><li>日志级别，最好用basic或none</li></ul><p>Feign切换Apache HttpClient步骤如下：</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">1</span><span class="token punctuation">:</span><span class="token value attr-value">引入依赖</span>
<span class="token key attr-name">2</span><span class="token punctuation">:</span><span class="token value attr-value">配置连接池</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>1)引入依赖</p><p>在<code>itheima-order</code>中引入如下依赖：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--httpClient依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>feign-httpclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2)配置连接池</p><p>在<code>itheima-order</code>的核心配置文件<code>application.yml</code>中添加如下配置：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token comment">#这里用default就是全局配置，如果是写服务名称，则是针对某个微服务的配置</span>
        <span class="token key atrule">loggerLevel</span><span class="token punctuation">:</span> BASIC <span class="token comment">#日志级别</span>
      <span class="token key atrule">itheima-user</span><span class="token punctuation">:</span> <span class="token comment">#指定服务</span>
        <span class="token key atrule">loggerLevel</span><span class="token punctuation">:</span> BASIC <span class="token comment">#日志级别</span>
  <span class="token key atrule">httpclient</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#开启feign对HttpClient的支持</span>
    <span class="token key atrule">max-connections</span><span class="token punctuation">:</span> <span class="token number">200</span> <span class="token comment">#最大的连接数</span>
    <span class="token key atrule">max-connections-per-route</span><span class="token punctuation">:</span> <span class="token number">50</span> <span class="token comment">#每个路径的最大连接数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-3-3-feign最佳实现" tabindex="-1"><a class="header-anchor" href="#_5-3-3-feign最佳实现" aria-hidden="true">#</a> 5.3.3 Feign最佳实现</h4><p>方式一（继承）：给消费者的FeignClient和提供者的controller定义统一的父接口作为标准。</p><ul><li>服务紧耦合</li><li>父接口参数列表中的映射不会被继承</li></ul><figure><img src="/assets/1636819395042-J5opZLaO.png" alt="63681939504" tabindex="0" loading="lazy"><figcaption>63681939504</figcaption></figure><p>方式二（抽取）：将FeignClient抽取为独立模块，并且把接口有关的POJO、默认的Feign配置都放到这个模块中，提供给所有消费者使用</p><figure><img src="/assets/1628608818706-9mzbwyuu.png" alt="1628608818706" tabindex="0" loading="lazy"><figcaption>1628608818706</figcaption></figure><p>Feign最佳实现流程如上图所示：</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>实现最佳实践方式二的步骤如下：
<span class="token key attr-name">1</span><span class="token punctuation">:</span><span class="token value attr-value">创建itheima-api，然后引入feign的starter依赖 itheima-pojo依赖</span>
<span class="token key attr-name">2</span><span class="token punctuation">:</span><span class="token value attr-value">将itheima-order中编写的UserClient继承到itheima-api项目中</span>
<span class="token key attr-name">3</span><span class="token punctuation">:</span><span class="token value attr-value">在itheima-order中引入itheima-api的依赖，controller实现itheima-api中的接口</span>
<span class="token key attr-name">4</span><span class="token punctuation">:</span><span class="token value attr-value">重启测试</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1)引入依赖</p><p>创建itheima-api，然后引入feign的starter依赖 itheima-user依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!--openfeign--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

     <span class="token comment">&lt;!--httpClient依赖--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>feign-httpclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>itheima-pojo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2)编写的UserClient</p><p>将itheima-order中编写的UserClient复制到itheima-api项目中</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>client</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>user<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * order调用user服务(代替了 String url = &quot;http://itheima-user/user/&quot; + orderInfo.getUserId();)
 * 1.接口上使用@FeignClient(value=&quot;被调用服务名&quot;)
 * 2.定义被调用接口中的方法（基于被调用的controller编写）
 *  2.1 requestMapping中的路径必须是全路径(controller类上的+方法上的)
 *  2.2 使用PathVariable注解，必须取别名
 */</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;itheima-user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserClient</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 调用用户微服中controller的方法
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3)在itheima-order中引入itheima-api的依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--引入feign-api--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>itheima-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>【注意】当定义的FeignClient不在SpringBootApplication的<strong>扫描包范围</strong>时，这些FeignClient无法使用。</li></ol><p>有两种方式解决： 方式一：指定FeignClient所在包</p><p><code>@EnableFeignClients(basePackages = &quot;com.itheima.user.feign&quot;)</code></p><p>方式二：指定FeignClient字节码</p><p><code>@EnableFeignClients(clients = {UserClient.class})</code></p><h4 id="_5-3-4-总结" tabindex="-1"><a class="header-anchor" href="#_5-3-4-总结" aria-hidden="true">#</a> 5.3.4. 总结</h4><ul><li><p>Feign的使用步骤</p><ul><li>引入依赖</li><li>启动类添加@EnableFeignClients注解，如果feignclient接口不在启动类包下，则需要添加扫包(basePackages )</li><li>编写FeignClient接口</li><li>使用FeignClient中定义的方法代替RestTemplate</li></ul></li><li><p>Feign的日志配置:</p><ul><li>方式一是配置文件，feign.client.config.xxx.loggerLevel</li><li>如果xxx是default则代表全局</li><li>如果xxx是服务名称，例如userservice则代表某服务</li></ul></li><li><p>方式二是java代码配置Logger.Level这个Bean</p><ul><li>如果在@EnableFeignClients注解声明则代表全局</li><li>如果在@FeignClient注解中声明则代表某服务</li></ul></li><li><p>Feign的优化</p><ul><li>日志级别尽量用basic</li><li>使用HttpClient或OKHttp代替URLConnection <ul><li>引入feign-httpClient依赖</li><li>配置文件开启httpClient功能，设置连接池参数</li></ul></li></ul></li><li><p>Feign的最佳实践：</p><ul><li>让controller和FeignClient继承同一接口</li><li>将FeignClient、POJO、Feign的默认配置都定义到一个项目中，供所有消费者使用</li></ul></li></ul><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h1><ol><li><p>微服务，为什么使用微服务。为了更高的并发。</p><ul><li>单体</li><li>分布式</li><li>微服务 属于分布式</li></ul></li><li><p>远程调用案例</p><ul><li>订单服务</li><li>用户服务</li><li>怎么调用? 用RestTemplate(??? 发请求的postman)</li><li>问题： 服务单点问题（订单只能依赖于用户，localhost:18081/user/1)</li></ul></li><li><p>Eureka 注册中心(房产中介、美团、饿了么), 解决服务单点问题</p><ul><li>是个什么 注册中心。 提供者、消费者</li><li>有什么作用 解决服务单点问题</li><li>使用: 平台。 <ul><li>启动： 依赖、启动类、配置文件</li><li>提供者: 注册</li><li>消费者: 注册</li><li>远程调用: 获取提供者列表、通过负载均衡的方式来调用。 使用localhost:18081改为itheima-user，开启负载均衡(restTemplate @LoadBalanced)</li></ul></li></ul></li><li><p>ribbon 做负载均衡</p><ul><li>使用：IRule， 默认使用ZoneAvoidanceRule</li><li>配置： <ul><li>全局 配置类</li><li>局部 配置文件 指定服务提供都负载均衡方式</li></ul></li><li>饥饿加载, 配置</li></ul></li><li><p>OpenFeign</p><ul><li><p>是什么？ 代替restTemplate</p></li><li><p>使用?</p><ul><li><p>导入依赖，启动类开启注解，消费者创建接口(方法：服务提供者controller的方法, 全路径)，使用的注入</p></li><li><p>@FeignClient(name=服务提供者名称)</p></li><li><p>优化：使用httpclient配置连接池（线程隔离）</p></li><li><p>日志：BASIC</p></li></ul></li><li><p>最佳实现</p><ul><li>抽取Feign的接口独立为工程。其它服务想调用时，引入依赖</li></ul></li></ul></li></ol><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题" aria-hidden="true">#</a> 问题</h2><h4 id="_1-springcloud是什么-1" tabindex="-1"><a class="header-anchor" href="#_1-springcloud是什么-1" aria-hidden="true">#</a> 1. SpringCloud是什么?</h4><p>Spring Cloud是一套基于Spring Boot的分布式系统开发工具集，它提供了一系列组件和框架，用于快速构建分布式系统应用程序。Spring Cloud可以帮助开发者解决分布式系统中的一些常见问题，如服务注册与发现、负载均衡、配置管理、服务熔断、路由、分布式跟踪等。</p><p>Spring Cloud提供了以下核心组件：</p><ol><li>Eureka：服务注册和发现组件，用于实现分布式系统中服务的自动注册和发现。</li><li>Ribbon：客户端负载均衡组件，用于实现客户端负载均衡，提高系统的可用性和稳定性。</li><li>Hystrix：服务熔断和容错组件，用于实现服务的自动熔断和容错，提高系统的可靠性。</li><li>Zuul：API网关组件，用于实现请求的路由和过滤，提高系统的安全性和可维护性。</li><li>Config：配置管理组件，用于实现分布式系统中的配置管理，支持配置中心和分布式配置等模式。</li><li>Sleuth：分布式跟踪组件，用于实现分布式系统的跟踪和监控，帮助开发者定位问题和优化系统性能。</li></ol><p>Spring Cloud的优点包括：</p><ol><li>降低分布式系统的复杂度：Spring Cloud提供了一系列组件和框架，使得分布式系统的开发更加简单和高效。</li><li>提高系统的可用性和稳定性：Spring Cloud提供了服务注册和发现、客户端负载均衡、服务熔断和容错等机制，可以提高系统的可用性和稳定性。</li><li>提高系统的安全性和可维护性：Spring Cloud提供了API网关、配置管理和分布式跟踪等组件，可以提高系统的安全性和可维护性。</li><li>兼容Spring Boot：Spring Cloud基于Spring Boot开发，可以无缝集成Spring Boot的各种特性，如自动配置、启动器等。</li></ol><p>总之，Spring Cloud是一个优秀的分布式系统开发工具集，可以帮助开发者更加轻松地构建高可用、高可靠、高性能的分布式系统应用程序。</p><h4 id="_2-resttemplate如何实现远程调用" tabindex="-1"><a class="header-anchor" href="#_2-resttemplate如何实现远程调用" aria-hidden="true">#</a> 2. RestTemplate如何实现远程调用？</h4><ol><li><strong>创建RestTemplate对象</strong>：使用RestTemplate进行远程调用前，需要先创建RestTemplate对象，可以通过new关键字创建，也可以使用Spring容器进行注入。</li><li><strong>发送HTTP请求</strong>：通过RestTemplate对象发送HTTP请求，可以使用RestTemplate提供的getForObject()、postForObject()、put()、delete()等方法，选择合适的方法根据业务需求进行远程调用。</li><li><strong>处理HTTP响应</strong>：RestTemplate发送HTTP请求后，会返回一个HTTP响应对象，我们可以通过RestTemplate提供的一系列方法获取响应状态码、响应头、响应体等信息。如果服务端返回的是JSON或XML格式的数据，可以通过RestTemplate自动将响应数据转换成Java对象，简化开发</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 创建RestTemplate对象</span>
<span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送HTTP请求，并获取响应数据</span>
<span class="token class-name">String</span> response <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://example.com/api/users/1&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将响应数据转换成Java对象</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://example.com/api/users/1&quot;</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-微服务的拆分粒度-一般从哪个方面考虑" tabindex="-1"><a class="header-anchor" href="#_3-微服务的拆分粒度-一般从哪个方面考虑" aria-hidden="true">#</a> 3. 微服务的拆分粒度，一般从哪个方面考虑？</h4><p>微服务拆分的粒度应该根据具体业务场景来进行设计，没有一种标准的方法可以适用于所有场景。通常，微服务应该遵循单一职责原则（SRP），即每个微服务应该只负责一个特定的业务功能，而且这个功能应该足够小，不应该包含太多的业务逻辑。</p><ol><li>业务功能：将系统中的不同业务功能划分为不同的微服务，每个微服务只负责一个特定的业务功能。</li><li>数据库：将不同的数据库或数据表拆分为不同的微服务，每个微服务只访问它所对应的数据库或数据表。</li><li>用户角色：将系统中不同的用户角色或者权限划分为不同的微服务，每个微服务只对应一种用户角色或者权限。</li><li>流程或者任务：将系统中的不同流程或任务划分为不同的微服务，每个微服务只负责一个特定的流程或任务。</li></ol><h4 id="_4-订单微服务调用用户微服务的底层实现流程" tabindex="-1"><a class="header-anchor" href="#_4-订单微服务调用用户微服务的底层实现流程" aria-hidden="true">#</a> 4. 订单微服务调用用户微服务的底层实现流程？</h4><ol><li>页面发起请求进入订单微服务，订单微服发起http请求 http://itheima-user/user/用户id</li><li>请求会被LoadBalancerInterceptor负载均衡拦截器拦截</li><li>通过RibbonLoadBanlanceClient获取服务名itheima-user</li><li>通过DynamicServerListLoadBalnancer根据服务名itheima-user连接eureka-server注册微服务，获取到服务地址列表：192.168.200.1:28081, 192.168.200.1:18081, 192.168.200.1:38081</li><li>根据Ribbon负载均衡策略（ZoneAvoidanceRule 默认轮询策略）选择一个服务地址，得到一个http地址192.168.200.1:38081</li><li>通过RibbonLoadBanlancerClient发送http请求，调用JDK自带URLConnection(最底层对象)实现请求发送</li><li>订单微服务得到用户微服务响应的数据，并响应页面</li></ol><h4 id="_5-ribbon默认负载均衡策略是什么" tabindex="-1"><a class="header-anchor" href="#_5-ribbon默认负载均衡策略是什么" aria-hidden="true">#</a> 5. Ribbon默认负载均衡策略是什么？</h4><p>ZoneAvoidanceRule【默认】<br> 以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，这个Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。它是Ribbon默认的负载均衡规则。</p><h4 id="_6-如何改变默认的负载均衡策略" tabindex="-1"><a class="header-anchor" href="#_6-如何改变默认的负载均衡策略" aria-hidden="true">#</a> 6. 如何改变默认的负载均衡策略？</h4><ul><li><p>在启动类中通过@Bean注册RandomRule （全局配置，针对所有被调用微服务）</p></li><li><p>修改application.yml 文件中配置负载均衡的配置 （针对某个被调用微服务）</p></li></ul><h4 id="_7-feign如何使用" tabindex="-1"><a class="header-anchor" href="#_7-feign如何使用" aria-hidden="true">#</a> 7. Feign如何使用？</h4><ol><li>引入Feign依赖</li><li>在启动类加上@EnableFeignClients 注解 开启Feign组件</li><li>创建<code>FeignClient</code>接口</li><li>使用<code>FeignClient</code>中的定义方法代替RestTemplate</li></ol><h4 id="_8-feign日志如何使用" tabindex="-1"><a class="header-anchor" href="#_8-feign日志如何使用" aria-hidden="true">#</a> 8. Feign日志如何使用？</h4><ol><li><p>在application.yml中配置SpringBoot日志</p></li><li><p>Feign日志使用两种方式</p></li></ol><p>配置文件方式：在application.yml中配置Feign日志（全局配置、局部配置）</p><p>java代码方式：定义一个类，通过@Bean注册Logger日志对象并指定日志级别（全局配置@EnableFeignClients、局部配置@FeignClient）</p><p>注意：开发环境使用FULL 生产环境使用BASIC</p><h4 id="_9-httpclient连接池有什么用-如何使用" tabindex="-1"><a class="header-anchor" href="#_9-httpclient连接池有什么用-如何使用" aria-hidden="true">#</a> 9. HttpClient连接池有什么用，如何使用？</h4><p>HttpClient连接池是用于管理HTTP请求的连接池。在发送HTTP请求时，每次都创建一个新的连接会消耗大量的系统资源，并且在高并发的情况下，创建连接的时间可能会成为瓶颈，导致系统性能下降。使用连接池可以缓存已经创建的连接，避免重复创建连接和销毁连接，提高系统性能。</p><p><strong>使用方法</strong></p><ol><li>引入依赖 httpClient的依赖</li><li>配置文件开启httpClient功能，设置连接池的参数</li></ol></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 1066643487@qq.com">fanfan</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a aria-label="SpringCloud（二）" class="vp-link nav-link next nav-link next" href="/spring/SpringCloud/SpringCloud_02.html"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">SpringCloud（二）<img class="icon" src="/img/spring.svg" no-view style=""></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">昵称</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">邮箱</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">网址</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="请留言。(填写邮箱可在被回复时收到邮件提醒)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>预览:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="表情" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="表情包"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="上传图片"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="预览"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if-->  字</div><button type="button" class="wl-btn">登录</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->提交<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="搜索表情包"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> 评论</div><ul class="wl-sort"><!--[--><li class="active">按正序</li><li class="">按倒序</li><li class="">按热度</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.8</div></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">备案号：<a href="https://beian.miit.gov.cn"><img class="icp-icon"><span>宁ICP备2023001647号</span></a></div><div class="vp-copyright">Copyright © 2024 fanfan</div></footer></div><!--]--><!----><!----><!----><!----><img src="/img/off.svg" alt="Off"><!----><!--]--></div>
    <script type="module" src="/assets/app-PkLUv2Vk.js" defer></script>
  </body>
</html>
