<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.0" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://www.fanliu.top/nginx/nginx_01.html"><meta property="og:site_name" content="FanFanã®å­¦ä¹ ç¬”è®°"><meta property="og:title" content="01_Nginx - ä»å…¥é—¨åˆ°å®è·µ"><meta property="og:description" content="image-20220724221108300 1. Nginx ä»‹ç» Nginx æ˜¯å¼€æºã€é«˜æ€§èƒ½ã€é«˜å¯é çš„ Web å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œè€Œä¸”æ”¯æŒçƒ­éƒ¨ç½²ï¼Œå‡ ä¹å¯ä»¥åšåˆ° 7 * 24 å°æ—¶ä¸é—´æ–­è¿è¡Œï¼Œå³ä½¿è¿è¡Œå‡ ä¸ªæœˆä¹Ÿä¸éœ€è¦é‡æ–°å¯åŠ¨ï¼Œè¿˜èƒ½åœ¨ä¸é—´æ–­æœåŠ¡çš„æƒ…å†µä¸‹å¯¹è½¯ä»¶ç‰ˆæœ¬è¿›è¡Œçƒ­æ›´æ–°ã€‚æ€§èƒ½æ˜¯ Nginx æœ€é‡è¦çš„è€ƒé‡ï¼Œå…¶å ç”¨å†…å­˜å°‘ã€å¹¶å‘èƒ½åŠ›å¼ºã€èƒ½æ”¯æŒé«˜è¾¾ 5w ä¸ª..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-08-17T10:50:56.000Z"><meta property="article:author" content="fanfan"><meta property="article:tag" content="Nginx"><meta property="article:published_time" content="2023-11-29T01:43:12.000Z"><meta property="article:modified_time" content="2024-08-17T10:50:56.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"01_Nginx - ä»å…¥é—¨åˆ°å®è·µ","image":[""],"datePublished":"2023-11-29T01:43:12.000Z","dateModified":"2024-08-17T10:50:56.000Z","author":[{"@type":"Person","name":"fanfan","url":"https://www.fanliu.top"}]}</script><link rel="alternate" type="application/atom+xml" href="https://www.fanliu.top/atom.xml" title="FanFanã®å­¦ä¹ ç¬”è®° Atom Feed"><link rel="alternate" type="application/json" href="https://www.fanliu.top/feed.json" title="FanFanã®å­¦ä¹ ç¬”è®° JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://www.fanliu.top/rss.xml" title="FanFanã®å­¦ä¹ ç¬”è®° RSS Feed"><title>01_Nginx - ä»å…¥é—¨åˆ°å®è·µ | FanFanã®å­¦ä¹ ç¬”è®°</title><meta name="description" content="image-20220724221108300 1. Nginx ä»‹ç» Nginx æ˜¯å¼€æºã€é«˜æ€§èƒ½ã€é«˜å¯é çš„ Web å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œè€Œä¸”æ”¯æŒçƒ­éƒ¨ç½²ï¼Œå‡ ä¹å¯ä»¥åšåˆ° 7 * 24 å°æ—¶ä¸é—´æ–­è¿è¡Œï¼Œå³ä½¿è¿è¡Œå‡ ä¸ªæœˆä¹Ÿä¸éœ€è¦é‡æ–°å¯åŠ¨ï¼Œè¿˜èƒ½åœ¨ä¸é—´æ–­æœåŠ¡çš„æƒ…å†µä¸‹å¯¹è½¯ä»¶ç‰ˆæœ¬è¿›è¡Œçƒ­æ›´æ–°ã€‚æ€§èƒ½æ˜¯ Nginx æœ€é‡è¦çš„è€ƒé‡ï¼Œå…¶å ç”¨å†…å­˜å°‘ã€å¹¶å‘èƒ½åŠ›å¼ºã€èƒ½æ”¯æŒé«˜è¾¾ 5w ä¸ª...">
    <link rel="preload" href="/assets/style-Wre63AnN.css" as="style"><link rel="stylesheet" href="/assets/style-Wre63AnN.css">
    <link rel="modulepreload" href="/assets/app-gulTYumw.js"><link rel="modulepreload" href="/assets/nginx_01.html-xahG1oIb.js"><link rel="modulepreload" href="/assets/nginx_01.html-v-BrxJUH.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-x3n3nnut.js">
    <link rel="prefetch" href="/assets/index.html-RwN0JjdQ.js" as="script"><link rel="prefetch" href="/assets/ES_use01.html-kVgGsm3D.js" as="script"><link rel="prefetch" href="/assets/JavaScript_01_åŸºç¡€.html-NBn8zCxr.js" as="script"><link rel="prefetch" href="/assets/JavaScript_02_æµç¨‹æ§åˆ¶.html-ml0sABEK.js" as="script"><link rel="prefetch" href="/assets/index.html-n9qEmAmo.js" as="script"><link rel="prefetch" href="/assets/chinese-copywriting-guidelines.html-s08q8pWD.js" as="script"><link rel="prefetch" href="/assets/friends.html-iRUZorcp.js" as="script"><link rel="prefetch" href="/assets/guestbook.html-eOMLlv2c.js" as="script"><link rel="prefetch" href="/assets/intro.html-93I7WRiB.js" as="script"><link rel="prefetch" href="/assets/me.html-ykJXT54D.js" as="script"><link rel="prefetch" href="/assets/AJAX_01_å…¥é—¨.html-bDlLXCXv.js" as="script"><link rel="prefetch" href="/assets/AJAX_02_ç»¼åˆæ¡ˆä¾‹.html-Dwrahx3w.js" as="script"><link rel="prefetch" href="/assets/AJAX_03_åŸç†.html-Q6L_lUUr.js" as="script"><link rel="prefetch" href="/assets/APPä¸€é”®ç™»å½•-æœåŠ¡ç«¯é›†æˆ.html-BCW0NZBs.js" as="script"><link rel="prefetch" href="/assets/ImageIo.read() è¯»å–å›¾ç‰‡æ—¶è¿”å›Nullçš„è§£å†³æ–¹æ³•.html-FYto3eD8.js" as="script"><link rel="prefetch" href="/assets/ä¸‰æ­¥æ•™ä½ åˆ é™¤ä¸ƒç‰›äº‘bucketæ‰€æœ‰æ–‡ä»¶.html-xTqJ5_e1.js" as="script"><link rel="prefetch" href="/assets/ä¸ºä»€ä¹ˆPOSTè¯·æ±‚åœ¨é‡å®šå‘åä¼šå˜æˆGETè¯·æ±‚ï¼Ÿ.html-CV0nQfL5.js" as="script"><link rel="prefetch" href="/assets/åœ¨ Spring Boot é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£æ·»åŠ  Cache-Control å“åº”å¤´.html-sN-afEJ_.js" as="script"><link rel="prefetch" href="/assets/å®å¡”nginxç¼“å­˜æ¸…ç†.html-lCCG58rG.js" as="script"><link rel="prefetch" href="/assets/æœåŠ¡å™¨å¦‚ä½•å¤„ç†æŒ–çŸ¿ç—…æ¯’.html-wuVUkU4W.js" as="script"><link rel="prefetch" href="/assets/ç ´è§£Asposeç³»åˆ—jaråŒ…æ–¹æ³•.html-VsnD9H6c.js" as="script"><link rel="prefetch" href="/assets/index.html-GO_ts-lo.js" as="script"><link rel="prefetch" href="/assets/dockerå®‰è£…MySQL.html-bb2BGdGN.js" as="script"><link rel="prefetch" href="/assets/å¸¦ä½ æ·±å…¥äº†è§£dockeræ—¥å¿—.html-fM3CMPrA.js" as="script"><link rel="prefetch" href="/assets/ç®¡ç†dockerå¿…å¤‡å®¹å™¨-PortaineråŸºç¡€æ•™ç¨‹.html-sZ1FiJze.js" as="script"><link rel="prefetch" href="/assets/01-é¢å‘å¯¹è±¡é«˜çº§.html-2BRTJtPx.js" as="script"><link rel="prefetch" href="/assets/Linuxå¢åŠ è™šæ‹Ÿå†…å­˜ï¼šæå‡æœåŠ¡å™¨æ€§èƒ½.html-pCbKmNHC.js" as="script"><link rel="prefetch" href="/assets/Linuxå¸¸è§é—®é¢˜ç¬”è®°.html-b0PYknVQ.js" as="script"><link rel="prefetch" href="/assets/Linuxç³»ç»Ÿå­—ä½“ç¼ºå¤±çš„ä¿®å¤æ–¹æ³•.html-bRbERL0a.js" as="script"><link rel="prefetch" href="/assets/å¦‚ä½•æ›´æ”¹Linuxç™»å½•ä¿¡æ¯.html-veIsuWXl.js" as="script"><link rel="prefetch" href="/assets/nginx_02.html--h0ftqFe.js" as="script"><link rel="prefetch" href="/assets/nodejsç‰ˆæœ¬åˆ‡æ¢å·¥å…·.html-i0PMbWw3.js" as="script"><link rel="prefetch" href="/assets/jeecg-boot é˜²æ­¢é‡å¤æäº¤.html-aCnBaaXF.js" as="script"><link rel="prefetch" href="/assets/è‹¥ä¾æºç è§£è¯»ï¼šå›¾ç‰‡éªŒè¯ç .html-aLBYYRu3.js" as="script"><link rel="prefetch" href="/assets/è‹¥ä¾æºç è§£è¯»ï¼šé˜²æ­¢è¡¨å•é‡å¤æäº¤.html-sEH07YaA.js" as="script"><link rel="prefetch" href="/assets/MySQLå­¦ä¹ ç¬”è®°_01.html-t7dr9crm.js" as="script"><link rel="prefetch" href="/assets/MySQLå­¦ä¹ ç¬”è®°_02.html-Xbxw06gz.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ_01.html-z_G8zC0d.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ_02.html-QxZ1IEfg.js" as="script"><link rel="prefetch" href="/assets/æˆ‘çš„ä¸–ç•ŒMCSMé¢æ¿æ­å»º.html-irNE5H4e.js" as="script"><link rel="prefetch" href="/assets/å°†å†›ä¸å£«å…µ.html-sxhJI-UY.js" as="script"><link rel="prefetch" href="/assets/çœŸå¿ƒæ¢ä¸äº†çœŸå¿ƒ.html-9qIsceoW.js" as="script"><link rel="prefetch" href="/assets/git.html-Ys9J1ryO.js" as="script"><link rel="prefetch" href="/assets/å¦é—¨.html-GN3svWBR.js" as="script"><link rel="prefetch" href="/assets/Springæ ¸å¿ƒä¹‹æ§åˆ¶åè½¬(IOC).html-mW0zhrCq.js" as="script"><link rel="prefetch" href="/assets/SpringBoot-api-01-ç”Ÿæˆæ¥å£æ–‡æ¡£ä¹‹SwaggeræŠ€æœ¯æ ˆ.html-bKUdA5fS.js" as="script"><link rel="prefetch" href="/assets/SpringBootåŸç†ç¯‡.html-welKfMbo.js" as="script"><link rel="prefetch" href="/assets/404.html-bAKJ-LzF.js" as="script"><link rel="prefetch" href="/assets/index.html-nQvlh0Sq.js" as="script"><link rel="prefetch" href="/assets/index.html-DvOa7M2W.js" as="script"><link rel="prefetch" href="/assets/index.html-cErLf93n.js" as="script"><link rel="prefetch" href="/assets/index.html-1E68Ihha.js" as="script"><link rel="prefetch" href="/assets/index.html-6Jj5Vkss.js" as="script"><link rel="prefetch" href="/assets/index.html-wQPWxgB4.js" as="script"><link rel="prefetch" href="/assets/index.html-SrTsqHpN.js" as="script"><link rel="prefetch" href="/assets/index.html-A8tptYNy.js" as="script"><link rel="prefetch" href="/assets/index.html-ndpFGVSr.js" as="script"><link rel="prefetch" href="/assets/index.html-52jtI5k-.js" as="script"><link rel="prefetch" href="/assets/index.html-jw8JcRcq.js" as="script"><link rel="prefetch" href="/assets/index.html-p7SQtRHt.js" as="script"><link rel="prefetch" href="/assets/index.html-qvD8yAJf.js" as="script"><link rel="prefetch" href="/assets/index.html-9b3HTNxw.js" as="script"><link rel="prefetch" href="/assets/index.html-ZOD0Fv58.js" as="script"><link rel="prefetch" href="/assets/index.html-uAW3VnKa.js" as="script"><link rel="prefetch" href="/assets/index.html-18w_tZXQ.js" as="script"><link rel="prefetch" href="/assets/index.html-J5dhJa__.js" as="script"><link rel="prefetch" href="/assets/index.html-1fKVCZdA.js" as="script"><link rel="prefetch" href="/assets/index.html-LoBy0MCS.js" as="script"><link rel="prefetch" href="/assets/index.html-DGcDW9FN.js" as="script"><link rel="prefetch" href="/assets/index.html-v_5-e8Aq.js" as="script"><link rel="prefetch" href="/assets/index.html-lPzWtvLp.js" as="script"><link rel="prefetch" href="/assets/index.html-huSfzMe8.js" as="script"><link rel="prefetch" href="/assets/index.html-zSiFnTmR.js" as="script"><link rel="prefetch" href="/assets/index.html-T2lkp-Lh.js" as="script"><link rel="prefetch" href="/assets/index.html-w6SX1OmN.js" as="script"><link rel="prefetch" href="/assets/index.html-8WZP1eil.js" as="script"><link rel="prefetch" href="/assets/index.html-tOvz_STL.js" as="script"><link rel="prefetch" href="/assets/index.html-jv2_u4HK.js" as="script"><link rel="prefetch" href="/assets/index.html-bZZGkGvS.js" as="script"><link rel="prefetch" href="/assets/index.html-ongp0oT9.js" as="script"><link rel="prefetch" href="/assets/index.html-oX1h0Vc2.js" as="script"><link rel="prefetch" href="/assets/index.html-jDUJl_fD.js" as="script"><link rel="prefetch" href="/assets/index.html-NYyjykkc.js" as="script"><link rel="prefetch" href="/assets/index.html-74BHC_HX.js" as="script"><link rel="prefetch" href="/assets/index.html-ziJKl4Sj.js" as="script"><link rel="prefetch" href="/assets/index.html-gbXz9iaA.js" as="script"><link rel="prefetch" href="/assets/index.html-PGQDQ_dA.js" as="script"><link rel="prefetch" href="/assets/index.html-a4CqkFqg.js" as="script"><link rel="prefetch" href="/assets/index.html-ELchW13c.js" as="script"><link rel="prefetch" href="/assets/index.html-EvDQrB9S.js" as="script"><link rel="prefetch" href="/assets/index.html-L0TZ6Ew9.js" as="script"><link rel="prefetch" href="/assets/index.html-2CBMwrVe.js" as="script"><link rel="prefetch" href="/assets/index.html-7pOI1wHV.js" as="script"><link rel="prefetch" href="/assets/index.html-mG2HXO_b.js" as="script"><link rel="prefetch" href="/assets/index.html--Dqi8dce.js" as="script"><link rel="prefetch" href="/assets/index.html-lszS-1n8.js" as="script"><link rel="prefetch" href="/assets/index.html-bkRo475z.js" as="script"><link rel="prefetch" href="/assets/index.html-b8CVhDdp.js" as="script"><link rel="prefetch" href="/assets/index.html-s8TFYmEu.js" as="script"><link rel="prefetch" href="/assets/index.html-noAj_5kW.js" as="script"><link rel="prefetch" href="/assets/index.html-4eN35Cts.js" as="script"><link rel="prefetch" href="/assets/index.html-nN1zs5SL.js" as="script"><link rel="prefetch" href="/assets/index.html-6_jHONyc.js" as="script"><link rel="prefetch" href="/assets/index.html-gYptCbpO.js" as="script"><link rel="prefetch" href="/assets/index.html-3hjOzIzo.js" as="script"><link rel="prefetch" href="/assets/index.html-0DUHSKWR.js" as="script"><link rel="prefetch" href="/assets/index.html-8loakx5J.js" as="script"><link rel="prefetch" href="/assets/index.html-k_uzFHMS.js" as="script"><link rel="prefetch" href="/assets/index.html-NSyXMPJC.js" as="script"><link rel="prefetch" href="/assets/index.html-njnnioLw.js" as="script"><link rel="prefetch" href="/assets/index.html-pyOiXjvB.js" as="script"><link rel="prefetch" href="/assets/index.html-1rSSV8oo.js" as="script"><link rel="prefetch" href="/assets/index.html-xUn1FgyV.js" as="script"><link rel="prefetch" href="/assets/index.html-hjSBc9NH.js" as="script"><link rel="prefetch" href="/assets/index.html-EHxzwRUn.js" as="script"><link rel="prefetch" href="/assets/index.html-nkCJoTlN.js" as="script"><link rel="prefetch" href="/assets/index.html-uxS7L0ld.js" as="script"><link rel="prefetch" href="/assets/index.html-s-LpOvR3.js" as="script"><link rel="prefetch" href="/assets/index.html-BiCfBqf3.js" as="script"><link rel="prefetch" href="/assets/index.html-5xP3tcof.js" as="script"><link rel="prefetch" href="/assets/index.html-YivXhXia.js" as="script"><link rel="prefetch" href="/assets/index.html-Tb6ZbBJF.js" as="script"><link rel="prefetch" href="/assets/ES_use01.html-ZMZ4vk_N.js" as="script"><link rel="prefetch" href="/assets/JavaScript_01_åŸºç¡€.html-gHNl-H0m.js" as="script"><link rel="prefetch" href="/assets/JavaScript_02_æµç¨‹æ§åˆ¶.html-t2X3tH0i.js" as="script"><link rel="prefetch" href="/assets/index.html-_iaVU6bt.js" as="script"><link rel="prefetch" href="/assets/chinese-copywriting-guidelines.html-ynpn6zm1.js" as="script"><link rel="prefetch" href="/assets/friends.html-OlVk61v2.js" as="script"><link rel="prefetch" href="/assets/guestbook.html-XdDc4miZ.js" as="script"><link rel="prefetch" href="/assets/intro.html-XUTfmVMT.js" as="script"><link rel="prefetch" href="/assets/me.html-K6_cvX-c.js" as="script"><link rel="prefetch" href="/assets/AJAX_01_å…¥é—¨.html-e8Q9N-O9.js" as="script"><link rel="prefetch" href="/assets/AJAX_02_ç»¼åˆæ¡ˆä¾‹.html-nGDKUK3e.js" as="script"><link rel="prefetch" href="/assets/AJAX_03_åŸç†.html-zEkyDb4j.js" as="script"><link rel="prefetch" href="/assets/APPä¸€é”®ç™»å½•-æœåŠ¡ç«¯é›†æˆ.html-vYcum-IX.js" as="script"><link rel="prefetch" href="/assets/ImageIo.read() è¯»å–å›¾ç‰‡æ—¶è¿”å›Nullçš„è§£å†³æ–¹æ³•.html-_5-_NheX.js" as="script"><link rel="prefetch" href="/assets/ä¸‰æ­¥æ•™ä½ åˆ é™¤ä¸ƒç‰›äº‘bucketæ‰€æœ‰æ–‡ä»¶.html-fti4LtsO.js" as="script"><link rel="prefetch" href="/assets/ä¸ºä»€ä¹ˆPOSTè¯·æ±‚åœ¨é‡å®šå‘åä¼šå˜æˆGETè¯·æ±‚ï¼Ÿ.html-8_Rzbc-9.js" as="script"><link rel="prefetch" href="/assets/åœ¨ Spring Boot é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£æ·»åŠ  Cache-Control å“åº”å¤´.html-aOOwOMI_.js" as="script"><link rel="prefetch" href="/assets/å®å¡”nginxç¼“å­˜æ¸…ç†.html-zx2CIW9y.js" as="script"><link rel="prefetch" href="/assets/æœåŠ¡å™¨å¦‚ä½•å¤„ç†æŒ–çŸ¿ç—…æ¯’.html-9IQNoI2v.js" as="script"><link rel="prefetch" href="/assets/ç ´è§£Asposeç³»åˆ—jaråŒ…æ–¹æ³•.html-y8yi7AUR.js" as="script"><link rel="prefetch" href="/assets/index.html-VnNjE1_D.js" as="script"><link rel="prefetch" href="/assets/dockerå®‰è£…MySQL.html-kHf8yWgy.js" as="script"><link rel="prefetch" href="/assets/å¸¦ä½ æ·±å…¥äº†è§£dockeræ—¥å¿—.html-zzzDt9vN.js" as="script"><link rel="prefetch" href="/assets/ç®¡ç†dockerå¿…å¤‡å®¹å™¨-PortaineråŸºç¡€æ•™ç¨‹.html-MYBEp5De.js" as="script"><link rel="prefetch" href="/assets/01-é¢å‘å¯¹è±¡é«˜çº§.html-w6Y-IGt6.js" as="script"><link rel="prefetch" href="/assets/Linuxå¢åŠ è™šæ‹Ÿå†…å­˜ï¼šæå‡æœåŠ¡å™¨æ€§èƒ½.html-xdR6W1IB.js" as="script"><link rel="prefetch" href="/assets/Linuxå¸¸è§é—®é¢˜ç¬”è®°.html-bgCB5rTb.js" as="script"><link rel="prefetch" href="/assets/Linuxç³»ç»Ÿå­—ä½“ç¼ºå¤±çš„ä¿®å¤æ–¹æ³•.html-46JcfcwL.js" as="script"><link rel="prefetch" href="/assets/å¦‚ä½•æ›´æ”¹Linuxç™»å½•ä¿¡æ¯.html-9SOGc8VZ.js" as="script"><link rel="prefetch" href="/assets/nginx_02.html-X9mMluCX.js" as="script"><link rel="prefetch" href="/assets/nodejsç‰ˆæœ¬åˆ‡æ¢å·¥å…·.html-KSwc2dOr.js" as="script"><link rel="prefetch" href="/assets/jeecg-boot é˜²æ­¢é‡å¤æäº¤.html-C2jP38-4.js" as="script"><link rel="prefetch" href="/assets/è‹¥ä¾æºç è§£è¯»ï¼šå›¾ç‰‡éªŒè¯ç .html-SAsbQpj-.js" as="script"><link rel="prefetch" href="/assets/è‹¥ä¾æºç è§£è¯»ï¼šé˜²æ­¢è¡¨å•é‡å¤æäº¤.html-ss5wpDXg.js" as="script"><link rel="prefetch" href="/assets/MySQLå­¦ä¹ ç¬”è®°_01.html-5Mf5KOAk.js" as="script"><link rel="prefetch" href="/assets/MySQLå­¦ä¹ ç¬”è®°_02.html-58q6FneN.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ_01.html-c_IBSFXT.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ_02.html-nA01xjDt.js" as="script"><link rel="prefetch" href="/assets/æˆ‘çš„ä¸–ç•ŒMCSMé¢æ¿æ­å»º.html-aSnuVQam.js" as="script"><link rel="prefetch" href="/assets/å°†å†›ä¸å£«å…µ.html-0g2ww5a-.js" as="script"><link rel="prefetch" href="/assets/çœŸå¿ƒæ¢ä¸äº†çœŸå¿ƒ.html-zLX7av13.js" as="script"><link rel="prefetch" href="/assets/git.html-S3b7pW0L.js" as="script"><link rel="prefetch" href="/assets/å¦é—¨.html-4oaPxzHY.js" as="script"><link rel="prefetch" href="/assets/Springæ ¸å¿ƒä¹‹æ§åˆ¶åè½¬(IOC).html-Auz2QDDG.js" as="script"><link rel="prefetch" href="/assets/SpringBoot-api-01-ç”Ÿæˆæ¥å£æ–‡æ¡£ä¹‹SwaggeræŠ€æœ¯æ ˆ.html-03Lz2RZC.js" as="script"><link rel="prefetch" href="/assets/SpringBootåŸç†ç¯‡.html-lVWM-QnD.js" as="script"><link rel="prefetch" href="/assets/404.html-90ikhPSs.js" as="script"><link rel="prefetch" href="/assets/index.html-wx8pQand.js" as="script"><link rel="prefetch" href="/assets/index.html-OUrlxT6k.js" as="script"><link rel="prefetch" href="/assets/index.html-DHIcY7wG.js" as="script"><link rel="prefetch" href="/assets/index.html-RHH995si.js" as="script"><link rel="prefetch" href="/assets/index.html-E-cBFwJn.js" as="script"><link rel="prefetch" href="/assets/index.html-243W53rU.js" as="script"><link rel="prefetch" href="/assets/index.html-e_wg3OfB.js" as="script"><link rel="prefetch" href="/assets/index.html-Lguybccx.js" as="script"><link rel="prefetch" href="/assets/index.html-D24-AUQU.js" as="script"><link rel="prefetch" href="/assets/index.html-NJNZIPOi.js" as="script"><link rel="prefetch" href="/assets/index.html-mHT8QF2Y.js" as="script"><link rel="prefetch" href="/assets/index.html-9RQd7ikr.js" as="script"><link rel="prefetch" href="/assets/index.html-VcIg4u6a.js" as="script"><link rel="prefetch" href="/assets/index.html-Rzy8JLDG.js" as="script"><link rel="prefetch" href="/assets/index.html-O-R5AvKV.js" as="script"><link rel="prefetch" href="/assets/index.html-dwRe7nP_.js" as="script"><link rel="prefetch" href="/assets/index.html-otLoJ1X0.js" as="script"><link rel="prefetch" href="/assets/index.html-hxLWh_Qr.js" as="script"><link rel="prefetch" href="/assets/index.html-VlGBfev-.js" as="script"><link rel="prefetch" href="/assets/index.html-U_6bUBH8.js" as="script"><link rel="prefetch" href="/assets/index.html-6rlXZUvX.js" as="script"><link rel="prefetch" href="/assets/index.html-XhLB8al9.js" as="script"><link rel="prefetch" href="/assets/index.html-CAjcRsky.js" as="script"><link rel="prefetch" href="/assets/index.html-NZDFcAel.js" as="script"><link rel="prefetch" href="/assets/index.html-cExGdboS.js" as="script"><link rel="prefetch" href="/assets/index.html-y6LHhUOU.js" as="script"><link rel="prefetch" href="/assets/index.html-6jye9tf6.js" as="script"><link rel="prefetch" href="/assets/index.html-se43S-am.js" as="script"><link rel="prefetch" href="/assets/index.html-kVYH-DIN.js" as="script"><link rel="prefetch" href="/assets/index.html-DNcH5cLc.js" as="script"><link rel="prefetch" href="/assets/index.html-kQeQfzng.js" as="script"><link rel="prefetch" href="/assets/index.html-lmlKWtw7.js" as="script"><link rel="prefetch" href="/assets/index.html-Q2PbZdo9.js" as="script"><link rel="prefetch" href="/assets/index.html-HAsDlgSq.js" as="script"><link rel="prefetch" href="/assets/index.html-4-JuIfT6.js" as="script"><link rel="prefetch" href="/assets/index.html--bNSkXgL.js" as="script"><link rel="prefetch" href="/assets/index.html-ROuPoizg.js" as="script"><link rel="prefetch" href="/assets/index.html-DNutYefg.js" as="script"><link rel="prefetch" href="/assets/index.html-CzwWds4l.js" as="script"><link rel="prefetch" href="/assets/index.html-NPRmv7KQ.js" as="script"><link rel="prefetch" href="/assets/index.html-2DOtHmMo.js" as="script"><link rel="prefetch" href="/assets/index.html-8jTYBuXt.js" as="script"><link rel="prefetch" href="/assets/index.html-5g3pIuum.js" as="script"><link rel="prefetch" href="/assets/index.html-ltez32HW.js" as="script"><link rel="prefetch" href="/assets/index.html-dCSx3ZWQ.js" as="script"><link rel="prefetch" href="/assets/index.html-ssuZ310T.js" as="script"><link rel="prefetch" href="/assets/index.html-P748fvzY.js" as="script"><link rel="prefetch" href="/assets/index.html-zLGRPjyO.js" as="script"><link rel="prefetch" href="/assets/index.html-N2R6H0AG.js" as="script"><link rel="prefetch" href="/assets/index.html-0whA_r7n.js" as="script"><link rel="prefetch" href="/assets/index.html-2MSwnvpo.js" as="script"><link rel="prefetch" href="/assets/index.html-1e5igOvh.js" as="script"><link rel="prefetch" href="/assets/index.html-AMtn9ibH.js" as="script"><link rel="prefetch" href="/assets/index.html-RCwaZDNc.js" as="script"><link rel="prefetch" href="/assets/index.html-v0Tr2qO3.js" as="script"><link rel="prefetch" href="/assets/index.html-jq5KmAmR.js" as="script"><link rel="prefetch" href="/assets/index.html-Wvh_0VE2.js" as="script"><link rel="prefetch" href="/assets/index.html-NAyBv_fT.js" as="script"><link rel="prefetch" href="/assets/index.html-gkhO0_mN.js" as="script"><link rel="prefetch" href="/assets/index.html-KHfIvEjV.js" as="script"><link rel="prefetch" href="/assets/index.html-Y3KDOSiW.js" as="script"><link rel="prefetch" href="/assets/index.html-pX6G80iv.js" as="script"><link rel="prefetch" href="/assets/index.html-6k0rBtVy.js" as="script"><link rel="prefetch" href="/assets/index.html-RvlNfKKk.js" as="script"><link rel="prefetch" href="/assets/index.html-SoPNOJ9L.js" as="script"><link rel="prefetch" href="/assets/index.html-CwSDp9Wd.js" as="script"><link rel="prefetch" href="/assets/index.html-84Rnpd0O.js" as="script"><link rel="prefetch" href="/assets/index.html-AR4tOR0m.js" as="script"><link rel="prefetch" href="/assets/index.html-75LbfOep.js" as="script"><link rel="prefetch" href="/assets/index.html-axtirDIE.js" as="script"><link rel="prefetch" href="/assets/index.html-v57EG-RS.js" as="script"><link rel="prefetch" href="/assets/index.html-BOqmaMjl.js" as="script"><link rel="prefetch" href="/assets/index.html-4Pu3S8bk.js" as="script"><link rel="prefetch" href="/assets/waline-meta-w40geAFS.js" as="script"><link rel="prefetch" href="/assets/component-s5uTCZE1.js" as="script"><link rel="prefetch" href="/assets/auto-HRhNfH8L.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-VPkcmA5b.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-ldiezHYe.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-mC0Qcr12.js" as="script"><link rel="prefetch" href="/assets/pageview-wxo1cUtK.js" as="script"><link rel="prefetch" href="/assets/SearchResult-PY0tFhWs.js" as="script"><link rel="prefetch" href="/assets/NavMusic-JjBa-P2N.js" as="script"><link rel="prefetch" href="/assets/HeroHitokoto-emNad_xf.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt="FanFanã®å­¦ä¹ ç¬”è®°"><!----><span class="vp-site-name hide-in-pad">FanFanã®å­¦ä¹ ç¬”è®°</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="åšå®¢" class="vp-link nav-link nav-link" href="/blog/"><img class="icon" src="/assets/icon/blog.svg" no-view style="">åšå®¢<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ç´¢å¼•"><span class="title"><img class="icon" src="/img/suoyin.svg" no-view style="">ç´¢å¼•</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="æ‰€æœ‰æ–‡ç« " class="vp-link nav-link nav-link" href="/article/"><img class="icon" src="/img/any.svg" no-view style="">æ‰€æœ‰æ–‡ç« <!----></a></li><li class="dropdown-item"><a aria-label="åˆ†ç±»" class="vp-link nav-link nav-link" href="/category/"><img class="icon" src="/img/suoyin.svg" no-view style="">åˆ†ç±»<!----></a></li><li class="dropdown-item"><a aria-label="æ ‡ç­¾" class="vp-link nav-link nav-link" href="/tag/"><span class="font-icon icon iconfont icon-tag" style=""></span>æ ‡ç­¾<!----></a></li><li class="dropdown-item"><a aria-label="æ—¶é—´è½´" class="vp-link nav-link nav-link" href="/timeline/"><img class="icon" src="/img/time.svg" no-view style="">æ—¶é—´è½´<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="çŸ¥è¯†åº“"><span class="title"><img class="icon" src="/img/book.svg" no-view style="">çŸ¥è¯†åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="æºç è§£è¯»" class="vp-link nav-link nav-link" href="/CodeInterpretation/"><img class="icon" src="/img/code.svg" no-view style="">æºç è§£è¯»<!----></a></li><li class="dropdown-item"><a aria-label="JavaScript" class="vp-link nav-link nav-link" href="/JavaScript/"><span class="font-icon icon iconfont icon-JavaScript" style=""></span>JavaScript<!----></a></li><li class="dropdown-item"><a aria-label="AJAX" class="vp-link nav-link nav-link" href="/ajax/"><span class="font-icon icon iconfont icon-ajax" style=""></span>AJAX<!----></a></li><li class="dropdown-item"><a aria-label="JavaSE" class="vp-link nav-link nav-link" href="/javaSE/"><span class="font-icon icon iconfont icon-java" style=""></span>JavaSE<!----></a></li><li class="dropdown-item"><a aria-label="Linux" class="vp-link nav-link nav-link" href="/linux/"><img class="icon" src="/img/linux.svg" no-view style="">Linux<!----></a></li><li class="dropdown-item"><a aria-label="Docker" class="vp-link nav-link nav-link" href="/docker/"><img class="icon" src="/img/docker.svg" no-view style="">Docker<!----></a></li><li class="dropdown-item"><a aria-label="Nginx" class="vp-link nav-link active nav-link active" href="/nginx/"><span class="font-icon icon iconfont icon-nginx" style=""></span>Nginx<!----></a></li><li class="dropdown-item"><a aria-label="nodeJS" class="vp-link nav-link nav-link" href="/nodeJS/"><img class="icon" src="/img/node.svg" no-view style="">nodeJS<!----></a></li><li class="dropdown-item"><a aria-label="ES" class="vp-link nav-link nav-link" href="/Elasticsearch/"><img class="icon" src="/img/es.svg" no-view style="">ES<!----></a></li><li class="dropdown-item"><a aria-label="RabbitMQ" class="vp-link nav-link nav-link" href="/mq/rabbitMQ/"><img class="icon" src="/img/rabbitmq.svg" no-view style="">RabbitMQ<!----></a></li><li class="dropdown-item"><a aria-label="Spring" class="vp-link nav-link nav-link" href="/spring/"><img class="icon" src="/img/spring.svg" no-view style="">Spring<!----></a></li><li class="dropdown-item"><a aria-label="æ•°æ®åº“" class="vp-link nav-link nav-link" href="/db/"><img class="icon" src="/img/mysql.svg" no-view style="">æ•°æ®åº“<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ç”Ÿæ´»"><span class="title"><img class="icon" src="/img/holiday.svg" no-view style="">ç”Ÿæ´»</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="æ‚è®°" class="vp-link nav-link nav-link" href="/other/node/"><img class="icon" src="/img/book.svg" no-view style="">æ‚è®°<!----></a></li><li class="dropdown-item"><a aria-label="è¶³è¿¹" class="vp-link nav-link nav-link" href="/other/world/"><img class="icon" src="/img/lvXing.svg" no-view style="">è¶³è¿¹<!----></a></li><li class="dropdown-item"><a aria-label="æ¸¸æˆ" class="vp-link nav-link nav-link" href="/other/game/"><img class="icon" src="/img/game.svg" no-view style="">æ¸¸æˆ<!----></a></li><li class="dropdown-item"><a aria-label="å·¥å…·" class="vp-link nav-link nav-link" href="/other/tool/"><img class="icon" src="/img/lvXing.svg" no-view style="">å·¥å…·<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="å…³äº" class="vp-link nav-link nav-link" href="/about/"><img class="icon" src="/assets/icon/about-me.svg" no-view style="">å…³äº<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://foreverblog.cn/go.html" title="ç©¿æ¢­è™«æ´-éšæœºè®¿é—®åå¹´ä¹‹çº¦å‹é“¾åšå®¢" target="_blank" rel="noopener noreferrer" aria-label="wormhole"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor" style="width:1.25rem;height:1.25rem;vertical-align:middle"><path d="M644.608 665.6c192.512-171.008 342.016-395.776 254.464-494.592-27.648-31.232-66.56-45.568-108.032-41.472-34.816 3.584-70.656 20.992-107.008 50.176-116.224-59.904-254.464-55.296-366.592 11.776-86.016 51.2-148.48 134.656-172.544 231.936-18.944 74.24-14.336 152.064 12.8 223.744-44.544 50.688-86.528 154.624-34.816 212.992 21.504 24.576 52.736 35.328 90.112 35.328 114.176-0.512 286.72-100.864 431.616-229.888z m155.648-452.608c14.848-1.536 26.624 2.56 36.352 13.824 9.728 10.752 7.168 39.936-10.752 80.896-18.944-28.672-41.984-55.296-68.096-77.824 17.92-10.752 32.256-15.872 42.496-16.896z m-598.528 517.12c18.944 27.136 40.96 51.712 66.048 73.216-43.008 12.8-72.192 11.776-81.92 1.024-8.704-10.752 0.512-45.056 15.872-74.24z m685.568-246.784c-51.2 75.264-122.368 154.112-200.704 224.256-81.408 72.192-171.008 134.656-254.464 176.64 26.112 5.632 52.224 8.704 78.848 8.704 68.096 0 135.168-18.944 194.048-53.76 124.416-73.216 195.072-211.968 182.272-355.84z m0 0" p-id="4157"></path></svg></a></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://www.travellings.cn/go.html" title="å¼€å¾€" target="_blank" rel="noopener noreferrer" aria-label="travelling"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor" style="width:1.25rem;height:1.25rem;vertical-align:middle"><path d="M658.836 519.32c-22.121 0-40.145 18.431-40.145 40.957 0 22.528 18.023 40.962 40.145 40.962 22.117 0 40.141-18.434 40.141-40.962 0-22.526-18.024-40.957-40.141-40.957zM364.742 519.32c-22.121 0-40.141 18.431-40.141 40.957 0.41 22.528 18.02 40.962 40.141 40.962 22.117 0 40.141-18.434 40.141-40.962 0-22.526-18.024-40.957-40.141-40.957z" p-id="8700"></path><path d="M512 0C229.23 0 0 229.23 0 512s229.23 512 512 512 512-229.23 512-512S794.77 0 512 0z m133.727 804.81c0 7.375-6.145 13.52-13.516 13.52H391.773c-7.371 0-13.515-6.145-13.515-13.52v-13.516c0-7.371 6.144-13.517 13.515-13.517h240.438c7.371 0 13.516 6.146 13.516 13.517v13.516z m120.832 37.273c-12.289 6.965-27.441 2.867-34.406-9.418l-54.887-96.668c-4.504 0.82-9.422 1.23-13.926 1.23H361.054c-4.914 0-9.421-0.41-13.925-1.23l-54.887 96.668c-6.965 12.285-22.527 16.383-34.406 9.418-12.289-6.961-16.383-22.938-9.422-35.223l51.199-90.113c-27.031-19.66-43.418-52.43-40.957-88.883l19.25-293.273c3.277-49.152 34.406-88.066 87.246-88.066h80.281c0-37.684 29.899-67.993 66.762-67.993 36.868 0 66.766 30.309 66.766 67.993h93.391c53.246 0 70.449 38.914 73.727 88.066l19.25 293.273c2.461 36.453-13.926 69.223-40.957 88.883l51.199 90.113c6.964 12.696 2.867 28.262-9.012 35.223z" p-id="8701"></path><path d="M672.352 314.931H351.633c-14.747 0-26.622 12.285-26.622 27.441v108.953c0 15.157 11.875 27.446 26.622 27.446h320.719c14.746 0 26.625-12.289 26.625-27.446V342.372c0-15.156-11.879-27.441-26.625-27.441z" p-id="8702"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="01_Nginx - ä»å…¥é—¨åˆ°å®è·µ" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/nginx/nginx_01.html"><span class="font-icon icon iconfont icon-nginx" style=""></span>01_Nginx - ä»å…¥é—¨åˆ°å®è·µ<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1. Nginx ä»‹ç»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_1-nginx-ä»‹ç»"><!---->1. Nginx ä»‹ç»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2. ç›¸å…³æ¦‚å¿µ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_2-ç›¸å…³æ¦‚å¿µ"><!---->2. ç›¸å…³æ¦‚å¿µ<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="2.1 ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_2-1-ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚"><!---->2.1 ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.2 è·¨åŸŸ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_2-2-è·¨åŸŸ"><!---->2.2 è·¨åŸŸ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.3 æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_2-3-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><!---->2.3 æ­£å‘ä»£ç†å’Œåå‘ä»£ç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.4 è´Ÿè½½å‡è¡¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_2-4-è´Ÿè½½å‡è¡¡"><!---->2.4 è´Ÿè½½å‡è¡¡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.5 åŠ¨é™åˆ†ç¦»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_2-5-åŠ¨é™åˆ†ç¦»"><!---->2.5 åŠ¨é™åˆ†ç¦»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3. Nginx å¿«é€Ÿå®‰è£…" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_3-nginx-å¿«é€Ÿå®‰è£…"><!---->3. Nginx å¿«é€Ÿå®‰è£…<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="3.1 å®‰è£…" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_3-1-å®‰è£…"><!---->3.1 å®‰è£…<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.2 ç›¸å…³æ–‡ä»¶å¤¹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_3-2-ç›¸å…³æ–‡ä»¶å¤¹"><!---->3.2 ç›¸å…³æ–‡ä»¶å¤¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.3 è·‘èµ·æ¥åº·åº·" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_3-3-è·‘èµ·æ¥åº·åº·"><!---->3.3 è·‘èµ·æ¥åº·åº·<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4. Nginx æ“ä½œå¸¸ç”¨å‘½ä»¤" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_4-nginx-æ“ä½œå¸¸ç”¨å‘½ä»¤"><!---->4. Nginx æ“ä½œå¸¸ç”¨å‘½ä»¤<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5. Nginx é…ç½®è¯­æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_5-nginx-é…ç½®è¯­æ³•"><!---->5. Nginx é…ç½®è¯­æ³•<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="5.1 å…¸å‹é…ç½®" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_5-1-å…¸å‹é…ç½®"><!---->5.1 å…¸å‹é…ç½®<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.2 å…¨å±€å˜é‡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_5-2-å…¨å±€å˜é‡"><!---->5.2 å…¨å±€å˜é‡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6. è®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœº" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_6-è®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœº"><!---->6. è®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœº<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="7. é…ç½®åå‘ä»£ç†" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_7-é…ç½®åå‘ä»£ç†"><!---->7. é…ç½®åå‘ä»£ç†<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="8. è·¨åŸŸ CORS é…ç½®" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_8-è·¨åŸŸ-cors-é…ç½®"><!---->8. è·¨åŸŸ CORS é…ç½®<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="8.1 ä½¿ç”¨åå‘ä»£ç†è§£å†³è·¨åŸŸ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_8-1-ä½¿ç”¨åå‘ä»£ç†è§£å†³è·¨åŸŸ"><!---->8.1 ä½¿ç”¨åå‘ä»£ç†è§£å†³è·¨åŸŸ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="8.2 é…ç½® header è§£å†³è·¨åŸŸ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_8-2-é…ç½®-header-è§£å†³è·¨åŸŸ"><!---->8.2 é…ç½® header è§£å†³è·¨åŸŸ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="9. å¼€å¯ gzip å‹ç¼©" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_9-å¼€å¯-gzip-å‹ç¼©"><!---->9. å¼€å¯ gzip å‹ç¼©<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="9.1 Nginx é…ç½® gzip" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_9-1-nginx-é…ç½®-gzip"><!---->9.1 Nginx é…ç½® gzip<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="9.2 Webpack çš„ gzip é…ç½®" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_9-2-webpack-çš„-gzip-é…ç½®"><!---->9.2 Webpack çš„ gzip é…ç½®<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="10. é…ç½®è´Ÿè½½å‡è¡¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_10-é…ç½®è´Ÿè½½å‡è¡¡"><!---->10. é…ç½®è´Ÿè½½å‡è¡¡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="11. é…ç½®åŠ¨é™åˆ†ç¦»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_11-é…ç½®åŠ¨é™åˆ†ç¦»"><!---->11. é…ç½®åŠ¨é™åˆ†ç¦»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="12. é…ç½®é«˜å¯ç”¨é›†ç¾¤ï¼ˆåŒæœºçƒ­å¤‡ï¼‰" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_12-é…ç½®é«˜å¯ç”¨é›†ç¾¤-åŒæœºçƒ­å¤‡"><!---->12. é…ç½®é«˜å¯ç”¨é›†ç¾¤ï¼ˆåŒæœºçƒ­å¤‡ï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="13. é€‚é… PC æˆ–ç§»åŠ¨è®¾å¤‡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_13-é€‚é…-pc-æˆ–ç§»åŠ¨è®¾å¤‡"><!---->13. é€‚é… PC æˆ–ç§»åŠ¨è®¾å¤‡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="14. é…ç½® HTTPS" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_14-é…ç½®-https"><!---->14. é…ç½® HTTPS<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15. ä¸€äº›å¸¸ç”¨æŠ€å·§" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-ä¸€äº›å¸¸ç”¨æŠ€å·§"><!---->15. ä¸€äº›å¸¸ç”¨æŠ€å·§<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="15.1 é™æ€æœåŠ¡" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-1-é™æ€æœåŠ¡"><!---->15.1 é™æ€æœåŠ¡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.2 å›¾ç‰‡é˜²ç›—é“¾" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-2-å›¾ç‰‡é˜²ç›—é“¾"><!---->15.2 å›¾ç‰‡é˜²ç›—é“¾<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.3 è¯·æ±‚è¿‡æ»¤" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-3-è¯·æ±‚è¿‡æ»¤"><!---->15.3 è¯·æ±‚è¿‡æ»¤<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.4 é…ç½®å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€æ–‡ä»¶ç¼“å­˜" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-4-é…ç½®å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€æ–‡ä»¶ç¼“å­˜"><!---->15.4 é…ç½®å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€æ–‡ä»¶ç¼“å­˜<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.5 å•é¡µé¢é¡¹ç›® history è·¯ç”±é…ç½®" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-5-å•é¡µé¢é¡¹ç›®-history-è·¯ç”±é…ç½®"><!---->15.5 å•é¡µé¢é¡¹ç›® history è·¯ç”±é…ç½®<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.6 HTTP è¯·æ±‚è½¬å‘åˆ° HTTPS" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-6-http-è¯·æ±‚è½¬å‘åˆ°-https"><!---->15.6 HTTP è¯·æ±‚è½¬å‘åˆ° HTTPS<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.7 æ³›åŸŸåè·¯å¾„åˆ†ç¦»" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-7-æ³›åŸŸåè·¯å¾„åˆ†ç¦»"><!---->15.7 æ³›åŸŸåè·¯å¾„åˆ†ç¦»<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.8 æ³›åŸŸåè½¬å‘" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_15-8-æ³›åŸŸåè½¬å‘"><!---->15.8 æ³›åŸŸåè½¬å‘<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="16. æœ€ä½³å®è·µ" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/nginx/nginx_01.html#_16-æœ€ä½³å®è·µ"><!---->16. æœ€ä½³å®è·µ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-label="02_Nginx å…¥é—¨å®æˆ˜" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/nginx/nginx_02.html"><span class="font-icon icon iconfont icon-nginx" style=""></span>02_Nginx å…¥é—¨å®æˆ˜<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-nginx" style=""></span>01_Nginx - ä»å…¥é—¨åˆ°å®è·µ</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://www.fanliu.top" target="_blank" rel="noopener noreferrer">fanfan</a></span><span property="author" content="fanfan"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-11-29T01:43:12.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/nginx/nginx_01.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 35 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT35M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category4 clickable" role="navigation">Nginx</span><!--]--><meta property="articleSection" content="Nginx"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag4 clickable" role="navigation">Nginx</span><!--]--><meta property="keywords" content="Nginx"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_1-nginx-ä»‹ç»">1. Nginx ä»‹ç»</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_2-ç›¸å…³æ¦‚å¿µ">2. ç›¸å…³æ¦‚å¿µ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-1-ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚">2.1 ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-2-è·¨åŸŸ">2.2 è·¨åŸŸ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-3-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†">2.3 æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-4-è´Ÿè½½å‡è¡¡">2.4 è´Ÿè½½å‡è¡¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_2-5-åŠ¨é™åˆ†ç¦»">2.5 åŠ¨é™åˆ†ç¦»</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_3-nginx-å¿«é€Ÿå®‰è£…">3. Nginx å¿«é€Ÿå®‰è£…</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-1-å®‰è£…">3.1 å®‰è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-2-ç›¸å…³æ–‡ä»¶å¤¹">3.2 ç›¸å…³æ–‡ä»¶å¤¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-3-è·‘èµ·æ¥åº·åº·">3.3 è·‘èµ·æ¥åº·åº·</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_4-nginx-æ“ä½œå¸¸ç”¨å‘½ä»¤">4. Nginx æ“ä½œå¸¸ç”¨å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_5-nginx-é…ç½®è¯­æ³•">5. Nginx é…ç½®è¯­æ³•</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-1-å…¸å‹é…ç½®">5.1 å…¸å‹é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_5-2-å…¨å±€å˜é‡">5.2 å…¨å±€å˜é‡</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_6-è®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœº">6. è®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœº</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_7-é…ç½®åå‘ä»£ç†">7. é…ç½®åå‘ä»£ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_8-è·¨åŸŸ-cors-é…ç½®">8. è·¨åŸŸ CORS é…ç½®</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_8-1-ä½¿ç”¨åå‘ä»£ç†è§£å†³è·¨åŸŸ">8.1 ä½¿ç”¨åå‘ä»£ç†è§£å†³è·¨åŸŸ</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_8-2-é…ç½®-header-è§£å†³è·¨åŸŸ">8.2 é…ç½® header è§£å†³è·¨åŸŸ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_9-å¼€å¯-gzip-å‹ç¼©">9. å¼€å¯ gzip å‹ç¼©</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_9-1-nginx-é…ç½®-gzip">9.1 Nginx é…ç½® gzip</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_9-2-webpack-çš„-gzip-é…ç½®">9.2 Webpack çš„ gzip é…ç½®</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_10-é…ç½®è´Ÿè½½å‡è¡¡">10. é…ç½®è´Ÿè½½å‡è¡¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_11-é…ç½®åŠ¨é™åˆ†ç¦»">11. é…ç½®åŠ¨é™åˆ†ç¦»</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_12-é…ç½®é«˜å¯ç”¨é›†ç¾¤-åŒæœºçƒ­å¤‡">12. é…ç½®é«˜å¯ç”¨é›†ç¾¤ï¼ˆåŒæœºçƒ­å¤‡ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_13-é€‚é…-pc-æˆ–ç§»åŠ¨è®¾å¤‡">13. é€‚é… PC æˆ–ç§»åŠ¨è®¾å¤‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_14-é…ç½®-https">14. é…ç½® HTTPS</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_15-ä¸€äº›å¸¸ç”¨æŠ€å·§">15. ä¸€äº›å¸¸ç”¨æŠ€å·§</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_15-1-é™æ€æœåŠ¡">15.1 é™æ€æœåŠ¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_15-2-å›¾ç‰‡é˜²ç›—é“¾">15.2 å›¾ç‰‡é˜²ç›—é“¾</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_15-3-è¯·æ±‚è¿‡æ»¤">15.3 è¯·æ±‚è¿‡æ»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_15-4-é…ç½®å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€æ–‡ä»¶ç¼“å­˜">15.4 é…ç½®å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€æ–‡ä»¶ç¼“å­˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_15-5-å•é¡µé¢é¡¹ç›®-history-è·¯ç”±é…ç½®">15.5 å•é¡µé¢é¡¹ç›® history è·¯ç”±é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_15-6-http-è¯·æ±‚è½¬å‘åˆ°-https">15.6 HTTP è¯·æ±‚è½¬å‘åˆ° HTTPS</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_15-7-æ³›åŸŸåè·¯å¾„åˆ†ç¦»">15.7 æ³›åŸŸåè·¯å¾„åˆ†ç¦»</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_15-8-æ³›åŸŸåè½¬å‘">15.8 æ³›åŸŸåè½¬å‘</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_16-æœ€ä½³å®è·µ">16. æœ€ä½³å®è·µ</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="nginx-ä»å…¥é—¨åˆ°å®è·µ" tabindex="-1"><a class="header-anchor" href="#nginx-ä»å…¥é—¨åˆ°å®è·µ" aria-hidden="true">#</a> Nginx - ä»å…¥é—¨åˆ°å®è·µ</h1><figure><img src="/assets/image-20220724221108300-o44fdS27.png" alt="image-20220724221108300" tabindex="0" loading="lazy"><figcaption>image-20220724221108300</figcaption></figure><h2 id="_1-nginx-ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_1-nginx-ä»‹ç»" aria-hidden="true">#</a> 1. Nginx ä»‹ç»</h2><p>Nginx æ˜¯å¼€æºã€é«˜æ€§èƒ½ã€é«˜å¯é çš„ Web å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œè€Œä¸”æ”¯æŒçƒ­éƒ¨ç½²ï¼Œå‡ ä¹å¯ä»¥åšåˆ° 7 * 24 å°æ—¶ä¸é—´æ–­è¿è¡Œï¼Œå³ä½¿è¿è¡Œå‡ ä¸ªæœˆä¹Ÿä¸éœ€è¦é‡æ–°å¯åŠ¨ï¼Œè¿˜èƒ½åœ¨ä¸é—´æ–­æœåŠ¡çš„æƒ…å†µä¸‹å¯¹è½¯ä»¶ç‰ˆæœ¬è¿›è¡Œçƒ­æ›´æ–°ã€‚æ€§èƒ½æ˜¯ Nginx æœ€é‡è¦çš„è€ƒé‡ï¼Œå…¶å ç”¨å†…å­˜å°‘ã€å¹¶å‘èƒ½åŠ›å¼ºã€èƒ½æ”¯æŒé«˜è¾¾ 5w ä¸ªå¹¶å‘è¿æ¥æ•°ï¼Œæœ€é‡è¦çš„æ˜¯ï¼ŒNginx æ˜¯å…è´¹çš„å¹¶å¯ä»¥å•†ä¸šåŒ–ï¼Œé…ç½®ä½¿ç”¨ä¹Ÿæ¯”è¾ƒç®€å•ã€‚</p><p>Nginx çš„æœ€é‡è¦çš„å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š</p><ol><li>é™æ€èµ„æºæœåŠ¡ï¼Œé€šè¿‡æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæä¾›æœåŠ¡ï¼›</li><li>åå‘ä»£ç†æœåŠ¡ï¼Œå»¶ä¼¸å‡ºåŒ…æ‹¬ç¼“å­˜ã€è´Ÿè½½å‡è¡¡ç­‰ï¼›</li><li>API æœåŠ¡ï¼ŒOpenResty ï¼›</li></ol><p>å¯¹äºå‰ç«¯æ¥è¯´ Node.js ä¸é™Œç”Ÿäº†ï¼ŒNginx å’Œ Node.js çš„å¾ˆå¤šç†å¿µç±»ä¼¼ï¼ŒHTTP æœåŠ¡å™¨ã€äº‹ä»¶é©±åŠ¨ã€å¼‚æ­¥éé˜»å¡ç­‰ï¼Œä¸” Nginx çš„å¤§éƒ¨åˆ†åŠŸèƒ½ä½¿ç”¨ Node.js ä¹Ÿå¯ä»¥å®ç°ï¼Œä½† Nginx å’Œ Node.js å¹¶ä¸å†²çªï¼Œéƒ½æœ‰è‡ªå·±æ“…é•¿çš„é¢†åŸŸã€‚Nginx æ“…é•¿äºåº•å±‚æœåŠ¡å™¨ç«¯èµ„æºçš„å¤„ç†ï¼ˆé™æ€èµ„æºå¤„ç†è½¬å‘ã€åå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡ç­‰ï¼‰ï¼ŒNode.js æ›´æ“…é•¿ä¸Šå±‚å…·ä½“ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œä¸¤è€…å¯ä»¥å®Œç¾ç»„åˆï¼Œå…±åŒåŠ©åŠ›å‰ç«¯å¼€å‘ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ç€é‡å­¦ä¹ ä¸€ä¸‹ Nginx çš„ä½¿ç”¨ã€‚</p><h2 id="_2-ç›¸å…³æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_2-ç›¸å…³æ¦‚å¿µ" aria-hidden="true">#</a> 2. ç›¸å…³æ¦‚å¿µ</h2><h3 id="_2-1-ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#_2-1-ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚" aria-hidden="true">#</a> 2.1 ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚</h3><p>é¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚ï¼Œå¦‚æœåŒæ—¶æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚ï¼š</p><ol><li>è¯·æ±‚æ–¹æ³•æ˜¯ <code>HEAD</code>ã€<code>GET</code>ã€<code>POST</code> ä¸‰ç§ä¹‹ä¸€ï¼›</li><li>HTTP å¤´ä¿¡æ¯ä¸è¶…è¿‡å³è¾¹ç€å‡ ä¸ªå­—æ®µï¼š<code>Accept</code>ã€<code>Accept-Language</code>ã€<code>Content-Language</code>ã€<code>Last-Event-ID</code> <code>Content-Type</code> åªé™äºä¸‰ä¸ªå€¼ <code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>text/plain</code>ï¼›</li></ol><p>å‡¡æ˜¯ä¸åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶çš„ï¼Œéƒ½å±äºéç®€å•è¯·æ±‚ã€‚</p><p>æµè§ˆå™¨å¤„ç†ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚çš„æ–¹å¼ä¸ä¸€æ ·ï¼š</p><h4 id="_2-1-1-ç®€å•è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#_2-1-1-ç®€å•è¯·æ±‚" aria-hidden="true">#</a> 2.1.1 <strong>ç®€å•è¯·æ±‚</strong></h4><p>å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šåœ¨å¤´ä¿¡æ¯ä¸­å¢åŠ  <code>Origin</code> å­—æ®µåç›´æ¥å‘å‡ºï¼Œ<code>Origin</code> å­—æ®µç”¨æ¥è¯´æ˜ï¼Œæœ¬æ¬¡è¯·æ±‚æ¥è‡ªçš„å“ªä¸ªæºï¼ˆåè®®+åŸŸå+ç«¯å£ï¼‰ã€‚</p><p>å¦‚æœæœåŠ¡å™¨å‘ç° <code>Origin</code> æŒ‡å®šçš„æºä¸åœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„ HTTP å›åº”ï¼Œæµè§ˆå™¨å–åˆ°å›åº”ä¹‹åå‘ç°å›åº”çš„å¤´ä¿¡æ¯ä¸­æ²¡æœ‰åŒ…å« <code>Access-Control-Allow-Origin</code> å­—æ®µï¼Œå°±æŠ›å‡ºä¸€ä¸ªé”™è¯¯ç»™ XHR çš„ <code>error</code> äº‹ä»¶ï¼›</p><p>å¦‚æœæœåŠ¡å™¨å‘ç° <code>Origin</code> æŒ‡å®šçš„åŸŸååœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”ä¼šå¤šå‡ºå‡ ä¸ª <code>Access-Control-</code> å¼€å¤´çš„å¤´ä¿¡æ¯å­—æ®µã€‚</p><h4 id="_2-1-2-éç®€å•è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#_2-1-2-éç®€å•è¯·æ±‚" aria-hidden="true">#</a> 2.1.2 <strong>éç®€å•è¯·æ±‚</strong></h4><p>éç®€å•è¯·æ±‚æ˜¯é‚£ç§å¯¹æœåŠ¡å™¨æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯ <code>PUT</code> æˆ– <code>DELETE</code>ï¼Œæˆ– <code>Content-Type</code> å€¼ä¸º <code>application/json</code>ã€‚æµè§ˆå™¨ä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå‘é€ä¸€æ¬¡ HTTP é¢„æ£€ <code>OPTIONS</code> è¯·æ±‚ï¼Œå…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº› HTTP è¯·æ±‚æ–¹æ³•å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰å¾—åˆ°è‚¯å®šç­”å¤ï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„ <code>XHR</code> è¯·æ±‚ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p><h3 id="_2-2-è·¨åŸŸ" tabindex="-1"><a class="header-anchor" href="#_2-2-è·¨åŸŸ" aria-hidden="true">#</a> 2.2 è·¨åŸŸ</h3><p>åœ¨æµè§ˆå™¨ä¸Šå½“å‰è®¿é—®çš„ç½‘ç«™å‘å¦ä¸€ä¸ªç½‘ç«™å‘é€è¯·æ±‚è·å–æ•°æ®çš„è¿‡ç¨‹å°±æ˜¯<strong>è·¨åŸŸè¯·æ±‚</strong>ã€‚</p><p>è·¨åŸŸæ˜¯æµè§ˆå™¨çš„åŒæºç­–ç•¥å†³å®šçš„ï¼Œæ˜¯ä¸€ä¸ªé‡è¦çš„æµè§ˆå™¨å®‰å…¨ç­–ç•¥ï¼Œç”¨äºé™åˆ¶ä¸€ä¸ª originçš„æ–‡æ¡£æˆ–è€…å®ƒåŠ è½½çš„è„šæœ¬ä¸å¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©é˜»éš”æ¶æ„æ–‡æ¡£ï¼Œå‡å°‘å¯èƒ½è¢«æ”»å‡»çš„åª’ä»‹ï¼Œå¯ä»¥ä½¿ç”¨ CORSé…ç½®è§£é™¤è¿™ä¸ªé™åˆ¶ã€‚</p><p>å…³äºè·¨åŸŸç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šè§£é‡Šï¼Œè¿™é‡Œå°±ä¸å•°å—¦ï¼Œä¹Ÿå¯ä»¥ç›´æ¥çœ‹ MDN çš„æµè§ˆå™¨çš„åŒæºç­–ç•¥æ–‡æ¡£è¿›ä¸€æ­¥äº†è§£ï¼Œè¿™é‡Œå°±åˆ—ä¸¾å‡ ä¸ªåŒæºå’Œä¸åŒå…ƒçš„ä¾‹å­ï¼Œç›¸ä¿¡ç¨‹åºå‘˜éƒ½èƒ½çœ‹å¾—æ‡‚ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åŒæºçš„ä¾‹å­</span>
http://example.com/app1/index.html  <span class="token comment"># åªæ˜¯è·¯å¾„ä¸åŒ</span>
http://example.com/app2/index.html

http://Example.com:80  <span class="token comment"># åªæ˜¯å¤§å°å†™å·®å¼‚</span>
http://example.com

<span class="token comment"># ä¸åŒæºçš„ä¾‹å­</span>
http://example.com/app1   <span class="token comment"># åè®®ä¸åŒ</span>
https://example.com/app2

http://example.com        <span class="token comment"># host ä¸åŒ</span>
http://www.example.com
http://myapp.example.com

http://example.com        <span class="token comment"># ç«¯å£ä¸åŒ</span>
http://example.com:8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" tabindex="-1"><a class="header-anchor" href="#_2-3-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" aria-hidden="true">#</a> 2.3 æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h3><p>åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰å¯¹åº”çš„æ˜¯æ­£å‘ä»£ç†ï¼ˆForward Proxyï¼‰ï¼Œä»–ä»¬çš„åŒºåˆ«ï¼š</p><p><strong>æ­£å‘ä»£ç†ï¼š</strong> ä¸€èˆ¬çš„è®¿é—®æµç¨‹æ˜¯å®¢æˆ·ç«¯ç›´æ¥å‘ç›®æ ‡æœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶è·å–å†…å®¹ï¼Œä½¿ç”¨æ­£å‘ä»£ç†åï¼Œå®¢æˆ·ç«¯æ”¹ä¸ºå‘ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¹¶æŒ‡å®šç›®æ ‡æœåŠ¡å™¨ï¼ˆåŸå§‹æœåŠ¡å™¨ï¼‰ï¼Œç„¶åç”±ä»£ç†æœåŠ¡å™¨å’ŒåŸå§‹æœåŠ¡å™¨é€šä¿¡ï¼Œè½¬äº¤è¯·æ±‚å¹¶è·å¾—çš„å†…å®¹ï¼Œå†è¿”å›ç»™å®¢æˆ·ç«¯ã€‚æ­£å‘ä»£ç†éšè—äº†çœŸå®çš„å®¢æˆ·ç«¯ï¼Œä¸ºå®¢æˆ·ç«¯æ”¶å‘è¯·æ±‚ï¼Œä½¿çœŸå®å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨ä¸å¯è§ï¼›</p><p>ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ ğŸŒ°ï¼Œä½ çš„æµè§ˆå™¨æ— æ³•ç›´æ¥è®¿é—®è°·å“¥ï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡ä¸€ä¸ªä»£ç†æœåŠ¡å™¨æ¥å¸®åŠ©ä½ è®¿é—®è°·å“¥ï¼Œé‚£ä¹ˆè¿™ä¸ªæœåŠ¡å™¨å°±å«æ­£å‘ä»£ç†ã€‚</p><p><strong>åå‘ä»£ç†ï¼š</strong> ä¸ä¸€èˆ¬è®¿é—®æµç¨‹ç›¸æ¯”ï¼Œä½¿ç”¨åå‘ä»£ç†åï¼Œç›´æ¥æ”¶åˆ°è¯·æ±‚çš„æœåŠ¡å™¨æ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸ŠçœŸæ­£è¿›è¡Œå¤„ç†çš„æœåŠ¡å™¨ï¼Œå¾—åˆ°çš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚åå‘ä»£ç†éšè—äº†çœŸå®çš„æœåŠ¡å™¨ï¼Œä¸ºæœåŠ¡å™¨æ”¶å‘è¯·æ±‚ï¼Œä½¿çœŸå®æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯ä¸å¯è§ã€‚ä¸€èˆ¬åœ¨å¤„ç†è·¨åŸŸè¯·æ±‚çš„æ—¶å€™æ¯”è¾ƒå¸¸ç”¨ã€‚ç°åœ¨åŸºæœ¬ä¸Šæ‰€æœ‰çš„å¤§å‹ç½‘ç«™éƒ½è®¾ç½®äº†åå‘ä»£ç†ã€‚</p><p>ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ ğŸŒ°ï¼Œå»é¥­åº—åƒé¥­ï¼Œå¯ä»¥ç‚¹å·èœã€ç²¤èœã€æ±Ÿæµ™èœï¼Œé¥­åº—ä¹Ÿåˆ†åˆ«æœ‰ä¸‰ä¸ªèœç³»çš„å¨å¸ˆ ğŸ‘¨â€ğŸ³ï¼Œä½†æ˜¯ä½ ä½œä¸ºé¡¾å®¢ä¸ç”¨ç®¡å“ªä¸ªå¨å¸ˆç»™ä½ åšçš„èœï¼Œåªç”¨ç‚¹èœå³å¯ï¼Œå°äºŒå°†ä½ èœå•ä¸­çš„èœåˆ†é…ç»™ä¸åŒçš„å¨å¸ˆæ¥å…·ä½“å¤„ç†ï¼Œé‚£ä¹ˆè¿™ä¸ªå°äºŒå°±æ˜¯åå‘ä»£ç†æœåŠ¡å™¨ã€‚</p><p><strong>ç®€å•çš„è¯´ï¼Œä¸€èˆ¬ç»™å®¢æˆ·ç«¯åšä»£ç†çš„éƒ½æ˜¯æ­£å‘ä»£ç†ï¼Œç»™æœåŠ¡å™¨åšä»£ç†çš„å°±æ˜¯åå‘ä»£ç†ã€‚</strong></p><p>æ­£å‘ä»£ç†å’Œåå‘ä»£ç†ä¸»è¦çš„åŸç†åŒºåˆ«å¯ä»¥å‚è§ä¸‹å›¾ï¼š</p><figure><img src="/assets/image-20220724222601079-l_4JFx1V.png" alt="image-20220724222601079" tabindex="0" loading="lazy"><figcaption>image-20220724222601079</figcaption></figure><figure><img src="/assets/image-20220724222610707-EdX54tCW.png" alt="image-20220724222610707" tabindex="0" loading="lazy"><figcaption>image-20220724222610707</figcaption></figure><h3 id="_2-4-è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#_2-4-è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> 2.4 è´Ÿè½½å‡è¡¡</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å‘é€å¤šä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†å¯èƒ½è¦æ“ä½œä¸€äº›èµ„æºæ¯”å¦‚æ•°æ®åº“ã€é™æ€èµ„æºç­‰ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæ¯•åï¼Œå†å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>è¿™ç§æ¨¡å¼å¯¹äºæ—©æœŸçš„ç³»ç»Ÿæ¥è¯´ï¼ŒåŠŸèƒ½è¦æ±‚ä¸å¤æ‚ï¼Œä¸”å¹¶å‘è¯·æ±‚ç›¸å¯¹è¾ƒå°‘çš„æƒ…å†µä¸‹è¿˜èƒ½èƒœä»»ï¼Œæˆæœ¬ä¹Ÿä½ã€‚éšç€ä¿¡æ¯æ•°é‡ä¸æ–­å¢é•¿ï¼Œè®¿é—®é‡å’Œæ•°æ®é‡é£é€Ÿå¢é•¿ï¼Œä»¥åŠç³»ç»Ÿä¸šåŠ¡å¤æ‚åº¦æŒç»­å¢åŠ ï¼Œè¿™ç§åšæ³•å·²æ— æ³•æ»¡è¶³è¦æ±‚ï¼Œå¹¶å‘é‡ç‰¹åˆ«å¤§æ—¶ï¼ŒæœåŠ¡å™¨å®¹æ˜“å´©ã€‚</p><p>å¾ˆæ˜æ˜¾è¿™æ˜¯ç”±äºæœåŠ¡å™¨æ€§èƒ½çš„ç“¶é¢ˆé€ æˆçš„é—®é¢˜ï¼Œé™¤äº†å †æœºå™¨ä¹‹å¤–ï¼Œæœ€é‡è¦çš„åšæ³•å°±æ˜¯è´Ÿè½½å‡è¡¡ã€‚</p><p>è¯·æ±‚çˆ†å‘å¼å¢é•¿çš„æƒ…å†µä¸‹ï¼Œå•ä¸ªæœºå™¨æ€§èƒ½å†å¼ºåŠ²ä¹Ÿæ— æ³•æ»¡è¶³è¦æ±‚äº†ï¼Œè¿™ä¸ªæ—¶å€™é›†ç¾¤çš„æ¦‚å¿µäº§ç”Ÿäº†ï¼Œå•ä¸ªæœåŠ¡å™¨è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªæœåŠ¡å™¨ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†è´Ÿè½½åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œè¿™å°±æ˜¯<strong>è´Ÿè½½å‡è¡¡</strong>ï¼Œæ ¸å¿ƒæ˜¯ã€Œåˆ†æ‘Šå‹åŠ›ã€ã€‚Nginx å®ç°è´Ÿè½½å‡è¡¡ï¼Œä¸€èˆ¬æ¥è¯´æŒ‡çš„æ˜¯å°†è¯·æ±‚è½¬å‘ç»™æœåŠ¡å™¨é›†ç¾¤ã€‚</p><p>ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ ğŸŒ°ï¼Œæ™šé«˜å³°ä¹˜ååœ°é“çš„æ—¶å€™ï¼Œå…¥ç«™å£ç»å¸¸ä¼šæœ‰åœ°é“å·¥ä½œäººå‘˜å¤§å–‡å­â€œè¯·èµ° B å£ï¼ŒB å£äººå°‘è½¦ç©º....â€ï¼Œè¿™ä¸ªå·¥ä½œäººå‘˜çš„ä½œç”¨å°±æ˜¯è´Ÿè½½å‡è¡¡ã€‚</p><figure><img src="/assets/image-20220724225746333-zEFaaIWr.png" alt="image-20220724225746333" tabindex="0" loading="lazy"><figcaption>image-20220724225746333</figcaption></figure><h3 id="_2-5-åŠ¨é™åˆ†ç¦»" tabindex="-1"><a class="header-anchor" href="#_2-5-åŠ¨é™åˆ†ç¦»" aria-hidden="true">#</a> 2.5 åŠ¨é™åˆ†ç¦»</h3><p>ä¸ºäº†åŠ å¿«ç½‘ç«™çš„è§£æé€Ÿåº¦ï¼Œå¯ä»¥æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢ç”±ä¸åŒçš„æœåŠ¡å™¨æ¥è§£æï¼ŒåŠ å¿«è§£æé€Ÿåº¦ï¼Œé™ä½åŸæ¥å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ã€‚</p><figure><img src="/assets/image-20220724225816748-gtr9pIHm.png" alt="image-20220724225816748" tabindex="0" loading="lazy"><figcaption>image-20220724225816748</figcaption></figure><p>ä¸€èˆ¬æ¥è¯´ï¼Œéƒ½éœ€è¦å°†åŠ¨æ€èµ„æºå’Œé™æ€èµ„æºåˆ†å¼€ï¼Œç”±äº Nginx çš„é«˜å¹¶å‘å’Œé™æ€èµ„æºç¼“å­˜ç­‰ç‰¹æ€§ï¼Œç»å¸¸å°†é™æ€èµ„æºéƒ¨ç½²åœ¨ Nginx ä¸Šã€‚å¦‚æœè¯·æ±‚çš„æ˜¯é™æ€èµ„æºï¼Œç›´æ¥åˆ°é™æ€èµ„æºç›®å½•è·å–èµ„æºï¼Œå¦‚æœæ˜¯åŠ¨æ€èµ„æºçš„è¯·æ±‚ï¼Œåˆ™åˆ©ç”¨åå‘ä»£ç†çš„åŸç†ï¼ŒæŠŠè¯·æ±‚è½¬å‘ç»™å¯¹åº”åå°åº”ç”¨å»å¤„ç†ï¼Œä»è€Œå®ç°åŠ¨é™åˆ†ç¦»ã€‚</p><p>ä½¿ç”¨å‰åç«¯åˆ†ç¦»åï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦æå‡é™æ€èµ„æºçš„è®¿é—®é€Ÿåº¦ï¼Œå³ä½¿åŠ¨æ€æœåŠ¡ä¸å¯ç”¨ï¼Œé™æ€èµ„æºçš„è®¿é—®ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚</p><h2 id="_3-nginx-å¿«é€Ÿå®‰è£…" tabindex="-1"><a class="header-anchor" href="#_3-nginx-å¿«é€Ÿå®‰è£…" aria-hidden="true">#</a> 3. Nginx å¿«é€Ÿå®‰è£…</h2><h3 id="_3-1-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_3-1-å®‰è£…" aria-hidden="true">#</a> 3.1 å®‰è£…</h3><p>æˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum list <span class="token operator">|</span> <span class="token function">grep</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="/assets/image-20220805202351667-8zWnreM8.png" alt="image-20220805202351667" tabindex="0" loading="lazy"><figcaption>image-20220805202351667</figcaption></figure><p>ç„¶å</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¥å®‰è£… Nginxï¼Œç„¶åæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­ <code>nginx -v</code> å°±å¯ä»¥çœ‹åˆ°å…·ä½“çš„ Nginx ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¹Ÿå°±å®‰è£…å®Œæ¯•äº†ã€‚</p><figure><img src="/assets/image-20220805202424523-NpXjf7pe.png" alt="image-20220805202424523" tabindex="0" loading="lazy"><figcaption>image-20220805202424523</figcaption></figure><h3 id="_3-2-ç›¸å…³æ–‡ä»¶å¤¹" tabindex="-1"><a class="header-anchor" href="#_3-2-ç›¸å…³æ–‡ä»¶å¤¹" aria-hidden="true">#</a> 3.2 ç›¸å…³æ–‡ä»¶å¤¹</h3><p>ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>rpm -ql nginx</code> æ¥æŸ¥çœ‹ Nginx è¢«å®‰è£…åˆ°äº†ä»€ä¹ˆåœ°æ–¹ï¼Œæœ‰å“ªäº›ç›¸å…³ç›®å½•ï¼Œå…¶ä¸­ä½äº <code>/etc</code> ç›®å½•ä¸‹çš„ä¸»è¦æ˜¯é…ç½®æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€äº›æ–‡ä»¶è§ä¸‹å›¾ï¼š</p><figure><img src="/assets/image-20220805202448958-77l36sJ4.png" alt="image-20220805202448958" tabindex="0" loading="lazy"><figcaption>image-20220805202448958</figcaption></figure><p>ä¸»è¦å…³æ³¨çš„æ–‡ä»¶å¤¹æœ‰ä¸¤ä¸ªï¼š</p><ol><li><code>/etc/nginx/conf.d/</code> æ–‡ä»¶å¤¹ï¼Œæ˜¯æˆ‘ä»¬è¿›è¡Œå­é…ç½®çš„é…ç½®é¡¹å­˜æ”¾å¤„ï¼Œ<code>/etc/nginx/nginx.conf</code> ä¸»é…ç½®æ–‡ä»¶ä¼šé»˜è®¤æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰å­é…ç½®é¡¹éƒ½å¼•å…¥ï¼›</li><li><code>/usr/share/nginx/html/</code> æ–‡ä»¶å¤¹ï¼Œé€šå¸¸é™æ€æ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„ä¹ æƒ¯æ”¾å…¶ä»–åœ°æ–¹ï¼›</li></ol><h3 id="_3-3-è·‘èµ·æ¥åº·åº·" tabindex="-1"><a class="header-anchor" href="#_3-3-è·‘èµ·æ¥åº·åº·" aria-hidden="true">#</a> 3.3 è·‘èµ·æ¥åº·åº·</h3><p>å®‰è£…ä¹‹åå¼€å¯ Nginxï¼Œå¦‚æœç³»ç»Ÿå¼€å¯äº†é˜²ç«å¢™ï¼Œé‚£ä¹ˆéœ€è¦è®¾ç½®ä¸€ä¸‹åœ¨é˜²ç«å¢™ä¸­åŠ å…¥éœ€è¦å¼€æ”¾çš„ç«¯å£ï¼Œä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„é˜²ç«å¢™æ“ä½œï¼ˆæ²¡å¼€å¯çš„è¯ä¸ç”¨ç®¡è¿™ä¸ªï¼‰ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl start firewalld  <span class="token comment"># å¼€å¯é˜²ç«å¢™</span>
systemctl stop firewalld   <span class="token comment"># å…³é—­é˜²ç«å¢™</span>
systemctl status firewalld <span class="token comment"># æŸ¥çœ‹é˜²ç«å¢™å¼€å¯çŠ¶æ€ï¼Œæ˜¾ç¤ºrunningåˆ™æ˜¯æ­£åœ¨è¿è¡Œ</span>
firewall-cmd <span class="token parameter variable">--reload</span>      <span class="token comment"># é‡å¯é˜²ç«å¢™ï¼Œæ°¸ä¹…æ‰“å¼€ç«¯å£éœ€è¦reloadä¸€ä¸‹</span>

<span class="token comment"># æ·»åŠ å¼€å¯ç«¯å£ï¼Œ--permanentè¡¨ç¤ºæ°¸ä¹…æ‰“å¼€ï¼Œä¸åŠ æ˜¯ä¸´æ—¶æ‰“å¼€é‡å¯ä¹‹åå¤±æ•ˆ</span>
firewall-cmd <span class="token parameter variable">--permanent</span> <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">8888</span>/tcp

<span class="token comment"># æŸ¥çœ‹é˜²ç«å¢™ï¼Œæ·»åŠ çš„ç«¯å£ä¹Ÿå¯ä»¥çœ‹åˆ°</span>
firewall-cmd --list-all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åè®¾ç½® Nginx çš„å¼€æœºå¯åŠ¨ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯åŠ¨ Nginx ï¼ˆå…¶ä»–å‘½ä»¤åé¢æœ‰è¯¦ç»†è®²è§£ï¼‰ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl start nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åè®¿é—®ä½ çš„ IPï¼Œè¿™æ—¶å€™å°±å¯ä»¥çœ‹åˆ° Nginx çš„æ¬¢è¿é¡µé¢äº†ï½ <code>Welcome to nginxï¼</code> ğŸ‘</p><h2 id="_4-nginx-æ“ä½œå¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_4-nginx-æ“ä½œå¸¸ç”¨å‘½ä»¤" aria-hidden="true">#</a> 4. Nginx æ“ä½œå¸¸ç”¨å‘½ä»¤</h2><p>Nginx çš„å‘½ä»¤åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ <code>nginx -h</code> å°±å¯ä»¥çœ‹åˆ°å®Œæ•´çš„å‘½ä»¤ï¼Œè¿™é‡Œåˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>nginx <span class="token parameter variable">-s</span> reload  <span class="token comment"># å‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œçƒ­é‡å¯</span>
nginx <span class="token parameter variable">-s</span> reopen	 <span class="token comment"># é‡å¯ Nginx</span>
nginx <span class="token parameter variable">-s</span> stop    <span class="token comment"># å¿«é€Ÿå…³é—­</span>
nginx <span class="token parameter variable">-s</span> quit    <span class="token comment"># ç­‰å¾…å·¥ä½œè¿›ç¨‹å¤„ç†å®Œæˆåå…³é—­</span>
nginx <span class="token parameter variable">-T</span>         <span class="token comment"># æŸ¥çœ‹å½“å‰ Nginx æœ€ç»ˆçš„é…ç½®</span>
nginx <span class="token parameter variable">-t</span> <span class="token parameter variable">-c</span> <span class="token operator">&lt;</span>é…ç½®è·¯å¾„<span class="token operator">&gt;</span>    <span class="token comment"># æ£€æŸ¥é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼Œå¦‚æœå·²ç»åœ¨é…ç½®ç›®å½•ï¼Œåˆ™ä¸éœ€è¦-c</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>systemctl</code> æ˜¯ Linux ç³»ç»Ÿåº”ç”¨ç®¡ç†å·¥å…· <code>systemd</code> çš„ä¸»å‘½ä»¤ï¼Œç”¨äºç®¡ç†ç³»ç»Ÿï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥å¯¹ Nginx è¿›è¡Œç®¡ç†ï¼Œç›¸å…³å‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl start nginx    <span class="token comment"># å¯åŠ¨ Nginx</span>
systemctl stop nginx     <span class="token comment"># åœæ­¢ Nginx</span>
systemctl restart nginx  <span class="token comment"># é‡å¯ Nginx</span>
systemctl reload nginx   <span class="token comment"># é‡æ–°åŠ è½½ Nginxï¼Œç”¨äºä¿®æ”¹é…ç½®å</span>
systemctl <span class="token builtin class-name">enable</span> nginx   <span class="token comment"># è®¾ç½®å¼€æœºå¯åŠ¨ Nginx</span>
systemctl disable nginx  <span class="token comment"># å…³é—­å¼€æœºå¯åŠ¨ Nginx</span>
systemctl status nginx   <span class="token comment"># æŸ¥çœ‹ Nginx è¿è¡ŒçŠ¶æ€</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-nginx-é…ç½®è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_5-nginx-é…ç½®è¯­æ³•" aria-hidden="true">#</a> 5. Nginx é…ç½®è¯­æ³•</h2><p>å°±è·Ÿå‰é¢æ–‡ä»¶ä½œç”¨è®²è§£çš„å›¾æ‰€ç¤ºï¼ŒNginx çš„ä¸»é…ç½®æ–‡ä»¶æ˜¯ <code>/etc/nginx/nginx.conf</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>cat -n nginx.conf</code> æ¥æŸ¥çœ‹é…ç½®ã€‚</p><p><code>nginx.conf</code> ç»“æ„å›¾å¯ä»¥è¿™æ ·æ¦‚æ‹¬ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>main        <span class="token comment"># å…¨å±€é…ç½®ï¼Œå¯¹å…¨å±€ç”Ÿæ•ˆ</span>
â”œâ”€â”€ events  <span class="token comment"># é…ç½®å½±å“ Nginx æœåŠ¡å™¨æˆ–ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥</span>
â”œâ”€â”€ http    <span class="token comment"># é…ç½®ä»£ç†ï¼Œç¼“å­˜ï¼Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®</span>
â”‚   â”œâ”€â”€ upstream <span class="token comment"># é…ç½®åç«¯æœåŠ¡å™¨å…·ä½“åœ°å€ï¼Œè´Ÿè½½å‡è¡¡é…ç½®ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†</span>
â”‚   â”œâ”€â”€ server   <span class="token comment"># é…ç½®è™šæ‹Ÿä¸»æœºçš„ç›¸å…³å‚æ•°ï¼Œä¸€ä¸ª http å—ä¸­å¯ä»¥æœ‰å¤šä¸ª server å—</span>
â”‚   â”œâ”€â”€ server
â”‚   â”‚   â”œâ”€â”€ location  <span class="token comment"># server å—å¯ä»¥åŒ…å«å¤šä¸ª location å—ï¼Œlocation æŒ‡ä»¤ç”¨äºåŒ¹é… uri</span>
â”‚   â”‚   â”œâ”€â”€ location
â”‚   â”‚   â””â”€â”€ <span class="token punctuation">..</span>.
â”‚   â””â”€â”€ <span class="token punctuation">..</span>.
â””â”€â”€ <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€ä¸ª Nginx é…ç½®æ–‡ä»¶çš„ç»“æ„å°±åƒ <code>nginx.conf</code> æ˜¾ç¤ºçš„é‚£æ ·ï¼Œé…ç½®æ–‡ä»¶çš„è¯­æ³•è§„åˆ™ï¼š</p><ol><li>é…ç½®æ–‡ä»¶ç”±æŒ‡ä»¤ä¸æŒ‡ä»¤å—æ„æˆï¼›</li><li>æ¯æ¡æŒ‡ä»¤ä»¥ <code>;</code> åˆ†å·ç»“å°¾ï¼ŒæŒ‡ä»¤ä¸å‚æ•°é—´ä»¥ç©ºæ ¼ç¬¦å·åˆ†éš”ï¼›</li><li>æŒ‡ä»¤å—ä»¥ <code>{}</code> å¤§æ‹¬å·å°†å¤šæ¡æŒ‡ä»¤ç»„ç»‡åœ¨ä¸€èµ·ï¼›</li><li><code>include</code> è¯­å¥å…è®¸ç»„åˆå¤šä¸ªé…ç½®æ–‡ä»¶ä»¥æå‡å¯ç»´æŠ¤æ€§ï¼›</li><li>ä½¿ç”¨ <code>#</code> ç¬¦å·æ·»åŠ æ³¨é‡Šï¼Œæé«˜å¯è¯»æ€§ï¼›</li><li>ä½¿ç”¨ <code>$</code> ç¬¦å·ä½¿ç”¨å˜é‡ï¼›</li><li>éƒ¨åˆ†æŒ‡ä»¤çš„å‚æ•°æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼›</li></ol><h3 id="_5-1-å…¸å‹é…ç½®" tabindex="-1"><a class="header-anchor" href="#_5-1-å…¸å‹é…ç½®" aria-hidden="true">#</a> 5.1 å…¸å‹é…ç½®</h3><p>Nginx çš„å…¸å‹é…ç½®ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">user</span>  nginx</span><span class="token punctuation">;</span>                        <span class="token comment"># è¿è¡Œç”¨æˆ·ï¼Œé»˜è®¤å³æ˜¯nginxï¼Œå¯ä»¥ä¸è¿›è¡Œè®¾ç½®</span>
<span class="token directive"><span class="token keyword">worker_processes</span>  <span class="token number">1</span></span><span class="token punctuation">;</span>                <span class="token comment"># Nginx è¿›ç¨‹æ•°ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºå’Œ CPU æ ¸æ•°ä¸€æ ·</span>
<span class="token directive"><span class="token keyword">error_log</span>  /var/log/nginx/error.log warn</span><span class="token punctuation">;</span>   <span class="token comment"># Nginx çš„é”™è¯¯æ—¥å¿—å­˜æ”¾ç›®å½•</span>
<span class="token directive"><span class="token keyword">pid</span>        /var/run/nginx.pid</span><span class="token punctuation">;</span>      <span class="token comment"># Nginx æœåŠ¡å¯åŠ¨æ—¶çš„ pid å­˜æ”¾ä½ç½®</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">use</span> epoll</span><span class="token punctuation">;</span>     <span class="token comment"># ä½¿ç”¨epollçš„I/Oæ¨¡å‹(å¦‚æœä½ ä¸çŸ¥é“Nginxè¯¥ä½¿ç”¨å“ªç§è½®è¯¢æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„)</span>
    <span class="token directive"><span class="token keyword">worker_connections</span> <span class="token number">1024</span></span><span class="token punctuation">;</span>   <span class="token comment"># æ¯ä¸ªè¿›ç¨‹å…è®¸æœ€å¤§å¹¶å‘æ•°</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>   <span class="token comment"># é…ç½®ä½¿ç”¨æœ€é¢‘ç¹çš„éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜ã€æ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½åœ¨è¿™é‡Œè®¾ç½®</span>
    <span class="token comment"># è®¾ç½®æ—¥å¿—æ¨¡å¼</span>
    <span class="token directive"><span class="token keyword">log_format</span>  main  <span class="token string">&#39;<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> &quot;<span class="token variable">$request</span>&quot; &#39;</span>
                      <span class="token string">&#39;<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> &quot;<span class="token variable">$http_referer</span>&quot; &#39;</span>
                      <span class="token string">&#39;&quot;<span class="token variable">$http_user_agent</span>&quot; &quot;<span class="token variable">$http_x_forwarded_for</span>&quot;&#39;</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">access_log</span>  /var/log/nginx/access.log  main</span><span class="token punctuation">;</span>   <span class="token comment"># Nginxè®¿é—®æ—¥å¿—å­˜æ”¾ä½ç½®</span>

    <span class="token directive"><span class="token keyword">sendfile</span>            <span class="token boolean">on</span></span><span class="token punctuation">;</span>   <span class="token comment"># å¼€å¯é«˜æ•ˆä¼ è¾“æ¨¡å¼</span>
    <span class="token directive"><span class="token keyword">tcp_nopush</span>          <span class="token boolean">on</span></span><span class="token punctuation">;</span>   <span class="token comment"># å‡å°‘ç½‘ç»œæŠ¥æ–‡æ®µçš„æ•°é‡</span>
    <span class="token directive"><span class="token keyword">tcp_nodelay</span>         <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">keepalive_timeout</span>   <span class="token number">65</span></span><span class="token punctuation">;</span>   <span class="token comment"># ä¿æŒè¿æ¥çš„æ—¶é—´ï¼Œä¹Ÿå«è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’</span>
    <span class="token directive"><span class="token keyword">types_hash_max_size</span> <span class="token number">2048</span></span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">include</span>             /etc/nginx/mime.types</span><span class="token punctuation">;</span>      <span class="token comment"># æ–‡ä»¶æ‰©å±•åä¸ç±»å‹æ˜ å°„è¡¨</span>
    <span class="token directive"><span class="token keyword">default_type</span>        application/octet-stream</span><span class="token punctuation">;</span>   <span class="token comment"># é»˜è®¤æ–‡ä»¶ç±»å‹</span>

    <span class="token directive"><span class="token keyword">include</span> /etc/nginx/conf.d/*.conf</span><span class="token punctuation">;</span>   <span class="token comment"># åŠ è½½å­é…ç½®é¡¹</span>
    
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    	<span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>       <span class="token comment"># é…ç½®ç›‘å¬çš„ç«¯å£</span>
    	<span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>    <span class="token comment"># é…ç½®çš„åŸŸå</span>
    	
    	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    		<span class="token directive"><span class="token keyword">root</span>   /usr/share/nginx/html</span><span class="token punctuation">;</span>  <span class="token comment"># ç½‘ç«™æ ¹ç›®å½•</span>
    		<span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>   <span class="token comment"># é»˜è®¤é¦–é¡µæ–‡ä»¶</span>
    		<span class="token directive"><span class="token keyword">deny</span> 172.168.22.11</span><span class="token punctuation">;</span>   <span class="token comment"># ç¦æ­¢è®¿é—®çš„ipåœ°å€ï¼Œå¯ä»¥ä¸ºall</span>
    		allow 172.168.33.44ï¼› <span class="token comment"># å…è®¸è®¿é—®çš„ipåœ°å€ï¼Œå¯ä»¥ä¸ºall</span>
    	<span class="token punctuation">}</span>
    	
    	<span class="token directive"><span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html</span><span class="token punctuation">;</span>  <span class="token comment"># é»˜è®¤50xå¯¹åº”çš„è®¿é—®é¡µé¢</span>
    	<span class="token directive"><span class="token keyword">error_page</span> <span class="token number">400</span> <span class="token number">404</span> error.html</span><span class="token punctuation">;</span>   <span class="token comment"># åŒä¸Š</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>server å—å¯ä»¥åŒ…å«å¤šä¸ª location å—ï¼Œlocation æŒ‡ä»¤ç”¨äºåŒ¹é… uriï¼Œè¯­æ³•ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> [ = | ~ | ~* | ^~] uri</span> <span class="token punctuation">{</span>
	...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŒ‡ä»¤åé¢ï¼š</p><ol><li><code>=</code> ç²¾ç¡®åŒ¹é…è·¯å¾„ï¼Œç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œä¸å†è¿›è¡Œåç»­çš„æŸ¥æ‰¾ï¼›</li><li><code>^~</code> ç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uriï¼› å‰ï¼Œè¡¨ç¤ºå¦‚æœè¯¥ç¬¦å·åé¢çš„å­—ç¬¦æ˜¯æœ€ä½³åŒ¹é…ï¼Œé‡‡ç”¨è¯¥è§„åˆ™ï¼Œä¸å†è¿›è¡Œåç»­çš„æŸ¥æ‰¾ï¼›</li><li><code>~</code> è¡¨ç¤ºç”¨è¯¥ç¬¦å·åé¢çš„æ­£åˆ™å»åŒ¹é…è·¯å¾„ï¼ŒåŒºåˆ†å¤§å°å†™ï¼›</li><li><code>~*</code> è¡¨ç¤ºç”¨è¯¥ç¬¦å·åé¢çš„æ­£åˆ™å»åŒ¹é…è·¯å¾„ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚è·Ÿ <code>~</code> ä¼˜å…ˆçº§éƒ½æ¯”è¾ƒä½ï¼Œå¦‚æœ‰å¤šä¸ªlocationçš„æ­£åˆ™èƒ½åŒ¹é…çš„è¯ï¼Œåˆ™ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ€é•¿çš„é‚£ä¸ªï¼›</li></ol><p>å¦‚æœ uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»è¦æœ‰ <code>~</code> æˆ– <code>~*</code> æ ‡å¿—ã€‚</p><h3 id="_5-2-å…¨å±€å˜é‡" tabindex="-1"><a class="header-anchor" href="#_5-2-å…¨å±€å˜é‡" aria-hidden="true">#</a> 5.2 å…¨å±€å˜é‡</h3><p>Nginx æœ‰ä¸€äº›å¸¸ç”¨çš„å…¨å±€å˜é‡ï¼Œä½ å¯ä»¥åœ¨é…ç½®çš„ä»»ä½•ä½ç½®ä½¿ç”¨å®ƒä»¬ï¼Œå¦‚ä¸‹è¡¨ï¼š</p><table><thead><tr><th>å…¨å±€å˜é‡å</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>$host</code></td><td>è¯·æ±‚ä¿¡æ¯ä¸­çš„ <code>Host</code>ï¼Œå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰ <code>Host</code> è¡Œï¼Œåˆ™ç­‰äºè®¾ç½®çš„æœåŠ¡å™¨åï¼Œä¸åŒ…å«ç«¯å£</td></tr><tr><td><code>$request_method</code></td><td>å®¢æˆ·ç«¯è¯·æ±‚ç±»å‹ï¼Œå¦‚ <code>GET</code>ã€<code>POST</code></td></tr><tr><td><code>$remote_addr</code></td><td>å®¢æˆ·ç«¯çš„ <code>IP</code> åœ°å€</td></tr><tr><td><code>$args</code></td><td>è¯·æ±‚ä¸­çš„å‚æ•°</td></tr><tr><td><code>$arg_PARAMETER</code></td><td><code>GET</code> è¯·æ±‚ä¸­å˜é‡å PARAMETER å‚æ•°çš„å€¼ï¼Œä¾‹å¦‚ï¼š<code>$http_user_agent</code>(Uaer-Agent å€¼), <code>$http_referer</code>...</td></tr><tr><td><code>$content_length</code></td><td>è¯·æ±‚å¤´ä¸­çš„ <code>Content-length</code> å­—æ®µ</td></tr><tr><td><code>$http_user_agent</code></td><td>å®¢æˆ·ç«¯agentä¿¡æ¯</td></tr><tr><td><code>$http_cookie</code></td><td>å®¢æˆ·ç«¯cookieä¿¡æ¯</td></tr><tr><td><code>$remote_addr</code></td><td>å®¢æˆ·ç«¯çš„IPåœ°å€</td></tr><tr><td><code>$remote_port</code></td><td>å®¢æˆ·ç«¯çš„ç«¯å£</td></tr><tr><td><code>$http_user_agent</code></td><td>å®¢æˆ·ç«¯agentä¿¡æ¯</td></tr><tr><td><code>$server_protocol</code></td><td>è¯·æ±‚ä½¿ç”¨çš„åè®®ï¼Œå¦‚ <code>HTTP/1.0</code>ã€<code>HTTP/1.1</code></td></tr><tr><td><code>$server_addr</code></td><td>æœåŠ¡å™¨åœ°å€</td></tr><tr><td><code>$server_name</code></td><td>æœåŠ¡å™¨åç§°</td></tr><tr><td><code>$server_port</code></td><td>æœåŠ¡å™¨çš„ç«¯å£å·</td></tr><tr><td><code>$scheme</code></td><td>HTTP æ–¹æ³•ï¼ˆå¦‚httpï¼Œhttpsï¼‰</td></tr></tbody></table><p>è¿˜æœ‰æ›´å¤šçš„å†…ç½®é¢„å®šä¹‰å˜é‡ï¼Œå¯ä»¥ç›´æ¥æœç´¢å…³é”®å­—ã€Œnginxå†…ç½®é¢„å®šä¹‰å˜é‡ã€å¯ä»¥çœ‹åˆ°ä¸€å †åšå®¢å†™è¿™ä¸ªï¼Œè¿™äº›å˜é‡éƒ½å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨</p><h2 id="_6-è®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœº" tabindex="-1"><a class="header-anchor" href="#_6-è®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœº" aria-hidden="true">#</a> 6. è®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœº</h2><p>åœ¨æŸæŸäº‘ â˜ï¸ ä¸Šè´­ä¹°äº†åŸŸåä¹‹åï¼Œå°±å¯ä»¥é…ç½®è™šæ‹Ÿä¸»æœºäº†ï¼Œä¸€èˆ¬é…ç½®çš„è·¯å¾„åœ¨ <code>åŸŸåç®¡ç† -&gt; è§£æ -&gt; æ·»åŠ è®°å½•</code> ä¸­æ·»åŠ äºŒçº§åŸŸåï¼Œé…ç½®åæŸæŸäº‘ä¼šæŠŠäºŒçº§åŸŸåä¹Ÿè§£æåˆ°æˆ‘ä»¬é…ç½®çš„æœåŠ¡å™¨ IP ä¸Šï¼Œç„¶åæˆ‘ä»¬åœ¨ Nginx ä¸Šé…ç½®ä¸€ä¸‹è™šæ‹Ÿä¸»æœºçš„è®¿é—®ç›‘å¬ï¼Œå°±å¯ä»¥æ‹¿åˆ°ä»è¿™ä¸ªäºŒçº§åŸŸåè¿‡æ¥çš„è¯·æ±‚äº†ã€‚</p><figure><img src="/assets/image-20220724231052047-AqB2guSC.png" alt="image-20220724231052047" tabindex="0" loading="lazy"><figcaption>image-20220724231052047</figcaption></figure><p>ç°åœ¨æˆ‘è‡ªå·±çš„æœåŠ¡å™¨ä¸Šé…ç½®äº†ä¸€ä¸ª fe çš„äºŒçº§åŸŸåï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å¤–ç½‘è®¿é—® <code>fe.sherlocked93.club</code> çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨äº†ã€‚</p><p>ç”±äºé»˜è®¤é…ç½®æ–‡ä»¶ <code>/etc/nginx/nginx.conf</code> çš„ http æ¨¡å—ä¸­æœ‰ä¸€å¥ <code>include /etc/nginx/conf.d/*.conf</code> ä¹Ÿå°±æ˜¯è¯´ <code>conf.d</code> æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ <code>*.conf</code> æ–‡ä»¶éƒ½ä¼šä½œä¸ºå­é…ç½®é¡¹è¢«å¼•å…¥é…ç½®æ–‡ä»¶ä¸­ã€‚ä¸ºäº†ç»´æŠ¤æ–¹ä¾¿ï¼Œæˆ‘åœ¨ <code>/etc/nginx/conf.d</code> æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ª <code>fe.sherlocked93.club.conf</code> ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># /etc/nginx/conf.d/fe.sherlocked93.club.conf</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> fe.sherlocked93.club</span><span class="token punctuation">;</span>

	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">root</span>  /usr/share/nginx/html/fe</span><span class="token punctuation">;</span>
		<span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶ååœ¨ <code>/usr/share/nginx/html</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»º fe æ–‡ä»¶å¤¹ï¼Œæ–°å»ºæ–‡ä»¶ <code>index.html</code>ï¼Œå†…å®¹éšä¾¿å†™ç‚¹ï¼Œæ”¹å®Œ <code>nginx -s reload</code> é‡æ–°åŠ è½½ï¼Œæµè§ˆå™¨ä¸­è¾“å…¥ <code>fe.sherlocked93.club</code>ï¼Œå‘ç°ä»äºŒçº§åŸŸåå°±å¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬åˆšåˆšæ–°å»ºçš„ fe æ–‡ä»¶å¤¹ï¼š</p><figure><img src="/assets/image-20220724231559185-rgmKLcEJ.png" alt="image-20220724231559185" tabindex="0" loading="lazy"><figcaption>image-20220724231559185</figcaption></figure><h2 id="_7-é…ç½®åå‘ä»£ç†" tabindex="-1"><a class="header-anchor" href="#_7-é…ç½®åå‘ä»£ç†" aria-hidden="true">#</a> 7. é…ç½®åå‘ä»£ç†</h2><p>åå‘ä»£ç†æ˜¯å·¥ä½œä¸­æœ€å¸¸ç”¨çš„æœåŠ¡å™¨åŠŸèƒ½ï¼Œç»å¸¸è¢«ç”¨æ¥è§£å†³è·¨åŸŸé—®é¢˜ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•å®ç°åå‘ä»£ç†ã€‚</p><p>é¦–å…ˆè¿›å…¥ Nginx çš„ä¸»é…ç½®æ–‡ä»¶ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/nginx/nginx.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸ºäº†çœ‹èµ·æ¥æ–¹ä¾¿ï¼ŒæŠŠè¡Œå·æ˜¾ç¤ºå‡ºæ¥ <code>:set nu</code> ï¼ˆä¸ªäººä¹ æƒ¯ï¼‰ï¼Œç„¶åæˆ‘ä»¬å» <code>http</code> æ¨¡å—çš„ <code>server</code> å—ä¸­çš„ <code>location /</code>ï¼Œå¢åŠ ä¸€è¡Œå°†é»˜è®¤ç½‘å€é‡å®šå‘åˆ°æœ€å¤§å­¦ä¹ ç½‘ç«™ Bilibili çš„ <code>proxy_pass</code> é…ç½® ğŸ¤“ ï¼š</p><figure><img src="/assets/image-20220726200525259-rR0ejjU-.png" alt="image-20220726200525259" tabindex="0" loading="lazy"><figcaption>image-20220726200525259</figcaption></figure><p>æ”¹å®Œä¿å­˜é€€å‡ºï¼Œ<code>nginx -s reload</code> é‡æ–°åŠ è½½ï¼Œè¿›å…¥é»˜è®¤ç½‘å€ï¼Œé‚£ä¹ˆç°åœ¨å°±ç›´æ¥è·³è½¬åˆ° B ç«™äº†ï¼Œå®ç°äº†ä¸€ä¸ªç®€å•çš„ä»£ç†ã€‚</p><p>å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥å°†è¯·æ±‚è½¬å‘åˆ°æœ¬æœºå¦ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå¯ä»¥æ ¹æ®è®¿é—®çš„è·¯å¾„è·³è½¬åˆ°ä¸åŒç«¯å£çš„æœåŠ¡ä¸­ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬ç›‘å¬ <code>9001</code> ç«¯å£ï¼Œç„¶åæŠŠè®¿é—®ä¸åŒè·¯å¾„çš„è¯·æ±‚è¿›è¡Œåå‘ä»£ç†ï¼š</p><ol><li>æŠŠè®¿é—® <code>http://127.0.0.1:9001/edu</code> çš„è¯·æ±‚è½¬å‘åˆ° <code>http://127.0.0.1:8080</code></li><li>æŠŠè®¿é—® <code>http://127.0.0.1:9001/vod</code> çš„è¯·æ±‚è½¬å‘åˆ° <code>http://127.0.0.1:8081</code></li></ol><p>è¿™ç§è¦æ€ä¹ˆé…ç½®å‘¢ï¼Œé¦–å…ˆåŒæ ·æ‰“å¼€ä¸»é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨ http æ¨¡å—ä¸‹å¢åŠ ä¸€ä¸ª server å—ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">9001</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server_name</span> *.sherlocked93.club</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">location</span> ~ /edu/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8080</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token directive"><span class="token keyword">location</span> ~ /vod/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8081</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åå‘ä»£ç†è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æŒ‡ä»¤ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹ï¼š</p><ol><li><code>proxy_set_header</code>ï¼šåœ¨å°†å®¢æˆ·ç«¯è¯·æ±‚å‘é€ç»™åç«¯æœåŠ¡å™¨ä¹‹å‰ï¼Œæ›´æ”¹æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚å¤´ä¿¡æ¯ã€‚</li><li><code>proxy_connect_timeout</code>ï¼šé…ç½®Nginxä¸åç«¯ä»£ç†æœåŠ¡å™¨å°è¯•å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´ã€‚</li><li><code>proxy_read_timeout</code>ï¼šé…ç½®Nginxå‘åç«¯æœåŠ¡å™¨ç»„å‘å‡ºreadè¯·æ±‚åï¼Œç­‰å¾…ç›¸åº”çš„è¶…æ—¶æ—¶é—´ã€‚</li><li><code>proxy_send_timeout</code>ï¼šé…ç½®Nginxå‘åç«¯æœåŠ¡å™¨ç»„å‘å‡ºwriteè¯·æ±‚åï¼Œç­‰å¾…ç›¸åº”çš„è¶…æ—¶æ—¶é—´ã€‚</li><li><code>proxy_redirect</code>ï¼šç”¨äºä¿®æ”¹åç«¯æœåŠ¡å™¨è¿”å›çš„å“åº”å¤´ä¸­çš„Locationå’ŒRefreshã€‚</li></ol><h2 id="_8-è·¨åŸŸ-cors-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_8-è·¨åŸŸ-cors-é…ç½®" aria-hidden="true">#</a> 8. è·¨åŸŸ CORS é…ç½®</h2><p>å…³äºç®€å•è¯·æ±‚ã€éç®€å•è¯·æ±‚ã€è·¨åŸŸçš„æ¦‚å¿µï¼Œå‰é¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œè¿˜ä¸äº†è§£çš„å¯ä»¥çœ‹çœ‹å‰é¢çš„è®²è§£ã€‚ç°åœ¨å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸€ç»Ÿå¤©ä¸‹ï¼Œç»å¸¸æœ¬åœ°èµ·äº†å‰ç«¯æœåŠ¡ï¼Œéœ€è¦è®¿é—®ä¸åŒçš„åç«¯åœ°å€ï¼Œä¸å¯é¿å…é‡åˆ°è·¨åŸŸé—®é¢˜ã€‚</p><figure><img src="/assets/image-20220726201508633-VoGmOixl.png" alt="image-20220726201508633" tabindex="0" loading="lazy"><figcaption>image-20220726201508633</figcaption></figure><p>è¦è§£å†³è·¨åŸŸé—®é¢˜ï¼Œæˆ‘ä»¬æ¥åˆ¶é€ ä¸€ä¸ªè·¨åŸŸé—®é¢˜ã€‚é¦–å…ˆå’Œå‰é¢è®¾ç½®äºŒçº§åŸŸåçš„æ–¹å¼ä¸€æ ·ï¼Œå…ˆè®¾ç½®å¥½ <code>fe.sherlocked93.club</code> å’Œ <code>be.sherlocked93.club</code> äºŒçº§åŸŸåï¼Œéƒ½æŒ‡å‘æœ¬äº‘æœåŠ¡å™¨åœ°å€ï¼Œè™½ç„¶å¯¹åº” IP æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åœ¨ <code>fe.sherlocked93.club</code> åŸŸåå‘å‡ºçš„è¯·æ±‚è®¿é—® <code>be.sherlocked93.club</code> åŸŸåçš„è¯·æ±‚è¿˜æ˜¯è·¨åŸŸäº†ï¼Œå› ä¸ºè®¿é—®çš„ host ä¸ä¸€è‡´ï¼ˆå¦‚æœä¸çŸ¥é“å•¥åŸå› å‚è§å‰é¢è·¨åŸŸçš„å†…å®¹ï¼‰ã€‚</p><h3 id="_8-1-ä½¿ç”¨åå‘ä»£ç†è§£å†³è·¨åŸŸ" tabindex="-1"><a class="header-anchor" href="#_8-1-ä½¿ç”¨åå‘ä»£ç†è§£å†³è·¨åŸŸ" aria-hidden="true">#</a> 8.1 ä½¿ç”¨åå‘ä»£ç†è§£å†³è·¨åŸŸ</h3><p>åœ¨å‰ç«¯æœåŠ¡åœ°å€ä¸º <code>fe.sherlocked93.club</code> çš„é¡µé¢è¯·æ±‚ <code>be.sherlocked93.club</code> çš„åç«¯æœåŠ¡å¯¼è‡´çš„è·¨åŸŸï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">9001</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server_name</span> fe.sherlocked93.club</span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> be.sherlocked93.club</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å°±å°†å¯¹å‰ä¸€ä¸ªåŸŸå <code>fe.sherlocked93.club</code> çš„è¯·æ±‚å…¨éƒ½ä»£ç†åˆ°äº† <code>be.sherlocked93.club</code>ï¼Œå‰ç«¯çš„è¯·æ±‚éƒ½è¢«æˆ‘ä»¬ç”¨æœåŠ¡å™¨ä»£ç†åˆ°äº†åç«¯åœ°å€ä¸‹ï¼Œç»•è¿‡äº†è·¨åŸŸã€‚</p><p>è¿™é‡Œå¯¹é™æ€æ–‡ä»¶çš„è¯·æ±‚å’Œåç«¯æœåŠ¡çš„è¯·æ±‚éƒ½ä»¥ <code>fe.sherlocked93.club</code> å¼€å§‹ï¼Œä¸æ˜“åŒºåˆ†ï¼Œæ‰€ä»¥ä¸ºäº†å®ç°å¯¹åç«¯æœåŠ¡è¯·æ±‚çš„ç»Ÿä¸€è½¬å‘ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šçº¦å®šå¯¹åç«¯æœåŠ¡çš„è¯·æ±‚åŠ ä¸Š <code>/apis/</code> å‰ç¼€æˆ–è€…å…¶ä»–çš„ path æ¥å’Œå¯¹é™æ€èµ„æºçš„è¯·æ±‚åŠ ä»¥åŒºåˆ†ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># è¯·æ±‚è·¨åŸŸï¼Œçº¦å®šä»£ç†åç«¯æœåŠ¡è¯·æ±‚pathä»¥/apis/å¼€å¤´</span>
<span class="token directive"><span class="token keyword">location</span> ^~/apis/</span> <span class="token punctuation">{</span>
    <span class="token comment"># è¿™é‡Œé‡å†™äº†è¯·æ±‚ï¼Œå°†æ­£åˆ™åŒ¹é…ä¸­çš„ç¬¬ä¸€ä¸ªåˆ†ç»„çš„pathæ‹¼æ¥åˆ°çœŸæ­£çš„è¯·æ±‚åé¢ï¼Œå¹¶ç”¨breakåœæ­¢åç»­åŒ¹é…</span>
    <span class="token directive"><span class="token keyword">rewrite</span> ^/apis/(.*)$ /<span class="token variable">$1</span> break</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> be.sherlocked93.club</span><span class="token punctuation">;</span>
  
    <span class="token comment"># ä¸¤ä¸ªåŸŸåä¹‹é—´cookieçš„ä¼ é€’ä¸å›å†™</span>
    <span class="token directive"><span class="token keyword">proxy_cookie_domain</span> be.sherlocked93.club fe.sherlocked93.club</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œé™æ€èµ„æºæˆ‘ä»¬ä½¿ç”¨ <code>fe.sherlocked93.club/xx.html</code>ï¼ŒåŠ¨æ€èµ„æºæˆ‘ä»¬ä½¿ç”¨ <code>fe.sherlocked93.club/apis/getAwo</code>ï¼Œæµè§ˆå™¨é¡µé¢çœ‹èµ·æ¥ä»ç„¶è®¿é—®çš„å‰ç«¯æœåŠ¡å™¨ï¼Œç»•è¿‡äº†æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œæ¯•ç«Ÿæˆ‘ä»¬çœ‹èµ·æ¥å¹¶æ²¡æœ‰è·¨åŸŸã€‚</p><p>ä¹Ÿå¯ä»¥ç»Ÿä¸€ä¸€ç‚¹ï¼Œç›´æ¥æŠŠå‰åç«¯æœåŠ¡å™¨åœ°å€ç›´æ¥éƒ½è½¬å‘åˆ°å¦ä¸€ä¸ª <code>server.sherlocked93.club</code>ï¼Œåªé€šè¿‡åœ¨åé¢æ·»åŠ çš„ path æ¥åŒºåˆ†è¯·æ±‚çš„æ˜¯é™æ€èµ„æºè¿˜æ˜¯åç«¯æœåŠ¡ï¼Œçœ‹éœ€æ±‚äº†ã€‚</p><h3 id="_8-2-é…ç½®-header-è§£å†³è·¨åŸŸ" tabindex="-1"><a class="header-anchor" href="#_8-2-é…ç½®-header-è§£å†³è·¨åŸŸ" aria-hidden="true">#</a> 8.2 é…ç½® header è§£å†³è·¨åŸŸ</h3><p>å½“æµè§ˆå™¨åœ¨è®¿é—®è·¨æºçš„æœåŠ¡å™¨æ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨è·¨åŸŸçš„æœåŠ¡å™¨ä¸Šç›´æ¥è®¾ç½® Nginxï¼Œä»è€Œå‰ç«¯å°±å¯ä»¥æ— æ„Ÿåœ°å¼€å‘ï¼Œä¸ç”¨æŠŠå®é™…ä¸Šè®¿é—®åç«¯çš„åœ°å€æ”¹æˆå‰ç«¯æœåŠ¡çš„åœ°å€ï¼Œè¿™æ ·å¯é€‚æ€§æ›´é«˜ã€‚</p><p>æ¯”å¦‚å‰ç«¯ç«™ç‚¹æ˜¯ <code>fe.sherlocked93.club</code>ï¼Œè¿™ä¸ªåœ°å€ä¸‹çš„å‰ç«¯é¡µé¢è¯·æ±‚ <code>be.sherlocked93.club</code> ä¸‹çš„èµ„æºï¼Œæ¯”å¦‚å‰è€…çš„ <code>fe.sherlocked93.club/index.html</code> å†…å®¹æ˜¯è¿™æ ·çš„ï¼š</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>welcome fe.sherlocked93.club!!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>text/javascript<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://be.sherlocked93.club/index.html&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰“å¼€æµè§ˆå™¨è®¿é—® <code>fe.sherlocked93.club/index.html</code> çš„ç»“æœå¦‚ä¸‹ï¼š</p><figure><img src="/assets/image-20220726201934594-GI_oeAlR.png" alt="image-20220726201934594" tabindex="0" loading="lazy"><figcaption>image-20220726201934594</figcaption></figure><p>å¾ˆæ˜æ˜¾è¿™é‡Œæ˜¯è·¨åŸŸè¯·æ±‚ï¼Œåœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—® <code>http://be.sherlocked93.club/index.html</code> æ˜¯å¯ä»¥è®¿é—®åˆ°çš„ï¼Œä½†æ˜¯åœ¨ <code>fe.sherlocked93.club</code> çš„ html é¡µé¢è®¿é—®å°±ä¼šå‡ºç°è·¨åŸŸã€‚</p><p>åœ¨ <code>/etc/nginx/conf.d/</code> æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¹åº”äºŒçº§åŸŸå <code>be.sherlocked93.club</code> ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># /etc/nginx/conf.d/be.sherlocked93.club.conf</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server_name</span>  be.sherlocked93.club</span><span class="token punctuation">;</span>
  
	<span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Origin&#39;</span> <span class="token variable">$http_origin</span></span><span class="token punctuation">;</span>   <span class="token comment"># å…¨å±€å˜é‡è·å¾—å½“å‰è¯·æ±‚originï¼Œå¸¦cookieçš„è¯·æ±‚ä¸æ”¯æŒ*</span>
	<span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Credentials&#39;</span> <span class="token string">&#39;true&#39;</span></span><span class="token punctuation">;</span>    <span class="token comment"># ä¸º true å¯å¸¦ä¸Š cookie</span>
	<span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Methods&#39;</span> <span class="token string">&#39;GET, POST, OPTIONS&#39;</span></span><span class="token punctuation">;</span>  <span class="token comment"># å…è®¸è¯·æ±‚æ–¹æ³•</span>
	<span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Headers&#39;</span> <span class="token variable">$http_access_control_request_headers</span></span><span class="token punctuation">;</span>  <span class="token comment"># å…è®¸è¯·æ±‚çš„ headerï¼Œå¯ä»¥ä¸º *</span>
	<span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Expose-Headers&#39;</span> <span class="token string">&#39;Content-Length,Content-Range&#39;</span></span><span class="token punctuation">;</span>
	
  <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$request_method</span> = <span class="token string">&#39;OPTIONS&#39;</span>)</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Max-Age&#39;</span> <span class="token number">1728000</span></span><span class="token punctuation">;</span>   <span class="token comment"># OPTIONS è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œåœ¨æœ‰æ•ˆæœŸå†…ä¸ç”¨å‘å‡ºå¦ä¸€æ¡é¢„æ£€è¯·æ±‚</span>
		<span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Content-Type&#39;</span> <span class="token string">&#39;text/plain; charset=utf-8&#39;</span></span><span class="token punctuation">;</span>
		<span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Content-Length&#39;</span> <span class="token number">0</span></span><span class="token punctuation">;</span>
    
		<span class="token directive"><span class="token keyword">return</span> <span class="token number">204</span></span><span class="token punctuation">;</span>                  <span class="token comment"># 200 ä¹Ÿå¯ä»¥</span>
	<span class="token punctuation">}</span>
  
	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">root</span>  /usr/share/nginx/html/be</span><span class="token punctuation">;</span>
		<span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶å <code>nginx -s reload</code> é‡æ–°åŠ è½½é…ç½®ã€‚è¿™æ—¶å†è®¿é—® <code>fe.sherlocked93.club/index.html</code> ç»“æœå¦‚ä¸‹ï¼Œè¯·æ±‚ä¸­å‡ºç°äº†æˆ‘ä»¬åˆšåˆšé…ç½®çš„ Headerï¼š</p><figure><img src="/assets/image-20220726202211312-nq_y-pCK.png" alt="image-20220726202211312" tabindex="0" loading="lazy"><figcaption>image-20220726202211312</figcaption></figure><h2 id="_9-å¼€å¯-gzip-å‹ç¼©" tabindex="-1"><a class="header-anchor" href="#_9-å¼€å¯-gzip-å‹ç¼©" aria-hidden="true">#</a> 9. å¼€å¯ gzip å‹ç¼©</h2><p>gzip æ˜¯ä¸€ç§å¸¸ç”¨çš„ç½‘é¡µå‹ç¼©æŠ€æœ¯ï¼Œä¼ è¾“çš„ç½‘é¡µç»è¿‡ gzip å‹ç¼©ä¹‹åå¤§å°é€šå¸¸å¯ä»¥å˜ä¸ºåŸæ¥çš„ä¸€åŠç”šè‡³æ›´å°ï¼ˆå®˜ç½‘åŸè¯ï¼‰ï¼Œæ›´å°çš„ç½‘é¡µä½“ç§¯ä¹Ÿå°±æ„å‘³ç€å¸¦å®½çš„èŠ‚çº¦å’Œä¼ è¾“é€Ÿåº¦çš„æå‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºè®¿é—®é‡å·¨å¤§å¤§å‹ç½‘ç«™æ¥è¯´ï¼Œæ¯ä¸€ä¸ªé™æ€èµ„æºä½“ç§¯çš„å‡å°ï¼Œéƒ½ä¼šå¸¦æ¥å¯è§‚çš„æµé‡ä¸å¸¦å®½çš„èŠ‚çœã€‚</p><p>ç™¾åº¦å¯ä»¥æ‰¾åˆ°å¾ˆå¤šæ£€æµ‹ç«™ç‚¹æ¥æŸ¥çœ‹ç›®æ ‡ç½‘é¡µæœ‰æ²¡æœ‰å¼€å¯ gzip å‹ç¼©ï¼Œåœ¨ä¸‹éšä¾¿æ‰¾äº†ä¸€ä¸ª <a href="https://link.juejin.cn?target=http%3A%2F%2Ftool.chinaz.com%2FGzips%2FDefault.aspx%3Fq%3Djuejin.im" target="_blank" rel="noopener noreferrer">&lt;ç½‘é¡µGZIPå‹ç¼©æ£€æµ‹&gt;<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¾“å…¥æ˜é‡‘ <code>juejin.im</code> æ¥å·çª¥ä¸‹æ˜é‡‘æœ‰æ²¡æœ‰å¼€å¯ gzipã€‚</p><figure><img src="/assets/image-20220726202442183-aZ-3NDSV.png" alt="image-20220726202442183" tabindex="0" loading="lazy"><figcaption>image-20220726202442183</figcaption></figure><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°æ˜é‡‘æ˜¯å¼€å¯äº† gzip çš„ï¼Œå‹ç¼©æ•ˆæœè¿˜æŒºä¸é”™ï¼Œè¾¾åˆ°äº† 52% ä¹‹å¤šï¼Œæœ¬æ¥ <code>34kb</code> çš„ç½‘é¡µä½“ç§¯ï¼Œå‹ç¼©å®Œåªéœ€è¦ <code>16kb</code>ï¼Œå¯ä»¥æƒ³è±¡ç½‘é¡µä¼ è¾“é€Ÿåº¦æå‡äº†ä¸å°‘ã€‚</p><h3 id="_9-1-nginx-é…ç½®-gzip" tabindex="-1"><a class="header-anchor" href="#_9-1-nginx-é…ç½®-gzip" aria-hidden="true">#</a> 9.1 Nginx é…ç½® gzip</h3><p>ä½¿ç”¨ gzip ä¸ä»…éœ€è¦ Nginx é…ç½®ï¼Œæµè§ˆå™¨ç«¯ä¹Ÿéœ€è¦é…åˆï¼Œéœ€è¦åœ¨è¯·æ±‚æ¶ˆæ¯å¤´ä¸­åŒ…å« <code>Accept-Encoding: gzip</code>ï¼ˆIE5 ä¹‹åæ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒäº†ï¼Œæ˜¯ç°ä»£æµè§ˆå™¨çš„é»˜è®¤è®¾ç½®ï¼‰ã€‚ä¸€èˆ¬åœ¨è¯·æ±‚ html å’Œ css ç­‰é™æ€èµ„æºçš„æ—¶å€™ï¼Œæ”¯æŒçš„æµè§ˆå™¨åœ¨ request è¯·æ±‚é™æ€èµ„æºçš„æ—¶å€™ï¼Œä¼šåŠ ä¸Š <code>Accept-Encoding: gzip</code> è¿™ä¸ª headerï¼Œè¡¨ç¤ºè‡ªå·±æ”¯æŒ gzip çš„å‹ç¼©æ–¹å¼ï¼ŒNginx åœ¨æ‹¿åˆ°è¿™ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœæœ‰ç›¸åº”é…ç½®ï¼Œå°±ä¼šè¿”å›ç»è¿‡ gzip å‹ç¼©è¿‡çš„æ–‡ä»¶ç»™æµè§ˆå™¨ï¼Œå¹¶åœ¨ response ç›¸åº”çš„æ—¶å€™åŠ ä¸Š <code>content-encoding: gzip</code> æ¥å‘Šè¯‰æµè§ˆå™¨è‡ªå·±é‡‡ç”¨çš„å‹ç¼©æ–¹å¼ï¼ˆå› ä¸ºæµè§ˆå™¨åœ¨ä¼ ç»™æœåŠ¡å™¨çš„æ—¶å€™ä¸€èˆ¬è¿˜å‘Šè¯‰æœåŠ¡å™¨è‡ªå·±æ”¯æŒå¥½å‡ ç§å‹ç¼©æ–¹å¼ï¼‰ï¼Œæµè§ˆå™¨æ‹¿åˆ°å‹ç¼©çš„æ–‡ä»¶åï¼Œæ ¹æ®è‡ªå·±çš„è§£å‹æ–¹å¼è¿›è¡Œè§£æã€‚</p><p>å…ˆæ¥çœ‹çœ‹ Nginx æ€ä¹ˆè¿›è¡Œ gzip é…ç½®ï¼Œå’Œä¹‹å‰çš„é…ç½®ä¸€æ ·ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œè¿˜æ˜¯åœ¨ <code>/etc/nginx/conf.d/</code> æ–‡ä»¶å¤¹ä¸­æ–°å»ºé…ç½®æ–‡ä»¶ <code>gzip.conf</code> ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># /etc/nginx/conf.d/gzip.conf</span>

<span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span> <span class="token comment"># é»˜è®¤offï¼Œæ˜¯å¦å¼€å¯gzip</span>
<span class="token directive"><span class="token keyword">gzip_types</span> text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript</span><span class="token punctuation">;</span>

<span class="token comment"># ä¸Šé¢ä¸¤ä¸ªå¼€å¯åŸºæœ¬å°±èƒ½è·‘èµ·äº†ï¼Œä¸‹é¢çš„æ„¿æ„æŠ˜è…¾å°±äº†è§£ä¸€ä¸‹</span>
<span class="token directive"><span class="token keyword">gzip_static</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_proxied</span> any</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_vary</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_comp_level</span> <span class="token number">6</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">gzip_buffers</span> <span class="token number">16</span> <span class="token number">8k</span></span><span class="token punctuation">;</span>
<span class="token comment"># gzip_min_length 1k;</span>
<span class="token directive"><span class="token keyword">gzip_http_version</span> 1.1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼š</p><ol><li><strong>gzip_types</strong>ï¼šè¦é‡‡ç”¨ gzip å‹ç¼©çš„ MIME æ–‡ä»¶ç±»å‹ï¼Œå…¶ä¸­ text/html è¢«ç³»ç»Ÿå¼ºåˆ¶å¯ç”¨ï¼›</li><li><strong>gzip_static</strong>ï¼šé»˜è®¤ offï¼Œè¯¥æ¨¡å—å¯ç”¨åï¼ŒNginx é¦–å…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯·æ±‚é™æ€æ–‡ä»¶çš„ gz ç»“å°¾çš„æ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥è¿”å›è¯¥ <code>.gz</code> æ–‡ä»¶å†…å®¹ï¼›</li><li><strong>gzip_proxied</strong>ï¼šé»˜è®¤ offï¼Œnginxåšä¸ºåå‘ä»£ç†æ—¶å¯ç”¨ï¼Œç”¨äºè®¾ç½®å¯ç”¨æˆ–ç¦ç”¨ä»ä»£ç†æœåŠ¡å™¨ä¸Šæ”¶åˆ°ç›¸åº”å†…å®¹ gzip å‹ç¼©ï¼›</li><li><strong>gzip_vary</strong>ï¼šç”¨äºåœ¨å“åº”æ¶ˆæ¯å¤´ä¸­æ·»åŠ  <code>Varyï¼šAccept-Encoding</code>ï¼Œä½¿ä»£ç†æœåŠ¡å™¨æ ¹æ®è¯·æ±‚å¤´ä¸­çš„ <code>Accept-Encoding</code> è¯†åˆ«æ˜¯å¦å¯ç”¨ gzip å‹ç¼©ï¼›</li><li><strong>gzip_comp_level</strong>ï¼šgzip å‹ç¼©æ¯”ï¼Œå‹ç¼©çº§åˆ«æ˜¯ 1-9ï¼Œ1 å‹ç¼©çº§åˆ«æœ€ä½ï¼Œ9 æœ€é«˜ï¼Œçº§åˆ«è¶Šé«˜å‹ç¼©ç‡è¶Šå¤§ï¼Œå‹ç¼©æ—¶é—´è¶Šé•¿ï¼Œå»ºè®® 4-6ï¼›</li><li><strong>gzip_buffers</strong>ï¼šè·å–å¤šå°‘å†…å­˜ç”¨äºç¼“å­˜å‹ç¼©ç»“æœï¼Œ16 8k è¡¨ç¤ºä»¥ 8k*16 ä¸ºå•ä½è·å¾—ï¼›</li><li><strong>gzip_min_length</strong>ï¼šå…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°ï¼Œé¡µé¢å­—èŠ‚æ•°ä»headerå¤´ä¸­çš„ <code>Content-Length</code> ä¸­è¿›è¡Œè·å–ã€‚é»˜è®¤å€¼æ˜¯ 0ï¼Œä¸ç®¡é¡µé¢å¤šå¤§éƒ½å‹ç¼©ã€‚å»ºè®®è®¾ç½®æˆå¤§äº 1k çš„å­—èŠ‚æ•°ï¼Œå°äº 1k å¯èƒ½ä¼šè¶Šå‹è¶Šå¤§ï¼›</li><li><strong>gzip_http_version</strong>ï¼šé»˜è®¤ 1.1ï¼Œå¯ç”¨ gzip æ‰€éœ€çš„ HTTP æœ€ä½ç‰ˆæœ¬ï¼›</li></ol><p>è¿™ä¸ªé…ç½®å¯ä»¥æ’å…¥åˆ° http æ¨¡å—æ•´ä¸ªæœåŠ¡å™¨çš„é…ç½®é‡Œï¼Œä¹Ÿå¯ä»¥æ’å…¥åˆ°éœ€è¦ä½¿ç”¨çš„è™šæ‹Ÿä¸»æœºçš„ <code>server</code> æˆ–è€…ä¸‹é¢çš„ <code>location</code> æ¨¡å—ä¸­ï¼Œå½“ç„¶åƒä¸Šé¢æˆ‘ä»¬è¿™æ ·å†™çš„è¯å°±æ˜¯è¢« include åˆ° http æ¨¡å—ä¸­äº†ã€‚</p><p>å…¶ä»–æ›´å…¨çš„é…ç½®ä¿¡æ¯å¯ä»¥æŸ¥çœ‹ <a href="https://link.juejin.cn?target=http%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fhttp%2Fngx_http_gzip_module.html" target="_blank" rel="noopener noreferrer">&lt;å®˜ç½‘æ–‡æ¡£ngx_http_gzip_module&gt;<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œé…ç½®å‰æ˜¯è¿™æ ·çš„ï¼š</p><figure><img src="/assets/image-20220726202845395-KzEGCt-Q.png" alt="image-20220726202845395" tabindex="0" loading="lazy"><figcaption>image-20220726202845395</figcaption></figure><p>é…ç½®ä¹‹å response çš„ header é‡Œé¢å¤šäº†ä¸€ä¸ª <code>Content-Encoding: gzip</code>ï¼Œè¿”å›ä¿¡æ¯è¢«å‹ç¼©äº†ï¼š</p><figure><img src="/assets/image-20220726202915387-YAlK3rCK.png" alt="image-20220726202915387" tabindex="0" loading="lazy"><figcaption>image-20220726202915387</figcaption></figure><p>æ³¨æ„äº†ï¼Œä¸€èˆ¬ gzip çš„é…ç½®å»ºè®®åŠ ä¸Š <code>gzip_min_length 1k</code>ï¼Œä¸åŠ çš„è¯ï¼š</p><figure><img src="/assets/image-20220726202946349-FSKalX_d.png" alt="image-20220726202946349" tabindex="0" loading="lazy"><figcaption>image-20220726202946349</figcaption></figure><p>ç”±äºæ–‡ä»¶å¤ªå°ï¼Œgzip å‹ç¼©ä¹‹åå¾—åˆ°äº† -48% çš„ä½“ç§¯ä¼˜åŒ–ï¼Œå‹ç¼©ä¹‹åä½“ç§¯è¿˜æ¯”å‹ç¼©ä¹‹å‰ä½“ç§¯å¤§äº†ï¼Œæ‰€ä»¥æœ€å¥½è®¾ç½®ä½äº <code>1kb</code> çš„æ–‡ä»¶å°±ä¸è¦ gzip å‹ç¼©äº† ğŸ¤ª</p><h3 id="_9-2-webpack-çš„-gzip-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_9-2-webpack-çš„-gzip-é…ç½®" aria-hidden="true">#</a> 9.2 Webpack çš„ gzip é…ç½®</h3><p>å½“å‰ç«¯é¡¹ç›®ä½¿ç”¨ Webpack è¿›è¡Œæ‰“åŒ…çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å¼€å¯ gzip å‹ç¼©ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// vue-cli3 çš„ vue.config.js æ–‡ä»¶</span>
<span class="token keyword">const</span> CompressionWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;compression-webpack-plugin&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// gzip é…ç½®</span>
  <span class="token function-variable function">configureWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç”Ÿäº§ç¯å¢ƒ</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$|\.html$|\.css</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>    <span class="token comment">// åŒ¹é…æ–‡ä»¶å</span>
          <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>               <span class="token comment">// æ–‡ä»¶å‹ç¼©é˜ˆå€¼ï¼Œå¯¹è¶…è¿‡10kçš„è¿›è¡Œå‹ç¼©</span>
          <span class="token literal-property property">deleteOriginalAssets</span><span class="token operator">:</span> <span class="token boolean">false</span>     <span class="token comment">// æ˜¯å¦åˆ é™¤æºæ–‡ä»¶</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±æ­¤æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å¦‚ä¸‹å›¾ï¼š</p><figure><img src="/assets/image-20220726203056141-hqqQpNCN.png" alt="image-20220726203056141" tabindex="0" loading="lazy"><figcaption>image-20220726203056141</figcaption></figure><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°æŸäº›æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶ä¸‹é¢æœ‰ä¸€ä¸ªå¯¹åº”çš„ <code>.gz</code> ç»è¿‡ <code>gzip</code> å‹ç¼©ä¹‹åçš„æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªæ–‡ä»¶è¶…è¿‡äº† <code>10kb</code>ï¼Œæœ‰çš„æ–‡ä»¶æ²¡æœ‰è¶…è¿‡ <code>10kb</code> å°±æ²¡æœ‰è¿›è¡Œ <code>gzip</code> æ‰“åŒ…ï¼Œå¦‚æœä½ æœŸæœ›å‹ç¼©æ–‡ä»¶çš„ä½“ç§¯é˜ˆå€¼å°ä¸€ç‚¹ï¼Œå¯ä»¥åœ¨ <code>compression-webpack-plugin</code> è¿™ä¸ªæ’ä»¶çš„é…ç½®é‡Œè¿›è¡Œå¯¹åº”é…ç½®ã€‚</p><p>é‚£ä¹ˆä¸ºå•¥è¿™é‡Œ Nginx å·²ç»æœ‰äº† gzip å‹ç¼©ï¼ŒWebpack è¿™é‡Œåˆæ•´äº†ä¸ª gzip å‘¢ï¼Œå› ä¸ºå¦‚æœå…¨éƒ½æ˜¯ä½¿ç”¨ Nginx æ¥å‹ç¼©æ–‡ä»¶ï¼Œä¼šè€—è´¹æœåŠ¡å™¨çš„è®¡ç®—èµ„æºï¼Œå¦‚æœæœåŠ¡å™¨çš„ <code>gzip_comp_level</code> é…ç½®çš„æ¯”è¾ƒé«˜ï¼Œå°±æ›´å¢åŠ æœåŠ¡å™¨çš„å¼€é”€ï¼Œç›¸åº”å¢åŠ å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶é—´ï¼Œå¾—ä¸å¿å¤±ã€‚</p><p>å¦‚æœå‹ç¼©çš„åŠ¨ä½œåœ¨å‰ç«¯æ‰“åŒ…çš„æ—¶å€™å°±åšäº†ï¼ŒæŠŠæ‰“åŒ…ä¹‹åçš„é«˜å‹ç¼©ç­‰çº§æ–‡ä»¶ä½œä¸ºé™æ€èµ„æºæ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼ŒNginx ä¼šä¼˜å…ˆæŸ¥æ‰¾è¿™äº›å‹ç¼©ä¹‹åçš„æ–‡ä»¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œç›¸å½“äºæŠŠå‹ç¼©æ–‡ä»¶çš„åŠ¨ä½œä» Nginx æå‰ç»™ Webpack æ‰“åŒ…çš„æ—¶å€™å®Œæˆï¼ŒèŠ‚çº¦äº†æœåŠ¡å™¨èµ„æºï¼Œæ‰€ä»¥ä¸€èˆ¬æ¨ä»‹åœ¨ç”Ÿäº§ç¯å¢ƒåº”ç”¨ Webpack é…ç½® gzip å‹ç¼©ã€‚</p><h2 id="_10-é…ç½®è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#_10-é…ç½®è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> 10. é…ç½®è´Ÿè½½å‡è¡¡</h2><p>è´Ÿè½½å‡è¡¡åœ¨ä¹‹å‰å·²ç»ä»‹ç»äº†ç›¸å…³æ¦‚å¿µäº†ï¼Œä¸»è¦æ€æƒ³å°±æ˜¯æŠŠè´Ÿè½½å‡åŒ€åˆç†åœ°åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå®ç°å‹åŠ›åˆ†æµçš„ç›®çš„ã€‚</p><p>ä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">upstream</span> myserver</span> <span class="token punctuation">{</span>
  	<span class="token comment"># ip_hash;  # ip_hash æ–¹å¼</span>
    <span class="token comment"># fair;   # fair æ–¹å¼</span>
    <span class="token directive"><span class="token keyword">server</span> 127.0.0.1:8081</span><span class="token punctuation">;</span>  <span class="token comment"># è´Ÿè½½å‡è¡¡ç›®çš„æœåŠ¡åœ°å€</span>
    <span class="token directive"><span class="token keyword">server</span> 127.0.0.1:8080</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server</span> 127.0.0.1:8082 weight=10</span><span class="token punctuation">;</span>  <span class="token comment"># weight æ–¹å¼ï¼Œä¸å†™é»˜è®¤ä¸º 1</span>
  <span class="token punctuation">}</span>
 
  <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    	<span class="token directive"><span class="token keyword">proxy_pass</span> http://myserver</span><span class="token punctuation">;</span>
      <span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">10</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nginx æä¾›äº†å¥½å‡ ç§åˆ†é…æ–¹å¼ï¼Œé»˜è®¤ä¸º<strong>è½®è¯¢</strong>ï¼Œå°±æ˜¯è½®æµæ¥ã€‚æœ‰ä»¥ä¸‹å‡ ç§åˆ†é…æ–¹å¼ï¼š</p><ol><li><strong>è½®è¯¢</strong>ï¼Œé»˜è®¤æ–¹å¼ï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡æŒ‚äº†ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ï¼›</li><li><strong>weight</strong>ï¼Œæƒé‡åˆ†é…ï¼ŒæŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œæƒé‡è¶Šé«˜ï¼Œåœ¨è¢«è®¿é—®çš„æ¦‚ç‡è¶Šå¤§ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µï¼›</li><li><strong>ip_hash</strong>ï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—® IP çš„ hash ç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³åŠ¨æ€ç½‘é¡µ session å…±äº«é—®é¢˜ã€‚è´Ÿè½½å‡è¡¡æ¯æ¬¡è¯·æ±‚éƒ½ä¼šé‡æ–°å®šä½åˆ°æœåŠ¡å™¨é›†ç¾¤ä¸­çš„æŸä¸€ä¸ªï¼Œé‚£ä¹ˆå·²ç»ç™»å½•æŸä¸€ä¸ªæœåŠ¡å™¨çš„ç”¨æˆ·å†é‡æ–°å®šä½åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå…¶ç™»å½•ä¿¡æ¯å°†ä¼šä¸¢å¤±ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯ä¸å¦¥çš„ï¼›</li><li><strong>fair</strong>ï¼ˆç¬¬ä¸‰æ–¹ï¼‰ï¼ŒæŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´åˆ†é…ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ï¼Œä¾èµ–ç¬¬ä¸‰æ–¹æ’ä»¶ nginx-upstream-fairï¼Œéœ€è¦å…ˆå®‰è£…ï¼›</li></ol><h2 id="_11-é…ç½®åŠ¨é™åˆ†ç¦»" tabindex="-1"><a class="header-anchor" href="#_11-é…ç½®åŠ¨é™åˆ†ç¦»" aria-hidden="true">#</a> 11. é…ç½®åŠ¨é™åˆ†ç¦»</h2><p>åŠ¨é™åˆ†ç¦»åœ¨ä¹‹å‰ä¹Ÿä»‹ç»è¿‡äº†ï¼Œå°±æ˜¯æŠŠåŠ¨æ€å’Œé™æ€çš„è¯·æ±‚åˆ†å¼€ã€‚æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼Œä¸€ç§ æ˜¯çº¯ç²¹æŠŠé™æ€æ–‡ä»¶ç‹¬ç«‹æˆå•ç‹¬çš„åŸŸåï¼Œæ”¾åœ¨ç‹¬ç«‹çš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿæ˜¯ç›®å‰ä¸»æµæ¨å´‡çš„æ–¹æ¡ˆã€‚å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯åŠ¨æ€è·Ÿé™æ€æ–‡ä»¶æ··åˆåœ¨ä¸€èµ·å‘å¸ƒï¼Œ é€šè¿‡ Nginx é…ç½®æ¥åˆ†å¼€ã€‚</p><p>é€šè¿‡ location æŒ‡å®šä¸åŒçš„åç¼€åå®ç°ä¸åŒçš„è¯·æ±‚è½¬å‘ã€‚é€šè¿‡ expires å‚æ•°è®¾ç½®ï¼Œå¯ä»¥ä½¿æµè§ˆå™¨ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œå‡å°‘ä¸æœåŠ¡å™¨ä¹‹å‰çš„è¯·æ±‚å’Œæµé‡ã€‚å…·ä½“ expires å®šä¹‰ï¼šæ˜¯ç»™ä¸€ä¸ªèµ„æºè®¾å®šä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´æ— éœ€å»æœåŠ¡ç«¯éªŒè¯ï¼Œç›´æ¥é€šè¿‡æµè§ˆå™¨è‡ªèº«ç¡®è®¤æ˜¯å¦è¿‡æœŸå³å¯ï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”Ÿé¢å¤–çš„æµé‡ã€‚æ­¤ç§æ–¹æ³•éå¸¸é€‚åˆä¸ç»å¸¸å˜åŠ¨çš„èµ„æºã€‚ï¼ˆå¦‚æœç»å¸¸æ›´æ–°çš„æ–‡ä»¶ï¼Œä¸å»ºè®®ä½¿ç”¨ expires æ¥ç¼“å­˜ï¼‰ï¼Œæˆ‘è¿™é‡Œè®¾ç½® 3dï¼Œè¡¨ç¤ºåœ¨è¿™ 3 å¤©ä¹‹å†…è®¿é—®è¿™ä¸ªURLï¼Œå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯”å¯¹æœåŠ¡å™¨è¯¥æ–‡ä»¶æœ€åæ›´æ–°æ—¶é—´æ²¡æœ‰å˜åŒ–ã€‚åˆ™ä¸ä¼šä»æœåŠ¡å™¨æŠ“å–ï¼Œè¿”å›çŠ¶æ€ç  304ï¼Œå¦‚æœæœ‰ä¿®æ”¹ï¼Œåˆ™ç›´æ¥ä»æœåŠ¡å™¨é‡æ–°ä¸‹è½½ï¼Œè¿”å›çŠ¶æ€ç  200ã€‚</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">location</span> /www/</span> <span class="token punctuation">{</span>
  	<span class="token directive"><span class="token keyword">root</span> /data/</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">index</span> index.html index.htm</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token directive"><span class="token keyword">location</span> /image/</span> <span class="token punctuation">{</span>
  	<span class="token directive"><span class="token keyword">root</span> /data/</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">autoindex</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-é…ç½®é«˜å¯ç”¨é›†ç¾¤-åŒæœºçƒ­å¤‡" tabindex="-1"><a class="header-anchor" href="#_12-é…ç½®é«˜å¯ç”¨é›†ç¾¤-åŒæœºçƒ­å¤‡" aria-hidden="true">#</a> 12. é…ç½®é«˜å¯ç”¨é›†ç¾¤ï¼ˆåŒæœºçƒ­å¤‡ï¼‰</h2><p>å½“ä¸» Nginx æœåŠ¡å™¨å®•æœºä¹‹åï¼Œåˆ‡æ¢åˆ°å¤‡ä»½ Nginx æœåŠ¡å™¨</p><figure><img src="/assets/image-20220726203707353-nAy3F5sY.png" alt="image-20220726203707353" tabindex="0" loading="lazy"><figcaption>image-20220726203707353</figcaption></figure><p>é¦–å…ˆå®‰è£… keepalivedï¼Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> keepalived <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åç¼–è¾‘ <code>/etc/keepalived/keepalived.conf</code> é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ  <code>vrrp_script</code> å®šä¹‰ä¸€ä¸ªå¤–å›´æ£€æµ‹æœºåˆ¶ï¼Œå¹¶åœ¨ <code>vrrp_instance</code> ä¸­é€šè¿‡å®šä¹‰ <code>track_script</code> æ¥è¿½è¸ªè„šæœ¬æ‰§è¡Œè¿‡ç¨‹ï¼Œå®ç°èŠ‚ç‚¹è½¬ç§»ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>global_defs<span class="token punctuation">{</span>
   notification_email <span class="token punctuation">{</span>
        acassen@firewall.loc
   <span class="token punctuation">}</span>
   notification_email_from Alexandre@firewall.loc
   smtp_server <span class="token number">127.0</span>.<span class="token number">0.1</span>
   smtp_connect_timeout <span class="token number">30</span> <span class="token comment">// ä¸Šé¢éƒ½æ˜¯é‚®ä»¶é…ç½®ï¼Œæ²¡åµç”¨</span>
   router_id LVS_DEVEL     <span class="token comment">// å½“å‰æœåŠ¡å™¨åå­—ï¼Œç”¨hostnameå‘½ä»¤æ¥æŸ¥çœ‹</span>
<span class="token punctuation">}</span>
vrrp_script chk_maintainace <span class="token punctuation">{</span> <span class="token comment">// æ£€æµ‹æœºåˆ¶çš„è„šæœ¬åç§°ä¸ºchk_maintainace</span>
    script <span class="token string">&quot;[[ -e/etc/keepalived/down ]] &amp;&amp; exit 1 || exit 0&quot;</span> <span class="token comment">// å¯ä»¥æ˜¯è„šæœ¬è·¯å¾„æˆ–è„šæœ¬å‘½ä»¤</span>
    <span class="token comment">// script &quot;/etc/keepalived/nginx_check.sh&quot;    // æ¯”å¦‚è¿™æ ·çš„è„šæœ¬è·¯å¾„</span>
    interval <span class="token number">2</span>  <span class="token comment">// æ¯éš”2ç§’æ£€æµ‹ä¸€æ¬¡</span>
    weight <span class="token number">-20</span>  <span class="token comment">// å½“è„šæœ¬æ‰§è¡Œæˆç«‹ï¼Œé‚£ä¹ˆæŠŠå½“å‰æœåŠ¡å™¨ä¼˜å…ˆçº§æ”¹ä¸º-20</span>
<span class="token punctuation">}</span>
vrrp_instanceVI_1 <span class="token punctuation">{</span>   <span class="token comment">// æ¯ä¸€ä¸ªvrrp_instanceå°±æ˜¯å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿè·¯ç”±å™¨</span>
    state MASTER      <span class="token comment">// ä¸»æœºä¸ºMASTERï¼Œå¤‡ç”¨æœºä¸ºBACKUP</span>
    interface eth0    <span class="token comment">// ç½‘å¡åå­—ï¼Œå¯ä»¥ä»ifconfigä¸­æŸ¥æ‰¾</span>
    virtual_router_id <span class="token number">51</span> <span class="token comment">// è™šæ‹Ÿè·¯ç”±çš„idå·ï¼Œä¸€èˆ¬å°äº255ï¼Œä¸»å¤‡æœºidéœ€è¦ä¸€æ ·</span>
    priority <span class="token number">100</span>      <span class="token comment">// ä¼˜å…ˆçº§ï¼Œmasterçš„ä¼˜å…ˆçº§æ¯”backupçš„å¤§</span>
    advert_int <span class="token number">1</span>      <span class="token comment">// é»˜è®¤å¿ƒè·³é—´éš”</span>
    authentication <span class="token punctuation">{</span>  <span class="token comment">// è®¤è¯æœºåˆ¶</span>
        auth_type PASS
        auth_pass <span class="token number">1111</span>   <span class="token comment">// å¯†ç </span>
    <span class="token punctuation">}</span>
    virtual_ipaddress <span class="token punctuation">{</span>  <span class="token comment">// è™šæ‹Ÿåœ°å€vip</span>
       <span class="token number">172.16</span>.<span class="token number">2.8</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­æ£€æµ‹è„šæœ¬ <code>nginx_check.sh</code>ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> <span class="token parameter variable">-C</span> nginx --no-header <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">`</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$A</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    /usr/sbin/nginx <span class="token comment"># å°è¯•é‡æ–°å¯åŠ¨nginx</span>
    <span class="token function">sleep</span> <span class="token number">2</span>         <span class="token comment"># ç¡çœ 2ç§’</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> <span class="token parameter variable">-C</span> nginx --no-header <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">`</span></span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
        <span class="token function">killall</span> keepalived <span class="token comment"># å¯åŠ¨å¤±è´¥ï¼Œå°†keepalivedæœåŠ¡æ€æ­»ã€‚å°†vipæ¼‚ç§»åˆ°å…¶å®ƒå¤‡ä»½èŠ‚ç‚¹</span>
    <span class="token keyword">fi</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤åˆ¶ä¸€ä»½åˆ°å¤‡ä»½æœåŠ¡å™¨ï¼Œå¤‡ä»½ Nginx çš„é…ç½®è¦å°† <code>state</code> åæ”¹ä¸º <code>BACKUP</code>ï¼Œ<code>priority</code> æ”¹ä¸ºæ¯”ä¸»æœºå°ã€‚</p><p>è®¾ç½®å®Œæ¯•åå„è‡ª <code>service keepalived start</code> å¯åŠ¨ï¼Œç»è¿‡è®¿é—®æˆåŠŸä¹‹åï¼Œå¯ä»¥æŠŠ Master æœºçš„ keepalived åœæ‰ï¼Œæ­¤æ—¶ Master æœºå°±ä¸å†æ˜¯ä¸»æœºäº† <code>service keepalived stop</code>ï¼Œçœ‹è®¿é—®è™šæ‹Ÿ IP æ—¶æ˜¯å¦èƒ½å¤Ÿè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡æœº <code>ip addr</code>ã€‚</p><p>å†æ¬¡å¯åŠ¨ Master çš„ keepalivedï¼Œæ­¤æ—¶ vip åˆå˜åˆ°äº†ä¸»æœºä¸Šã€‚</p><h2 id="_13-é€‚é…-pc-æˆ–ç§»åŠ¨è®¾å¤‡" tabindex="-1"><a class="header-anchor" href="#_13-é€‚é…-pc-æˆ–ç§»åŠ¨è®¾å¤‡" aria-hidden="true">#</a> 13. é€‚é… PC æˆ–ç§»åŠ¨è®¾å¤‡</h2><p>æ ¹æ®ç”¨æˆ·è®¾å¤‡ä¸åŒè¿”å›ä¸åŒæ ·å¼çš„ç«™ç‚¹ï¼Œä»¥å‰ç»å¸¸ä½¿ç”¨çš„æ˜¯çº¯å‰ç«¯çš„è‡ªé€‚åº”å¸ƒå±€ï¼Œä½†æ— è®ºæ˜¯å¤æ‚æ€§å’Œæ˜“ç”¨æ€§ä¸Šé¢è¿˜æ˜¯ä¸å¦‚åˆ†å¼€ç¼–å†™çš„å¥½ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„æ·˜å®ã€äº¬ä¸œ......è¿™äº›å¤§å‹ç½‘ç«™å°±éƒ½æ²¡æœ‰é‡‡ç”¨è‡ªé€‚åº”ï¼Œè€Œæ˜¯ç”¨åˆ†å¼€åˆ¶ä½œçš„æ–¹å¼ï¼Œæ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ <code>user-agent</code> æ¥åˆ¤æ–­æ˜¯è¿”å› PC è¿˜æ˜¯ H5 ç«™ç‚¹ã€‚</p><p>é¦–å…ˆåœ¨ <code>/usr/share/nginx/html</code> æ–‡ä»¶å¤¹ä¸‹ <code>mkdir</code> åˆ†åˆ«æ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ <code>PC</code> å’Œ <code>mobile</code>ï¼Œ<code>vim</code> ç¼–è¾‘ä¸¤ä¸ª <code>index.html</code> éšä¾¿å†™ç‚¹å†…å®¹ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/share/nginx/html
<span class="token function">mkdir</span> pc mobile
<span class="token builtin class-name">cd</span> pc
<span class="token function">vim</span> index.html   <span class="token comment"># éšä¾¿å†™ç‚¹æ¯”å¦‚ hello pc!</span>
<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/mobile
<span class="token function">vim</span> index.html   <span class="token comment"># éšä¾¿å†™ç‚¹æ¯”å¦‚ hello mobile!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå’Œè®¾ç½®äºŒçº§åŸŸåè™šæ‹Ÿä¸»æœºæ—¶å€™ä¸€æ ·ï¼Œå» <code>/etc/nginx/conf.d</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ <code>fe.sherlocked93.club.conf</code> ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># /etc/nginx/conf.d/fe.sherlocked93.club.conf</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
	<span class="token directive"><span class="token keyword">server_name</span> fe.sherlocked93.club</span><span class="token punctuation">;</span>

	<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">root</span>  /usr/share/nginx/html/pc</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$http_user_agent</span> ~* <span class="token string">&#39;(Android|webOS|iPhone|iPod|BlackBerry)&#39;</span>)</span> <span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">root</span> /usr/share/nginx/html/mobile</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
		<span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®åŸºæœ¬æ²¡ä»€ä¹ˆä¸ä¸€æ ·çš„ï¼Œä¸»è¦å¤šäº†ä¸€ä¸ª <code>if</code> è¯­å¥ï¼Œç„¶åä½¿ç”¨ <code>$http_user_agent</code> å…¨å±€å˜é‡æ¥åˆ¤æ–­ç”¨æˆ·è¯·æ±‚çš„ <code>user-agent</code>ï¼ŒæŒ‡å‘ä¸åŒçš„ root è·¯å¾„ï¼Œè¿”å›å¯¹åº”ç«™ç‚¹ã€‚</p><p>åœ¨æµè§ˆå™¨è®¿é—®è¿™ä¸ªç«™ç‚¹ï¼Œç„¶å F12 ä¸­æ¨¡æ‹Ÿä½¿ç”¨æ‰‹æœºè®¿é—®ï¼š</p><figure><img src="/assets/image-20220726204632802-Y3F-aNCg.png" alt="image-20220726204632802" tabindex="0" loading="lazy"><figcaption>image-20220726204632802</figcaption></figure><p>å¯ä»¥çœ‹åˆ°åœ¨æ¨¡æ‹Ÿä½¿ç”¨ç§»åŠ¨ç«¯è®¿é—®çš„æ—¶å€™ï¼ŒNginx è¿”å›çš„ç«™ç‚¹å˜æˆäº†ç§»åŠ¨ç«¯å¯¹åº”çš„ html äº†ã€‚</p><h2 id="_14-é…ç½®-https" tabindex="-1"><a class="header-anchor" href="#_14-é…ç½®-https" aria-hidden="true">#</a> 14. é…ç½® HTTPS</h2><p>å…·ä½“é…ç½®è¿‡ç¨‹ç½‘ä¸ŠæŒºå¤šçš„äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä½ è´­ä¹°çš„æŸæŸäº‘ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰å…è´¹ç”³è¯·çš„æœåŠ¡å™¨è¯ä¹¦ï¼Œå®‰è£…ç›´æ¥çœ‹æ‰€åœ¨äº‘çš„æ“ä½œæŒ‡å—å³å¯ã€‚</p><p>æˆ‘è´­ä¹°çš„è…¾è®¯äº‘æä¾›çš„äºšæ´²è¯šä¿¡æœºæ„é¢å‘çš„å…è´¹è¯ä¹¦åªèƒ½ä¸€ä¸ªåŸŸåä½¿ç”¨ï¼ŒäºŒçº§åŸŸåä»€ä¹ˆçš„éœ€è¦å¦å¤–ç”³è¯·ï¼Œä½†æ˜¯ç”³è¯·å®¡æ‰¹æ¯”è¾ƒå¿«ï¼Œä¸€èˆ¬å‡ åˆ†é’Ÿå°±èƒ½æˆåŠŸï¼Œç„¶åä¸‹è½½è¯ä¹¦çš„å‹ç¼©æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸ª nginx æ–‡ä»¶å¤¹ï¼ŒæŠŠ <code>xxx.crt</code> å’Œ <code>xxx.key</code> æ–‡ä»¶æ‹·è´åˆ°æœåŠ¡å™¨ç›®å½•ï¼Œå†é…ç½®ä¸‹ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl http2 default_server</span><span class="token punctuation">;</span>   <span class="token comment"># SSL è®¿é—®ç«¯å£å·ä¸º 443</span>
  <span class="token directive"><span class="token keyword">server_name</span> sherlocked93.club</span><span class="token punctuation">;</span>         <span class="token comment"># å¡«å†™ç»‘å®šè¯ä¹¦çš„åŸŸå</span>

  <span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/nginx/https/1_sherlocked93.club_bundle.crt</span><span class="token punctuation">;</span>   <span class="token comment"># è¯ä¹¦æ–‡ä»¶åœ°å€</span>
  <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/nginx/https/2_sherlocked93.club.key</span><span class="token punctuation">;</span>      <span class="token comment"># ç§é’¥æ–‡ä»¶åœ°å€</span>
  <span class="token directive"><span class="token keyword">ssl_session_timeout</span> <span class="token number">10m</span></span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1 TLSv1.1 TLSv1.2</span><span class="token punctuation">;</span>      <span class="token comment">#è¯·æŒ‰ç…§ä»¥ä¸‹åè®®é…ç½®</span>
  <span class="token directive"><span class="token keyword">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE</span><span class="token punctuation">;</span> 
  <span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
  
  <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span>         /usr/share/nginx/html</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">index</span>        index.html index.htm</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†™å®Œ <code>nginx -t -q</code> æ ¡éªŒä¸€ä¸‹ï¼Œæ²¡é—®é¢˜å°± <code>nginx -s reload</code>ï¼Œç°åœ¨å»è®¿é—® <code>https://sherlocked93.club/</code> å°±èƒ½è®¿é—® HTTPS ç‰ˆçš„ç½‘ç«™äº†ã€‚</p><p>ä¸€èˆ¬è¿˜å¯ä»¥åŠ ä¸Šå‡ ä¸ªå¢å¼ºå®‰å…¨æ€§çš„å‘½ä»¤ï¼š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">add_header</span> X-Frame-Options DENY</span><span class="token punctuation">;</span>           <span class="token comment"># å‡å°‘ç‚¹å‡»åŠ«æŒ</span>
<span class="token directive"><span class="token keyword">add_header</span> X-Content-Type-Options nosniff</span><span class="token punctuation">;</span> <span class="token comment"># ç¦æ­¢æœåŠ¡å™¨è‡ªåŠ¨è§£æèµ„æºç±»å‹</span>
<span class="token directive"><span class="token keyword">add_header</span> X-Xss-Protection <span class="token number">1</span></span><span class="token punctuation">;</span>             <span class="token comment"># é˜²XSSæ”»å‡»</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_15-ä¸€äº›å¸¸ç”¨æŠ€å·§" tabindex="-1"><a class="header-anchor" href="#_15-ä¸€äº›å¸¸ç”¨æŠ€å·§" aria-hidden="true">#</a> 15. ä¸€äº›å¸¸ç”¨æŠ€å·§</h2><h3 id="_15-1-é™æ€æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_15-1-é™æ€æœåŠ¡" aria-hidden="true">#</a> 15.1 é™æ€æœåŠ¡</h3><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server_name</span>  static.sherlocked93.club</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">charset</span> utf-8</span><span class="token punctuation">;</span>    <span class="token comment"># é˜²æ­¢ä¸­æ–‡æ–‡ä»¶åä¹±ç </span>

  <span class="token directive"><span class="token keyword">location</span> /download</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">alias</span>	          /usr/share/nginx/html/static</span><span class="token punctuation">;</span>  <span class="token comment"># é™æ€èµ„æºç›®å½•</span>
    
    <span class="token directive"><span class="token keyword">autoindex</span>               <span class="token boolean">on</span></span><span class="token punctuation">;</span>    <span class="token comment"># å¼€å¯é™æ€èµ„æºåˆ—ç›®å½•</span>
    <span class="token directive"><span class="token keyword">autoindex_exact_size</span>    <span class="token boolean">off</span></span><span class="token punctuation">;</span>   <span class="token comment"># on(é»˜è®¤)æ˜¾ç¤ºæ–‡ä»¶çš„ç¡®åˆ‡å¤§å°ï¼Œå•ä½æ˜¯byteï¼›offæ˜¾ç¤ºæ–‡ä»¶å¤§æ¦‚å¤§å°ï¼Œå•ä½KBã€MBã€GB</span>
    <span class="token directive"><span class="token keyword">autoindex_localtime</span>     <span class="token boolean">off</span></span><span class="token punctuation">;</span>   <span class="token comment"># off(é»˜è®¤)æ—¶æ˜¾ç¤ºçš„æ–‡ä»¶æ—¶é—´ä¸ºGMTæ—¶é—´ï¼›onæ˜¾ç¤ºçš„æ–‡ä»¶æ—¶é—´ä¸ºæœåŠ¡å™¨æ—¶é—´</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-2-å›¾ç‰‡é˜²ç›—é“¾" tabindex="-1"><a class="header-anchor" href="#_15-2-å›¾ç‰‡é˜²ç›—é“¾" aria-hidden="true">#</a> 15.2 å›¾ç‰‡é˜²ç›—é“¾</h3><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>        
  <span class="token directive"><span class="token keyword">server_name</span>  *.sherlocked93.club</span><span class="token punctuation">;</span>
  
  <span class="token comment"># å›¾ç‰‡é˜²ç›—é“¾</span>
  <span class="token directive"><span class="token keyword">location</span> ~* \.(gif|jpg|jpeg|png|bmp|swf)$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">valid_referers</span> none blocked server_names ~\.google\. ~\.baidu\. *.qq.com</span><span class="token punctuation">;</span>  <span class="token comment"># åªå…è®¸æœ¬æœº IP å¤–é“¾å¼•ç”¨ï¼Œæ„Ÿè°¢ @æœ¨æ³•ä¼  çš„æé†’ï¼Œå°†ç™¾åº¦å’Œè°·æ­Œä¹ŸåŠ å…¥ç™½åå•</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$invalid_referer</span>)</span><span class="token punctuation">{</span>
      <span class="token directive"><span class="token keyword">return</span> <span class="token number">403</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-3-è¯·æ±‚è¿‡æ»¤" tabindex="-1"><a class="header-anchor" href="#_15-3-è¯·æ±‚è¿‡æ»¤" aria-hidden="true">#</a> 15.3 è¯·æ±‚è¿‡æ»¤</h3><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># éæŒ‡å®šè¯·æ±‚å…¨è¿”å› 403</span>
<span class="token directive"><span class="token keyword">if</span> ( <span class="token variable">$request_method</span> !~ ^(GET|POST|HEAD)$ )</span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">return</span> <span class="token number">403</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
  <span class="token comment"># IPè®¿é—®é™åˆ¶ï¼ˆåªå…è®¸IPæ˜¯ 192.168.0.2 æœºå™¨è®¿é—®ï¼‰</span>
  <span class="token directive"><span class="token keyword">allow</span> 192.168.0.2</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">deny</span> all</span><span class="token punctuation">;</span>
  
  <span class="token directive"><span class="token keyword">root</span>   html</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">index</span>  index.html index.htm</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-4-é…ç½®å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€æ–‡ä»¶ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_15-4-é…ç½®å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€æ–‡ä»¶ç¼“å­˜" aria-hidden="true">#</a> 15.4 é…ç½®å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€æ–‡ä»¶ç¼“å­˜</h3><p>ç”±äºå›¾ç‰‡ã€å­—ä½“ã€éŸ³é¢‘ã€è§†é¢‘ç­‰é™æ€æ–‡ä»¶åœ¨æ‰“åŒ…çš„æ—¶å€™é€šå¸¸ä¼šå¢åŠ äº† hashï¼Œæ‰€ä»¥ç¼“å­˜å¯ä»¥è®¾ç½®çš„é•¿ä¸€ç‚¹ï¼Œå…ˆè®¾ç½®å¼ºåˆ¶ç¼“å­˜ï¼Œå†è®¾ç½®åå•†ç¼“å­˜ï¼›å¦‚æœå­˜åœ¨æ²¡æœ‰ hash å€¼çš„é™æ€æ–‡ä»¶ï¼Œå»ºè®®ä¸è®¾ç½®å¼ºåˆ¶ç¼“å­˜ï¼Œä»…é€šè¿‡åå•†ç¼“å­˜åˆ¤æ–­æ˜¯å¦éœ€è¦ä½¿ç”¨ç¼“å­˜ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å›¾ç‰‡ç¼“å­˜æ—¶é—´è®¾ç½®</span>
location ~ .*<span class="token punctuation">\</span>.<span class="token punctuation">(</span>css<span class="token operator">|</span>js<span class="token operator">|</span>jpg<span class="token operator">|</span>png<span class="token operator">|</span>gif<span class="token operator">|</span>swf<span class="token operator">|</span>woff<span class="token operator">|</span>woff2<span class="token operator">|</span>eot<span class="token operator">|</span>svg<span class="token operator">|</span>ttf<span class="token operator">|</span>otf<span class="token operator">|</span>mp3<span class="token operator">|</span>m4a<span class="token operator">|</span>aac<span class="token operator">|</span>txt<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
	expires 10d<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment"># å¦‚æœä¸å¸Œæœ›ç¼“å­˜</span>
expires -1<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-5-å•é¡µé¢é¡¹ç›®-history-è·¯ç”±é…ç½®" tabindex="-1"><a class="header-anchor" href="#_15-5-å•é¡µé¢é¡¹ç›®-history-è·¯ç”±é…ç½®" aria-hidden="true">#</a> 15.5 å•é¡µé¢é¡¹ç›® history è·¯ç”±é…ç½®</h3><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server_name</span>  fe.sherlocked93.club</span><span class="token punctuation">;</span>
  
  <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span>       /usr/share/nginx/html/dist</span><span class="token punctuation">;</span>  <span class="token comment"># vue æ‰“åŒ…åçš„æ–‡ä»¶å¤¹</span>
    <span class="token directive"><span class="token keyword">index</span>      index.html index.htm</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">try_files</span>  <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html @rewrites</span><span class="token punctuation">;</span>  
    
    <span class="token directive"><span class="token keyword">expires</span> -1</span><span class="token punctuation">;</span>                          <span class="token comment"># é¦–é¡µä¸€èˆ¬æ²¡æœ‰å¼ºåˆ¶ç¼“å­˜</span>
    <span class="token directive"><span class="token keyword">add_header</span> Cache-Control no-cache</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment"># æ¥å£è½¬å‘ï¼Œå¦‚æœéœ€è¦çš„è¯</span>
  <span class="token comment">#location ~ ^/api {</span>
  <span class="token comment">#  proxy_pass http://be.sherlocked93.club;</span>
  <span class="token comment">#}</span>
  
  <span class="token directive"><span class="token keyword">location</span> @rewrites</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">rewrite</span> ^(.+)$ /index.html break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-6-http-è¯·æ±‚è½¬å‘åˆ°-https" tabindex="-1"><a class="header-anchor" href="#_15-6-http-è¯·æ±‚è½¬å‘åˆ°-https" aria-hidden="true">#</a> 15.6 HTTP è¯·æ±‚è½¬å‘åˆ° HTTPS</h3><p>é…ç½®å®Œ HTTPS åï¼Œæµè§ˆå™¨è¿˜æ˜¯å¯ä»¥è®¿é—® HTTP çš„åœ°å€ <code>http://sherlocked93.club/</code> çš„ï¼Œå¯ä»¥åšä¸€ä¸ª 301 è·³è½¬ï¼ŒæŠŠå¯¹åº”åŸŸåçš„ HTTP è¯·æ±‚é‡å®šå‘åˆ° HTTPS ä¸Š</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>      <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> www.sherlocked93.club</span><span class="token punctuation">;</span>

    <span class="token comment"># å•åŸŸåé‡å®šå‘</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$host</span> = <span class="token string">&#39;www.sherlocked93.club&#39;</span>)</span><span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://www.sherlocked93.club<span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># å…¨å±€é https åè®®æ—¶é‡å®šå‘</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$scheme</span> != <span class="token string">&#39;https&#39;</span>)</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$server_name</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># æˆ–è€…å…¨éƒ¨é‡å®šå‘</span>
    <span class="token directive"><span class="token keyword">return</span> <span class="token number">301</span> https://<span class="token variable">$server_name</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>

    <span class="token comment"># ä»¥ä¸Šé…ç½®é€‰æ‹©è‡ªå·±éœ€è¦çš„å³å¯ï¼Œä¸ç”¨å…¨éƒ¨åŠ </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-7-æ³›åŸŸåè·¯å¾„åˆ†ç¦»" tabindex="-1"><a class="header-anchor" href="#_15-7-æ³›åŸŸåè·¯å¾„åˆ†ç¦»" aria-hidden="true">#</a> 15.7 æ³›åŸŸåè·¯å¾„åˆ†ç¦»</h3><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„æŠ€èƒ½ï¼Œç»å¸¸æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦é…ç½®ä¸€äº›äºŒçº§æˆ–è€…ä¸‰çº§åŸŸåï¼Œå¸Œæœ›é€šè¿‡ Nginx è‡ªåŠ¨æŒ‡å‘å¯¹åº”ç›®å½•ï¼Œæ¯”å¦‚ï¼š</p><ol><li><code>test1.doc.sherlocked93.club</code> è‡ªåŠ¨æŒ‡å‘ <code>/usr/share/nginx/html/doc/test1</code> æœåŠ¡å™¨åœ°å€ï¼›</li><li><code>test2.doc.sherlocked93.club</code> è‡ªåŠ¨æŒ‡å‘ <code>/usr/share/nginx/html/doc/test2</code> æœåŠ¡å™¨åœ°å€ï¼›</li></ol><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  ~^([\w-]+)\.doc\.sherlocked93\.club$</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">root</span> /usr/share/nginx/html/doc/<span class="token variable">$1</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-8-æ³›åŸŸåè½¬å‘" tabindex="-1"><a class="header-anchor" href="#_15-8-æ³›åŸŸåè½¬å‘" aria-hidden="true">#</a> 15.8 æ³›åŸŸåè½¬å‘</h3><p>å’Œä¹‹å‰çš„åŠŸèƒ½ç±»ä¼¼ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›æŠŠäºŒçº§æˆ–è€…ä¸‰çº§åŸŸåé“¾æ¥é‡å†™åˆ°æˆ‘ä»¬å¸Œæœ›çš„è·¯å¾„ï¼Œè®©åç«¯å°±å¯ä»¥æ ¹æ®è·¯ç”±è§£æä¸åŒçš„è§„åˆ™ï¼š</p><ol><li><code>test1.serv.sherlocked93.club/api?name=a</code> è‡ªåŠ¨è½¬å‘åˆ° <code>127.0.0.1:8080/test1/api?name=a </code>ï¼›</li><li><code>test2.serv.sherlocked93.club/api?name=a</code> è‡ªåŠ¨è½¬å‘åˆ° <code>127.0.0.1:8080/test2/api?name=a</code> ï¼›</li></ol><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> ~^([\w-]+)\.serv\.sherlocked93\.club$</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span>        X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span>        X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span>        Host <span class="token variable">$http_host</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_set_header</span>        X-NginX-Proxy true</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span>              http://127.0.0.1:8080/<span class="token variable">$1</span><span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_16-æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#_16-æœ€ä½³å®è·µ" aria-hidden="true">#</a> 16. æœ€ä½³å®è·µ</h2><ol><li>ä¸ºäº†ä½¿ Nginx é…ç½®æ›´æ˜“äºç»´æŠ¤ï¼Œå»ºè®®ä¸ºæ¯ä¸ªæœåŠ¡åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼Œå­˜å‚¨åœ¨ <code>/etc/nginx/conf.d</code> ç›®å½•ï¼Œæ ¹æ®éœ€æ±‚å¯ä»¥åˆ›å»ºä»»æ„å¤šä¸ªç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ã€‚</li><li>ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼Œå»ºè®®éµå¾ªä»¥ä¸‹å‘½åçº¦å®š <code>&lt;æœåŠ¡&gt;.conf</code>ï¼Œæ¯”å¦‚åŸŸåæ˜¯ <code>sherlocked93.club</code>ï¼Œé‚£ä¹ˆä½ çš„é…ç½®æ–‡ä»¶çš„åº”è¯¥æ˜¯è¿™æ ·çš„ <code>/etc/nginx/conf.d/sherlocked93.club.conf</code>ï¼Œå¦‚æœéƒ¨ç½²å¤šä¸ªæœåŠ¡ï¼Œä¹Ÿå¯ä»¥åœ¨æ–‡ä»¶åä¸­åŠ ä¸Š Nginx è½¬å‘çš„ç«¯å£å·ï¼Œæ¯”å¦‚ <code>sherlocked93.club.8080.conf</code>ï¼Œå¦‚æœæ˜¯äºŒçº§åŸŸåï¼Œå»ºè®®ä¹Ÿéƒ½åŠ ä¸Š <code>fe.sherlocked93.club.conf</code>ã€‚</li><li>å¸¸ç”¨çš„ã€å¤ç”¨é¢‘ç‡æ¯”è¾ƒé«˜çš„é…ç½®å¯ä»¥æ”¾åˆ° <code>/etc/nginx/snippets</code> æ–‡ä»¶å¤¹ï¼Œåœ¨ Nginx çš„é…ç½®æ–‡ä»¶ä¸­éœ€è¦ç”¨åˆ°çš„ä½ç½® include è¿›å»ï¼Œä»¥åŠŸèƒ½æ¥å‘½åï¼Œå¹¶åœ¨æ¯ä¸ª snippet é…ç½®æ–‡ä»¶çš„å¼€å¤´æ³¨é‡Šæ ‡æ˜ä¸»è¦åŠŸèƒ½å’Œå¼•å…¥ä½ç½®ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚æ¯”å¦‚ä¹‹å‰çš„ <code>gzip</code>ã€<code>cors</code> ç­‰å¸¸ç”¨é…ç½®ï¼Œæˆ‘éƒ½è®¾ç½®äº† snippetã€‚</li><li>Nginx æ—¥å¿—ç›¸å…³ç›®å½•ï¼Œå†…ä»¥ <code>åŸŸå.type.log</code> å‘½åï¼ˆæ¯”å¦‚ <code>be.sherlocked93.club.access.log</code> å’Œ <code>be.sherlocked93.club.error.log</code> ï¼‰ä½äº <code>/var/log/nginx/</code> ç›®å½•ä¸­ï¼Œä¸ºæ¯ä¸ªç‹¬ç«‹çš„æœåŠ¡é…ç½®ä¸åŒçš„è®¿é—®æƒé™å’Œé”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼Œè¿™æ ·æŸ¥æ‰¾é”™è¯¯æ—¶ï¼Œä¼šæ›´åŠ æ–¹ä¾¿å¿«æ·ã€‚</li></ol></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 1066643487@qq.com">fanfan</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a aria-label="02_Nginx å…¥é—¨å®æˆ˜" class="vp-link nav-link next nav-link next" href="/nginx/nginx_02.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">02_Nginx å…¥é—¨å®æˆ˜<span class="font-icon icon iconfont icon-nginx" style=""></span></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.8</div></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">å¤‡æ¡ˆå·ï¼š<a href="https://beian.miit.gov.cn"><img class="icp-icon"><span>å®ICPå¤‡2023001647å·</span></a></div><div class="vp-copyright">Copyright Â© 2024 fanfan</div></footer></div><!--]--><!----><!----><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-gulTYumw.js" defer></script>
  </body>
</html>
