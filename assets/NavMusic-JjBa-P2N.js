import{h as _,o as m,c as M,l as v,E as h,i as P,_ as b,N as g,r as A,g as E,w,a as l,P as x,Q as G,d as I}from"./app-gulTYumw.js";import{_ as p}from"./plugin-vue_export-helper-x3n3nnut.js";import{a as B}from"./axios-QLjAsgXu.js";const C="/img/off.svg",S={src:C,alt:"Off"},k=_({__name:"MyIcon",props:{name:String,spin:Boolean},setup(y){return(s,a)=>(m(),M("img",S))}}),N=p(k,[["__file","MyIcon.vue"]]),L={class:"MyMusic"},O=l("div",{id:"GlobalAPlayer"},null,-1),T=_({__name:"NavMusic",setup(y){let s,a=v(!1),i=[];const f=()=>{a.value=!a.value},r=()=>{a.value&&(a.value=!1)},u=()=>{const t=document.querySelector(".vp-navbar-end");if(!t)return;if(!document.querySelector("#MyMusic_Menu")){const n=document.createElement("div");n.id="MyMusic_Menu",n.classList.add("nav-item"),n.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',t.appendChild(n)}const e=document.querySelector("#MyMusic_Menu");e.onclick=n=>{f(),n.stopPropagation()};const o=document.querySelector(".MyMusic");o.onclick=n=>{n.stopPropagation()}},d=()=>{if(!s)return;const t=window,e=document.getElementById("GlobalAPlayer");!e||i.length<1||(c(),e.classList.contains("aplayer"))||(t.GlobalAPlayer=new s({container:document.getElementById("GlobalAPlayer"),audio:i,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"GlobalAPlayer"}),t.GlobalAPlayer.on("play",function(){c()}),t.GlobalAPlayer.on("pause",function(){c()}))};function c(){var e,o;const t=window;t.GlobalAPlayer&&t.GlobalAPlayer.mode&&(t.GlobalAPlayer.paused?(e=document.getElementById("MyMusic_icon"))==null||e.setAttribute("spin","false"):(o=document.getElementById("MyMusic_icon"))==null||o.setAttribute("spin","true"))}return h(()=>{const t=P();B({method:"get",url:"//file.fanliu.top/music/list.json",params:{}}).then(e=>{var o=e.data;o&&o.length>0&&(o.forEach(n=>{n.hasOwnProperty("title")&&(n.name=n.title,delete n.title)}),i=o)}),b(()=>import("./APlayer.min-GBNn7yKx.js").then(e=>e.A),__vite__mapDeps([])).then(e=>{g(()=>{s=e.default,u(),d(),window.document.body.onclick=()=>{r()}}),t.beforeEach(()=>{setTimeout(()=>{u(),d()},50)})})}),(t,e)=>{const o=A("ClientOnly");return m(),E(o,null,{default:w(()=>[l("div",L,[l("div",{class:x(["MyMusic_Play",{hide:!G(a)}])},[l("div",{class:"close",onClick:r},[I(N,{name:"guanbi"})]),O],2)])]),_:1})}}}),D=p(T,[["__file","NavMusic.vue"]]);export{D as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}